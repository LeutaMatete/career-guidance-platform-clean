/*! For license information please see main.77a379bd.js.LICENSE.txt */
(()=>{"use strict";var e={27:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{eJ:()=>ft,xI:()=>qn,hg:()=>yt,gA:()=>gt,x9:()=>mt,CI:()=>bt,r7:()=>vt});var i=n(555),s=n(791),a=n(498),o=n(226),l=n(863);const c=["providerId"],u=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p=h,f=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m=new o.Vy("@firebase/auth");function g(e){if(m.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.error("Auth (".concat(s.MF,"): ").concat(e),...n)}}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw x(e,...n)}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x(e,...n)}function b(e,t,n){const r=(0,i.A)((0,i.A)({},p()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function w(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return f.create(e,...n)}function j(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw x(t,...r)}}function S(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function E(e,t){e||S(t)}function _(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===N()||"https:"===N()}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,E(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(C()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function I(e,t){E(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void S("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void S("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void S("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},P=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R=new k(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function O(e,t,n,r){return L(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const l=(0,a.Am)((0,i.A)({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=(0,i.A)({method:t,headers:c},s);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),A.fetch()(await F(e,e.config.apiHost,n,l),u)})}async function L(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},T),t);try{const t=new V(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw z(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw z(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw b(e,o,a);v(e,o)}}catch(s){if(s instanceof a.g)throw s;v(e,"network-request-failed",{message:String(s)})}}async function M(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await O(e,t,n,r,i);return"mfaPendingCredential"in s&&v(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function F(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?I(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(P.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function U(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"network-request-failed")),R.get())})}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}function q(e){return void 0!==e&&void 0!==e.enterprise}class B{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return U(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H(e,t){return O(e,"GET","/v2/recaptchaConfig",D(e,t))}async function G(e,t){return O(e,"POST","/v1/accounts:lookup",t)}function W(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(e){return 1e3*Number(e)}function Q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(i){return g("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function J(e){const t=Q(e);return j(t,"internal-error"),j("undefined"!==typeof t.exp,"internal-error"),j("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Y(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class X{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W(this.lastLoginAt),this.creationTime=W(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Z(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Y(e,G(n,{idToken:r}));j(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?ee(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new X(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function ee(e){return e.map(e=>{let{providerId:t}=e,n=r(e,c);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j("undefined"!==typeof e.idToken,"internal-error"),j("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):J(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){j(0!==e.length,"internal-error");const t=J(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await L(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await F(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),A.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new te;return n&&(j("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(j("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(j("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return S("not implemented")}}function ne(e,t){j("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class re{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,s=r(e,u);this.providerId="firebase",this.proactiveRefresh=new $(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new X(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Y(this,this.stsTokenManager.getToken(this.auth,e));return j(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),i=Q(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:W(K(i.auth_time)),issuedAtTime:W(K(i.iat)),expirationTime:W(K(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await Z(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new re((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Z(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,s.xZ)(this.auth.app))return Promise.reject(w(this.auth));const e=await this.getIdToken();return await Y(this,async function(e,t){return O(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,o,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:S,stsTokenManager:E}=t;j(b&&E,e,"internal-error");const _=te.fromJSON(this.name,E);j("string"===typeof b,e,"internal-error"),ne(d,e.name),ne(h,e.name),j("boolean"===typeof w,e,"internal-error"),j("boolean"===typeof x,e,"internal-error"),ne(p,e.name),ne(f,e.name),ne(m,e.name),ne(g,e.name),ne(v,e.name),ne(y,e.name);const C=new re({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:f,phoneNumber:p,tenantId:m,stsTokenManager:_,createdAt:v,lastLoginAt:y});return S&&Array.isArray(S)&&(C.providerData=S.map(e=>(0,i.A)({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new te;r.updateFromServerResponse(t);const i=new re({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Z(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];j(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ee(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new te;a.updateFromIdToken(n);const o=new re({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new X(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const ie=new Map;function se(e){E(e instanceof Function,"Expected a class definition");let t=ie.get(e);return t?(E(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ie.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const oe=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ce{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,i),this.fullPersistenceKey=le("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await G(this.auth,{idToken:e}).catch(()=>{});return t?re._fromGetAccountInfoResponse(this.auth,t,e):null}return re._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ce(se(oe),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||se(oe);const s=le(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await G(e,{idToken:t}).catch(()=>{});if(!r)break;n=await re._fromGetAccountInfoResponse(e,r,t)}else n=re._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new ce(i,e,n)):new ce(i,e,n)}}function ue(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ge(t))return"Blackberry";if(ve(t))return"Webos";if(he(t))return"Safari";if((t.includes("chrome/")||pe(t))&&!t.includes("edge/"))return"Chrome";if(me(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function he(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return ye(e)||me(e)||ve(e)||ge(e)||/windows phone/i.test(e)||fe(e)}function we(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ue((0,a.ZQ)());break;case"Worker":t="".concat(ue((0,a.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(s.MF,"/").concat(r)}class xe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class je{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Se{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _e(this),this.idTokenSubscription=new _e(this),this.beforeStateQueue=new xe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=se(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ce.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await G(this,{idToken:e}),n=await re._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,s.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Z(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,s.xZ)(this.app))return Promise.reject(w(this));const t=e?(0,a.Ku)(e):null;return t&&j(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,s.xZ)(this.app)?Promise.reject(w(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,s.xZ)(this.app)?Promise.reject(w(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(se(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return O(e,"GET","/v2/passwordPolicy",D(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new je(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return O(e,"POST","/v2/accounts:revokeToken",D(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&se(e)||this._popupRedirectResolver;j(t,this,"argument-error"),this.redirectPersistenceManager=await ce.create(this,[se(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=we(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,s.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(m.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];m.warn("Auth (".concat(s.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ee(e){return(0,a.Ku)(e)}class _e{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ne(e){return Ce.loadJS(e)}function ke(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ie{constructor(){this.enterprise=new Ae}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ae{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Te="NO_RECAPTCHA";class Pe{constructor(e){this.type="recaptcha-enterprise",this.auth=Ee(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;q(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Te)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ie).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{H(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new B(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&q(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ce.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ne(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Re(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Pe(e);let o;if(s)o=Te;else try{o=await a.verify(n)}catch(c){o=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function De(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Re(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Re(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Re(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Re(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Re(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Oe(e){const t=Ee(e),n=await H(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new B(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Pe(t).verify()}}function Le(e,t,n){const r=Ee(e);j(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Me(t),{host:o,port:l}=function(e){const t=Me(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Fe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Fe(t)}}}(t),c=null===l?"":":".concat(l),u={url:"".concat(s,"//").concat(o).concat(c,"/")},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return j(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void j((0,a.bD)(u,r.config.emulator)&&(0,a.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(o)?((0,a.gE)("".concat(s,"//").concat(o).concat(c)),(0,a.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Me(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ue{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return S("not implemented")}_getIdTokenResponse(e){return S("not implemented")}_linkToIdToken(e,t){return S("not implemented")}_getReauthenticationResolver(e){return S("not implemented")}}async function Ve(e,t){return O(e,"POST","/v1/accounts:signUp",t)}async function ze(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",D(e,t))}async function qe(e,t){return O(e,"POST","/v1/accounts:sendOobCode",D(e,t))}class Be extends Ue{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Be(e,t,"password")}static _fromEmailAndCode(e,t){return new Be(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return De(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ze,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}(e,{email:this._email,oobCode:this._password});default:v(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return De(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ve,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:v(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function He(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",D(e,t))}class Ge extends Ue{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ge(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):v("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=r(t,d);if(!n||!i)return null;const a=new Ge(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return He(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,He(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,He(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function We(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))}const Ke={USER_NOT_FOUND:"user-not-found"};class Qe extends Ue{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await M(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),Ke)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Qe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Je{constructor(e){var t,n,r,i,s,o;const l=(0,a.I9)((0,a.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);j(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=l.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Je(t)}catch(n){return null}}}class Ye{constructor(){this.providerId=Ye.PROVIDER_ID}static credential(e,t){return Be._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Je.parseLink(t);return j(n,"argument-error"),Be._fromEmailAndCode(e,n.code,n.tenantId)}}Ye.PROVIDER_ID="password",Ye.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ye.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class $e{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xe extends $e{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ze extends Xe{constructor(){super("facebook.com")}static credential(e){return Ge._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ze.credential(t.oauthAccessToken)}catch(n){return null}}}Ze.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ze.PROVIDER_ID="facebook.com";class et extends Xe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ge._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return et.credential(n,r)}catch(i){return null}}}et.GOOGLE_SIGN_IN_METHOD="google.com",et.PROVIDER_ID="google.com";class tt extends Xe{constructor(){super("github.com")}static credential(e){return Ge._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return tt.credential(t.oauthAccessToken)}catch(n){return null}}}tt.GITHUB_SIGN_IN_METHOD="github.com",tt.PROVIDER_ID="github.com";class nt extends Xe{constructor(){super("twitter.com")}static credential(e,t){return Ge._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return nt.credential(n,r)}catch(i){return null}}}async function rt(e,t){return M(e,"POST","/v1/accounts:signUp",D(e,t))}nt.TWITTER_SIGN_IN_METHOD="twitter.com",nt.PROVIDER_ID="twitter.com";class it{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await re._fromIdTokenResponse(e,n,r),s=st(n);return new it({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=st(n);return new it({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function st(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class at extends a.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,at.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new at(e,t,n,r)}}function ot(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw at._fromErrorAndOperation(e,n,t,r);throw n})}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Y(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return it._forOperation(e,"link",r)}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,s.xZ)(r.app))return Promise.reject(w(r));const i="reauthenticate";try{const s=await Y(e,ot(r,i,t,e),n);j(s.idToken,r,"internal-error");const a=Q(s.idToken);j(a,r,"internal-error");const{sub:o}=a;return j(e.uid===o,r,"user-mismatch"),it._forOperation(e,i,s)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&v(r,"user-mismatch"),a}}async function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.xZ)(e.app))return Promise.reject(w(e));const r="signIn",i=await ot(e,r,t),a=await it._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function dt(e,t){return ut(Ee(e),t)}function ht(e,t,n){var r;j((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),j("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),j("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(j(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(j(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function pt(e){const t=Ee(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ft(e,t,n){if((0,s.xZ)(e.app))return Promise.reject(w(e));const r=Ee(e),i=De(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rt,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&pt(e),t}),o=await it._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function mt(e,t,n){return(0,s.xZ)(e.app)?Promise.reject(w(e)):dt((0,a.Ku)(e),Ye.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&pt(e),t})}async function gt(e,t){const n=(0,a.Ku)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ht(n.auth,r,t);const{email:i}=await async function(e,t){return qe(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function vt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,a.Ku)(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Y(i,async function(e,t){return O(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function yt(e,t,n,r){return(0,a.Ku)(e).onAuthStateChanged(t,n,r)}function bt(e){return(0,a.Ku)(e).signOut()}function wt(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",D(e,t))}new WeakMap;const xt="__sak";class jt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xt,"1"),this.storage.removeItem(xt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class St extends jt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}St.type="LOCAL";const Et=St;function _t(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Ct(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Nt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Ct(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return _t(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Ct(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Ct(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=_t(n);const i=setInterval(()=>{const e=_t(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Nt.type="COOKIE";class kt extends jt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kt.type="SESSION";const It=kt;class At{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new At(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Tt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}At.receivers=[];class Pt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Tt("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Rt(){return window}function Dt(){return"undefined"!==typeof Rt().WorkerGlobalScope&&"function"===typeof Rt().importScripts}const Ot="firebaseLocalStorageDb",Lt="firebaseLocalStorage",Mt="fbase_key";class Ft{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ut(e,t){return e.transaction([Lt],t?"readwrite":"readonly").objectStore(Lt)}function Vt(){const e=indexedDB.open(Ot,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Lt,{keyPath:Mt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Lt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ot);return new Ft(e).toPromise()}(),t(await Vt()))})})}async function zt(e,t,n){const r=Ut(e,!0).put({[Mt]:t,value:n});return new Ft(r).toPromise()}function qt(e,t){const n=Ut(e,!0).delete(t);return new Ft(n).toPromise()}class Bt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Vt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=At._getInstance(Dt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Pt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vt();return await zt(e,xt,"1"),await qt(e,xt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>zt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ut(e,!1).get(t),r=await new Ft(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ut(e,!1).getAll();return new Ft(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Bt.type="LOCAL";const Ht=Bt;function Gt(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",D(e,t))}ke("rcb"),new k(3e4,6e4);const Wt="recaptcha";async function Kt(e,t,n){if(!e._getRecaptchaConfig())try{await Oe(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){j("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=De(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Te){j((null===n||void 0===n?void 0:n.type)===Wt,e,"argument-error");return wt(e,await Qt(e,t,n))}return wt(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;j("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;j(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=De(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Te){j((null===n||void 0===n?void 0:n.type)===Wt,e,"argument-error");return Gt(e,await Qt(e,t,n))}return Gt(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=De(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Te){j((null===n||void 0===n?void 0:n.type)===Wt,e,"argument-error");return We(e,await Qt(e,t,n))}return We(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qt(e,t,n){j(n.type===Wt,e,"argument-error");const r=await n.verify();j("string"===typeof r,e,"argument-error");const s=(0,i.A)({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Jt{constructor(e){this.providerId=Jt.PROVIDER_ID,this.auth=Ee(e)}verifyPhoneNumber(e,t){return Kt(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jt.credentialFromTaggedObject(t)}static credentialFromError(e){return Jt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Qe._fromTokenResponse(n,r):null}}function Yt(e,t){return t?se(t):(j(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jt.PROVIDER_ID="phone",Jt.PHONE_SIGN_IN_METHOD="phone";class $t extends Ue{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return He(e,this._buildIdpRequest())}_linkToIdToken(e,t){return He(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return He(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xt(e){return ut(e.auth,new $t(e),e.bypassAuthState)}function Zt(e){const{auth:t,user:n}=e;return j(n,t,"internal-error"),ct(n,new $t(e),e.bypassAuthState)}async function en(e){const{auth:t,user:n}=e;return j(n,t,"internal-error"),lt(n,new $t(e),e.bypassAuthState)}class tn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xt;case"linkViaPopup":case"linkViaRedirect":return en;case"reauthViaPopup":case"reauthViaRedirect":return Zt;default:v(this.auth,"internal-error")}}resolve(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nn=new k(2e3,1e4);class rn extends tn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rn.currentPopupAction&&rn.currentPopupAction.cancel(),rn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){E(1===this.filter.length,"Popup operations only handle one event");const e=Tt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,nn.get())};e()}}rn.currentPopupAction=null;const sn=new Map;class an extends tn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=sn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cn(t),r=ln(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}sn.set(this.auth._key(),e)}return this.bypassAuthState||sn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function on(e,t){sn.set(e._key(),t)}function ln(e){return se(e._redirectPersistence)}function cn(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function un(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,s.xZ)(e.app))return Promise.reject(w(e));const r=Ee(e),i=Yt(r,t),a=new an(r,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class dn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hn(e))}saveEventToCache(e){this.cachedEventUids.add(hn(e)),this.lastProcessedEventTime=Date.now()}}function hn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function pn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mn=/^https?/;async function gn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return O(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vn(r))return}catch(n){}v(e,"unauthorized-domain")}function vn(e){const t=_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mn.test(n))return!1;if(fn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const yn=new k(3e4,6e4);function bn(){const e=Rt().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function wn(e){return new Promise((t,n)=>{var r,i;function s(){bn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bn(),n(y(e,"network-request-failed"))},timeout:yn.get()})}if(null!==(r=Rt().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Rt().gapi)||void 0===i||!i.load){const t=ke("iframefcb");return Rt()[t]=()=>{gapi.load?s():n(y(e,"network-request-failed"))},Ne("".concat(Ce.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw xn=null,e})}let xn=null;const jn=new k(5e3,15e3),Sn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},En=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _n(e){const t=e.config;j(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?I(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:s.MF},i=En.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,a.Am)(r).slice(1))}async function Cn(e){const t=await function(e){return xn=xn||wn(e),xn}(e),n=Rt().gapi;return j(n,e,"internal-error"),t.open({where:document.body,url:_n(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=Rt().setTimeout(()=>{r(i)},jn.get());function a(){Rt().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Nn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function In(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=(0,i.A)((0,i.A)({},Nn),{},{width:r.toString(),height:s.toString(),top:o,left:l}),d=(0,a.ZQ)().toLowerCase();n&&(c=pe(d)?"_blank":n),de(d)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ye(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new kn(null);const p=window.open(t||"",c,h);j(p,e,"popup-blocked");try{p.focus()}catch(f){}return new kn(p)}const An="__/auth/handler",Tn="emulator/auth/handler",Pn=encodeURIComponent("fac");async function Rn(e,t,n,r,i,o){j(e.config.authDomain,e,"auth-domain-config-required"),j(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.MF,eventId:i};if(t instanceof $e){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof Xe){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];const u=await e._getAppCheckToken(),d=u?"#".concat(Pn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(An);return I(t,Tn)}(e),"?").concat((0,a.Am)(c).slice(1)).concat(d)}const Dn="webStorageSupport";const On=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=It,this._completeRedirectFn=un,this._overrideRedirectResult=on}async _openPopup(e,t,n,r){var i;E(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return In(e,await Rn(e,t,n,_(),r),Tt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rt().location.href=e}(await Rn(e,t,n,_(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(E(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Cn(e),n=new dn(e);return t.register("authEvent",t=>{j(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dn,{type:Dn},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Dn];void 0!==i&&t(!!i),v(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||he()||ye()}};var Ln="@firebase/auth",Mn="1.11.1";class Fn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Un=(0,a.XA)("authIdTokenMaxAge")||300;let Vn=null;const zn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Un)return;const i=null===n||void 0===n?void 0:n.token;Vn!==i&&(Vn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sx)();const t=(0,s.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,s.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;v(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:On,persistence:[Ht,Et,It]}),r=(0,a.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=zn(e.toString());!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=(0,a.Tj)("auth");return i&&Le(n,"http://".concat(i)),n}var Bn;Ce={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Bn="Browser",(0,s.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;j(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Bn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:we(Bn)},c=new Se(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(se);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s.om)(new l.uA("auth-internal",e=>(e=>new Fn(e))(Ee(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KO)(Ln,Mn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Bn)),(0,s.KO)(Ln,Mn,"esm2020")},47:(e,t,n)=>{n.d(t,{RJ:()=>u,ZA:()=>o,getAdmissionsByInstitution:()=>l,mD:()=>c,updateAdmissionApplicationCounts:()=>d,wB:()=>h});var r=n(555),i=n(306),s=n(936);const a="admissions",o=async()=>{try{const e=(0,i.P)((0,i.rJ)(s.db,a),(0,i.My)("publishedAt","desc"));return(await(0,i.GG)(e)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting admissions:",e),new Error("Failed to load admissions")}},l=async e=>{try{const{getCoursesByInstitution:t}=await Promise.resolve().then(n.bind(n,469)),o=(await t(e)).map(e=>e.id);if(0===o.length)return[];const l=(0,i.P)((0,i.rJ)(s.db,a),(0,i._M)("courseId","in",o),(0,i.My)("publishedAt","desc"));return(await(0,i.GG)(l)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting admissions by institution:",t),new Error("Failed to load admissions")}},c=async e=>{try{return(await(0,i.gS)((0,i.rJ)(s.db,a),(0,r.A)((0,r.A)({},e),{},{publishedAt:(new Date).toISOString(),status:"open",applicationsReceived:0,applicationsApproved:0,applicationsRejected:0}))).id}catch(t){throw console.error("Error creating admission:",t),new Error("Failed to create admission")}},u=async(e,t)=>{try{const n=(0,i.H9)(s.db,a,e);await(0,i.mZ)(n,{status:t,updatedAt:(new Date).toISOString()})}catch(n){throw console.error("Error updating admission status:",n),new Error("Failed to update admission status")}},d=async e=>{try{const{getApplicationsByAdmission:t}=await n.e(48).then(n.bind(n,48)),r=await t(e),o=r.filter(e=>"approved"===e.status).length,l=r.filter(e=>"rejected"===e.status).length,c=r.length,u=(0,i.H9)(s.db,a,e);await(0,i.mZ)(u,{applicationsReceived:c,applicationsApproved:o,applicationsRejected:l,updatedAt:(new Date).toISOString()})}catch(t){console.error("Error updating admission application counts:",t)}},h=e=>{const t=(0,i.P)((0,i.rJ)(s.db,a),(0,i.My)("publishedAt","desc"));return(0,i.aQ)(t,t=>{const n=t.docs.map(e=>(0,r.A)({id:e.id},e.data()));e(n)},e=>{console.error("Error in admissions subscription:",e)})}},49:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,j=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+k(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+k(o=e[c],c);l+=I(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,u=s+k(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},226:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},272:(e,t,n)=>{n.d(t,{P2:()=>v});var r=n(555);const i=(e,t)=>t.some(t=>e instanceof t);let s,a;const o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(g(this),t,...r);return c.set(s,t.sort?t.sort():[t]),m(s)}}function f(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});l.set(e,t)}(e),i(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function v(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=m(a);return r&&a.addEventListener("upgradeneeded",e=>{r(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const y=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return w.set(t,s),s}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(h)},306:(e,t,n)=>{n.d(t,{gS:()=>uc,rJ:()=>el,kd:()=>cc,H9:()=>tl,x7:()=>ic,GG:()=>ac,aU:()=>ol,aQ:()=>dc,My:()=>Kl,P:()=>ql,BN:()=>oc,mZ:()=>lc,_M:()=>Hl});var r,i,s=n(555),a=n(791),o=n(863),l=n(226),c=n(498),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function s(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function o(e){return-128<=e&&e<128?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],e<0?-1:0)}):new s([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return m(l(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),u=o(1),h=o(16777216);function p(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return-1==e.h}function m(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(u)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(p(t))throw Error("division by zero");if(p(e))return new y(c,c);if(f(e))return t=b(m(e),t),new y(m(t.g),m(t.h));if(f(t))return t=b(e,m(t)),new y(m(t.g),t.h);if(e.g.length>30){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!p(r);){var a=s.add(r);a.l(e)<=0&&(i=i.add(n),s=a),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(s=l(n)).j(t);f(a)||a.l(e)>0;)a=(s=l(n-=r)).j(t);p(s)&&(s=u),i=i.add(s),e=g(e,a)}return new y(i,e)}function w(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let s=0;s<r;s++)i[s]=t>0?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(f(this))return-m(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(f(this))return"-"+m(this).toString(e);const t=l(Math.pow(e,6));var n=this;let r="";for(;;){const i=b(n,t).g;let s=(((n=g(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(p(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return f(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return f(this)?m(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),s=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,t&=65535,s&=65535,n[i]=s<<16|t}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(f(this))return f(e)?m(this).j(m(e)):m(m(this).j(e));if(f(e))return m(this.j(m(e)));if(this.l(h)<0&&e.l(h)<0)return l(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,s=65535&this.i(r),a=e.i(t)>>>16,o=65535&e.i(t);n[2*r+2*t]+=s*o,v(n,2*r+2*t),n[2*r+2*t+1]+=i*o,v(n,2*r+2*t+1),n[2*r+2*t+1]+=s*a,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new s(n,0)},e.B=function(e){return b(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,i=d.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=l(Math.pow(n,8));let i=c;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=l(Math.pow(n,s)),i=i.j(s).add(l(e))):(i=i.j(r),i=i.add(l(e)))}return i},r=d.Integer=s}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,p,f,m,g,v,y,b,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},x={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof w&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function j(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function _(e){s.setTimeout(()=>{throw e},0)}function C(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,A=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=Promise.resolve(void 0);I=()=>{e.then(R)}};function R(){for(var e;e=C();){try{e.h.call(e.g)}catch(n){_(n)}var t=N;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}A=!1}function D(){this.u=this.u,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function M(e){return/^[\s\xa0]*$/.test(e)}function F(e,t){O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(F,O),F.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),V=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++V,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function H(e){const t={};for(const n in e)t[n]=e[n];return t}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<G.length;t++)n=G[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function K(e){this.src=e,this.g={},this.h=0}function Q(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function J(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}K.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=J(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Y="closure_lm_"+(1e6*Math.random()|0),$={};function X(e,t,n,r,i){if(r&&r.once)return ee(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)X(e,t[s],n,r,i);return null}return n=le(n),e&&e[U]?e.J(t,n,a(r)?!!r.capture:!!r,i):Z(e,t,n,!1,r,i)}function Z(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=ae(e);if(l||(e[Y]=l=new K(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=se;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ee(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)ee(e,t[s],n,r,i);return null}return n=le(n),e&&e[U]?e.K(t,n,a(r)?!!r.capture:!!r,i):Z(e,t,n,!0,r,i)}function ne(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ne(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=le(n),e&&e[U]?(e=e.i,(s=String(t).toString())in e.g&&((n=J(t=e.g[s],n,r,i))>-1&&(q(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=J(t,n,r,i)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])Q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ae(t))?(Q(n,e),0==n.h&&(n.src=null,t[Y]=null)):q(e)}}}function ie(e){return e in $?$[e]:$[e]="on"+e}function se(e,t){if(e.da)e=!0;else{t=new F(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function ae(e){return(e=e[Y])instanceof K?e:null}var oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[oe]||(e[oe]=function(t){return e.handleEvent(t)}),e[oe])}function ce(){D.call(this),this.i=new K(this),this.M=this,this.G=null}function ue(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;W(t=new O(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=de(s,r,!0,t)&&i;if(s=t.g=e,i=de(s,r,!0,t)&&i,i=de(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=de(s,r,!1,t)&&i}function de(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&Q(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function he(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,he(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ce,D),ce.prototype[U]=!0,ce.prototype.removeEventListener=function(e,t,n,r){ne(this,e,t,n,r)},ce.prototype.N=function(){if(ce.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)q(n[e]);delete e.g[t],e.h--}}this.G=null},ce.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ce.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class pe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(e){D.call(this),this.h=e,this.g={}}u(fe,D);var me=[];function ge(e){B(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}fe.prototype.N=function(){fe.Z.N.call(this),ge(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=s.JSON.stringify,ye=s.JSON.parse,be=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function we(){}function xe(){}var je={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Se(){O.call(this,"d")}function Ee(){O.call(this,"c")}u(Se,O),u(Ee,O);var _e={},Ce=null;function Ne(){return Ce=Ce||new ce}function ke(e){O.call(this,_e.Ia,e)}function Ie(e){const t=Ne();ue(t,new ke(t))}function Ae(e,t){O.call(this,_e.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ne();ue(t,new Ae(t,e))}function Pe(e,t){O.call(this,_e.Ja,e),this.size=t}function Re(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function De(){this.g=!0}function Oe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ve(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}_e.Ia="serverreachability",u(ke,O),_e.STAT_EVENT="statevent",u(Ae,O),_e.Ja="timingevent",u(Pe,O),De.prototype.ua=function(){this.g=!1},De.prototype.info=function(){};var Le,Me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ue(){}function Ve(e){return encodeURIComponent(String(e))}function ze(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function qe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Be}function Be(){this.i=null,this.g="",this.h=!1}u(Ue,we),Ue.prototype.g=function(){return new XMLHttpRequest},Le=new Ue;var He={},Ge={};function We(e,t,n){e.M=1,e.A=vt(ht(t)),e.u=n,e.R=!0,Ke(e,null)}function Ke(e,t){e.F=Date.now(),Ye(e),e.B=ht(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Be,e.g=yn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(me[0]=i.toString()),i=me);for(let s=0;s<i.length;s++){const e=X(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?H(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Ie(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Qe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ge:(n=Number(t.substring(n,r)),isNaN(n)?He:(r+=1)+n>t.length?Ge:(t=t.slice(r,r+n),e.C=r+n,t))}function Ye(e){e.T=Date.now()+e.H,$e(e,e.H)}function $e(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Re(l(e.aa,e),t)}function Xe(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ze(e){0==e.j.I||e.K||pn(e.j,e)}function et(e){Xe(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||at(n.h,e)))if(!e.L&&at(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}cn(n),Te(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Re(l(n.Va,n),6e3));st(n.h)<=1&&n.ta&&(n.ta=void 0)}else mn(n,11)}else if((e.L||n.g==e)&&hn(n),!M(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ot(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=vn(r,r.L?r.ba:null,r.W),a.L){lt(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Xe(o),Ye(o)),r.g=a}else ln(r);n.i.length>0&&rn(n)}else"stop"!=l[0]&&"close"!=l[0]||mn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mn(n,7):en(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}Ie()}catch(u){}}qe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Yt(e)?t.j():this.Y(e)},qe.prototype.Y=function(e){try{if(e==this.g)e:{const l=Yt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||4!=l||7==c||Ie(),Xe(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Qe(e))return e.g.la();const t=$t(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Yt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),Ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,Te(12),et(this),Ze(this);break e}Oe(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Je(this,n),t==Ge){4==l&&(this.m=4,Te(14),e=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}if(t==He){this.m=4,Te(15),Oe(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Oe(this.i,this.l,t,null),tt(this,t)}if(Qe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,Te(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),un(o),o.P=!0,Te(11))}}else Oe(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),Ze(this)}else Oe(this.i,this.l,n,null),tt(this,n);4==l&&et(this),this.o&&!this.K&&(4==l?pn(this.j,this):(this.o=!1,Ye(this)))}else(function(e){const t={};e=(e.g&&Yt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(M(e[r]))continue;var n=ze(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,Te(12)):(this.m=0,Te(13)),et(this),Ze(this)}}}catch(te){}},qe.prototype.cancel=function(){this.K=!0,et(this)},qe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Ie(),Te(17)),et(this),this.m=2,Ze(this)):$e(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(e){return!!e.h||!!e.g&&e.g.size>=e.j}function st(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ot(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return j(e.i)}rt.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof dt?(this.l=e.l,pt(this,e.j),this.o=e.o,this.g=e.g,ft(this,e.u),this.h=e.h,mt(this,Pt(e.i)),this.m=e.m):e&&(t=String(e).match(ut))?(this.l=!1,pt(this,t[1]||"",!0),this.o=yt(t[2]||""),this.g=yt(t[3]||"",!0),ft(this,t[4]),this.h=yt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=yt(t[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}function ht(e){return new dt(e)}function pt(e,t,n){e.j=n?yt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ft(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function mt(e,t,n){t instanceof Ct?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(kt(this,t),Tt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=bt(t,Et)),e.i=new Ct(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function vt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(bt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,xt,!0),"@"),e.push(Ve(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?St:jt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,_t)),e.join("")},dt.prototype.resolve=function(e){const t=ht(this);let n=!!e.j;n?pt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)ft(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?mt(t,Pt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var xt=/[#\/\?@]/g,jt=/[#\?:]/g,St=/[#\?]/g,Et=/[#\?@]/g,_t=/#/g;function Ct(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){Nt(e),t=Rt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return Nt(e),t=Rt(e,t),e.g.has(t)}function At(e,t){Nt(e);let n=[];if("string"===typeof t)It(e,t)&&(n=n.concat(e.g.get(Rt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Tt(e,t,n){kt(e,t),n.length>0&&(e.i=null,e.g.set(Rt(e,t),j(n)),e.h+=n.length)}function Pt(e){const t=new Ct;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Rt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Dt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ot(){this.g=new be}function Lt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Mt(e,t){ce.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ft(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ut(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Vt(e)}function Vt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function zt(e){let t="";return B(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zt(n),"string"===typeof e?null!=n&&Ve(n):gt(e,t,n))}function Bt(e){ce.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=Ct.prototype).add=function(e,t){Nt(this),this.i=null,e=Rt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return Nt(this),this.i=null,It(this,e=Rt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=At(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ve(n);n=At(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ve(n[t])),e.push(r)}}return this.i=e.join("&")},u(Lt,we),Lt.prototype.g=function(){return new Mt(this.i,this.h)},u(Mt,ce),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Vt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ut(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vt(this)),this.g&&(this.readyState=3,Vt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ft(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ut(this):Vt(this),3==this.readyState&&Ft(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ut(this))},e.Na=function(e){this.g&&(this.response=e,Ut(this))},e.ga=function(){this.g&&Ut(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Bt,ce);var Ht=/^https?$/i,Gt=["POST","PUT"];function Wt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Kt(e),Jt(e)}function Kt(e){e.A||(e.A=!0,ue(e,"complete"),ue(e,"error"))}function Qt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Yt(e))setTimeout(e.Ca.bind(e),0);else if(ue(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ut)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Ht.test(t?t.toLowerCase():"")}n=r}if(n)ue(e,"complete"),ue(e,"success");else{e.o=6;try{var a=Yt(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Kt(e)}}finally{Jt(e)}}}function Jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ue(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Yt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zt(e){this.za=0,this.i=[],this.j=new De,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xt("baseRetryDelayMs",5e3,e),this.Za=Xt("retryDelaySeedMs",1e4,e),this.Ta=Xt("forwardChannelMaxRetries",2,e),this.va=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new Ot,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=ht(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new qe(e,e.j,t)).M=2,t.A=vt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=yn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ye(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(s.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function rn(e){if(!it(e.h)&&!e.m){e.m=!0;var t=e.Ea;I||P(),A||(I(),A=!0),T.add(t,e),e.D=0}}function sn(e,t){var n;n=t?t.l:e.V++;const r=ht(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),an(e,r),e.u&&e.o&&qt(r,e.u,e.o),n=new qe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=on(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),ot(e.h,n),We(n,r,t)}function an(e,t){e.H&&B(e.H,function(e,n){gt(t,n,e)}),e.l&&B({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=ve(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(S){throw e.push(s+"type="+encodeURIComponent("_badmap")),S}}catch(S){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;I||P(),A||(I(),A=!0),T.add(t,e),e.A=0}}function cn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Re(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function un(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function dn(e){e.g=new qe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=ht(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&qt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=vt(ht(t)),n.u=null,n.R=!0,Ke(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function pn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.G,lt(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ue(r=Ne(),new Pe(r,n)),rn(e)}else ln(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(st(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Re(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&cn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||pt(r,"https"),vt(r),t?function(e,t){const n=new De;if(s.Image){const r=new Image;r.onload=c(Dt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Dt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Dt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Dt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new De;const n=new AbortController,r=setTimeout(()=>{n.abort(),Dt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Dt(0,0,!0,t):Dt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Dt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,j(e.i),e.i.length=0),e.l.oa()}}function vn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ft(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new dt(null);r&&pt(e,r),t&&(e.g=t),i&&ft(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),an(e,r),r}function yn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Bt(new Lt({ab:n})):new Bt(e.ma)).Fa(e.L),t}function bn(){}function wn(){}function xn(e,t){ce.call(this),this.g=new Zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!M(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!M(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function jn(e){Se.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sn(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=Bt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Le.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Wt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Gt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Wt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ue(this,"complete"),ue(this,"abort"),Jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jt(this,!0)),Bt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Qt(this):this.Xa())},e.Xa=function(){Qt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Yt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ye(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=vn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new qe(this,this.j,e);let s=this.o;if(this.U&&(s?(s=H(s),W(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),gt(n=ht(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),an(this,n),s&&(this.R?t="headers="+Ve(zt(s))+"&"+t:this.u&&qt(n,this.u,s)),ot(this.h,i),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),i.U=!0,We(i,n,null)):We(i,n,t),this.I=2}}else 3==this.I&&(e?sn(this,e):0==this.i.length||it(this.h)||sn(this))},e.Da=function(){if(this.v=null,dn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Re(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Te(10),tn(this),dn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),cn(this),Te(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new xn(e,t)},u(xn,ce),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){en(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ve(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,xn.Z.N.call(this)},u(jn,Se),u(Sn,Ee),u(En,bn),En.prototype.ra=function(){ue(this.g,"a")},En.prototype.qa=function(e){ue(this.g,new jn(e))},En.prototype.pa=function(e){ue(this.g,new Sn)},En.prototype.oa=function(){ue(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,b=x.createWebChannelTransport=function(){return new wn},y=x.getStatEventTarget=function(){return Ne()},v=x.Event=_e,g=x.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,m=x.ErrorCode=Me,Fe.COMPLETE="complete",f=x.EventType=Fe,xe.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",ce.prototype.listen=ce.prototype.J,p=x.WebChannel=xe,x.FetchXmlHttpFactory=Lt,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,h=x.XhrIo=Bt}).apply("undefined"!==typeof w?w:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const j="@firebase/firestore",S="4.9.2";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let _="12.3.0";const C=new l.Vy("@firebase/firestore");function N(){return C.logLevel}function k(e){if(C.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(T);C.debug("Firestore (".concat(_,"): ").concat(e),...i)}}function I(e){if(C.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(T);C.error("Firestore (".concat(_,"): ").concat(e),...i)}}function A(e){if(C.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(T);C.warn("Firestore (".concat(_,"): ").concat(e),...i)}}function T(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,R(e,r,n)}function R(e,t,n){let r="FIRESTORE (".concat(_,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw I(r),new Error(r)}function D(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||R(t,i,r)}function O(e,t){return e}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class F{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class U{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(E.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){D(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new F;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new F,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new F)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(D("string"==typeof t.accessToken,31837,{l:t}),new U(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return D(null===e||"string"==typeof e,2055,{h:e}),new E(e)}}class B{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new B(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(E.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){D(void 0===this.o,3512);const n=e=>{null!=e.error&&k("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,k("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(D("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new G(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function K(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Q{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=K(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function J(e,t){return e<t?-1:e>t?1:0}function Y(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Z(n)===Z(i)?J(n,i):Z(n)?1:-1}return J(e.length,t.length)}const $=55296,X=57343;function Z(e){const t=e.charCodeAt(0);return t>=$&&t<=X}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ne.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return J(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),r=ne.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ne.extractNumericId(e).compare(ne.extractNumericId(t)):Y(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class re extends ne{construct(e,t,n){return new re(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new M(L.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new re(e)}static emptyPath(){return new re([])}}const ie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends ne{construct(e,t,n){return new se(e,t,n)}static isValidIdentifier(e){return ie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new se([te])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new M(L.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new M(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new M(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new M(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(re.fromString(e))}static fromName(e){return new ae(re.fromString(e).popFirst(5))}static empty(){return new ae(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new re(e.slice()))}}function oe(e,t,n){if(!n)throw new M(L.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function le(e){if(!ae.isDocumentKey(e))throw new M(L.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){if(ae.isDocumentKey(e))throw new M(L.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":P(12329,{type:typeof e})}function he(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new M(L.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function fe(e,t){if(!ue(e))throw new M(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new M(L.INVALID_ARGUMENT,n);return!0}const me=-62135596800,ge=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ve(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<me)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fe(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-me;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:pe("string",ve._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ve(0,0))}static max(){return new ye(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class we{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}we.UNKNOWN_ID=-1;function xe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(1e9===r?new ve(n+1,0):new ve(n,r));return new Se(i,ae.empty(),t)}function je(e){return new Se(e.readTime,e.key,be)}class Se{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Se(ye.min(),ae.empty(),be)}static max(){return new Se(ye.max(),ae.empty(),be)}}function Ee(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ae.comparator(e.documentKey,t.documentKey),0!==n?n:J(e.largestBatchId,t.largestBatchId))}const _e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ne(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==_e)throw e;k("LocalStore","Unexpectedly lost primary lease")}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(e){return ke.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,n)=>{t(e)})}static reject(e){return new ke((t,n)=>{n(e)})}static waitFor(e){return new ke((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ke.resolve(!1);for(const n of e)t=t.next(e=>e?ke.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ke((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ke((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ie(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ae(e){return"IndexedDbTransactionError"===e.name}class Te{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Te.ce=-1;const Pe=-1;function Re(e){return null==e}function De(e){return 0===e&&1/e==-1/0}function Oe(e){return"number"==typeof e&&Number.isInteger(e)&&!De(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Le="\x01";function Me(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ue(t)),t=Fe(e.get(n),t);return Ue(t)}function Fe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Le:n+="\x01\x11";break;default:n+=t}}return n}function Ue(e){return e+Le+"\x01"}const Ve="remoteDocuments",ze="owner",qe="mutationQueues",Be="mutations";const He="documentMutations",Ge="remoteDocumentsV14",We="remoteDocumentGlobal",Ke="targets",Qe="targetDocuments",Je="targetGlobal",Ye="collectionParents",$e="clientMetadata",Xe="bundles",Ze="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",rt="documentOverlays",it="globals",st=[qe,Be,He,Ve,Ke,ze,Je,Qe,$e,We,Ye,Xe,Ze],at=[qe,Be,He,Ge,Ke,ze,Je,Qe,$e,We,Ye,Xe,Ze,rt],ot=at,lt=[...ot,et,tt,nt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pt(this.root,e,this.comparator,!1)}getReverseIterator(){return new pt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pt(this.root,e,this.comparator,!0)}}class pt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=i?i:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof mt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new vt([])}unionWith(e){let t=new mt(se.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const wt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(e){if(D(!!e,39018),"string"==typeof e){let t=0;const n=wt.exec(e);if(D(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jt(e.seconds),nanos:jt(e.nanos)}}function jt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function St(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const Et="server_timestamp",_t="__type__",Ct="__previous_value__",Nt="__local_write_time__";function kt(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[_t])||void 0===t?void 0:t.stringValue)===Et}function It(e){const t=e.mapValue.fields[Ct];return kt(t)?It(t):t}function At(e){const t=xt(e.mapValue.fields[Nt].timestampValue);return new ve(t.seconds,t.nanos)}class Tt{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Pt="(default)";class Rt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new Rt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof Rt&&e.projectId===this.projectId&&e.database===this.database}}const Dt="__type__",Ot="__max__",Lt={mapValue:{fields:{__type__:{stringValue:Ot}}}},Mt="__vector__",Ft="value";function Ut(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kt(e)?4:nn(e)?9007199254740991:en(e)?10:11:P(28295,{value:e})}function Vt(e,t){if(e===t)return!0;const n=Ut(e);if(n!==Ut(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return At(e).isEqual(At(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xt(e.timestampValue),r=xt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return St(e.bytesValue).isEqual(St(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jt(e.geoPointValue.latitude)===jt(t.geoPointValue.latitude)&&jt(e.geoPointValue.longitude)===jt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jt(e.integerValue)===jt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=jt(e.doubleValue),r=jt(t.doubleValue);return n===r?De(n)===De(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],Vt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Vt(n[i],r[i])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function zt(e,t){return void 0!==(e.values||[]).find(e=>Vt(e,t))}function qt(e,t){if(e===t)return 0;const n=Ut(e),r=Ut(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=jt(e.integerValue||e.doubleValue),r=jt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bt(e.timestampValue,t.timestampValue);case 4:return Bt(At(e),At(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){const n=St(e),r=St(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=J(n[i],r[i]);if(0!==e)return e}return J(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=J(jt(e.latitude),jt(t.latitude));return 0!==n?n:J(jt(e.longitude),jt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ht(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ft])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Ft])||void 0===r?void 0:r.arrayValue,u=J((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ht(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Lt.mapValue&&t===Lt.mapValue)return 0;if(e===Lt.mapValue)return 1;if(t===Lt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Y(r[a],s[a]);if(0!==e)return e;const t=qt(n[r[a]],i[s[a]]);if(0!==t)return t}return J(r.length,s.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function Bt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return J(e,t);const n=xt(e),r=xt(t),i=J(n.seconds,r.seconds);return 0!==i?i:J(n.nanos,r.nanos)}function Ht(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=qt(n[i],r[i]);if(e)return e}return J(n.length,r.length)}function Gt(e){return Wt(e)}function Wt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return St(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ae.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Wt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Wt(e.fields[i]));return n+"}"}(e.mapValue):P(61005,{value:e})}function Kt(e){switch(Ut(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=It(e);return t?16+Kt(t):16;case 5:return 2*e.stringValue.length;case 6:return St(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Kt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ut(e.fields,(e,n)=>{t+=e.length+Kt(n)}),t}(e.mapValue);default:throw P(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jt(e){return!!e&&"integerValue"in e}function Yt(e){return!!e&&"arrayValue"in e}function $t(e){return!!e&&"nullValue"in e}function Xt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zt(e){return!!e&&"mapValue"in e}function en(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Dt])||void 0===t?void 0:t.stringValue)===Mt}function tn(e){if(e.geoPointValue)return{geoPointValue:(0,s.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,s.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tn(e.arrayValue.values[n]);return t}return(0,s.A)({},e)}function nn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ot}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tn(t)}setAll(e){let t=se.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=tn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ut(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new rn(tn(this.value))}}function sn(e){const t=[];return ut(e.fields,(e,n)=>{const r=new se([e]);if(Zt(n)){const e=sn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new vt(t)}class an{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new an(e,0,ye.min(),ye.min(),ye.min(),rn.empty(),0)}static newFoundDocument(e,t,n,r){return new an(e,1,t,ye.min(),n,r,0)}static newNoDocument(e,t){return new an(e,2,t,ye.min(),ye.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,ye.min(),ye.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class on{constructor(e,t){this.position=e,this.inclusive=t}}function ln(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(a.referenceValue),n.key):qt(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function cn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vt(e.position[n],t.position[n]))return!1;return!0}class un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hn{}class pn extends hn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xn(e,t,n):"array-contains"===t?new _n(e,n):"in"===t?new Cn(e,n):"not-in"===t?new Nn(e,n):"array-contains-any"===t?new kn(e,n):new pn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new jn(e,n):new Sn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(qt(t,this.value)):null!==t&&Ut(this.value)===Ut(t)&&this.matchesComparison(qt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends hn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fn(e,t)}matches(e){return mn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mn(e){return"and"===e.op}function gn(e){return vn(e)&&mn(e)}function vn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function yn(e){if(e instanceof pn)return e.field.canonicalString()+e.op.toString()+Gt(e.value);if(gn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bn(e,t){return e instanceof pn?function(e,t){return t instanceof pn&&e.op===t.op&&e.field.isEqual(t.field)&&Vt(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void P(19439)}function wn(e){return e instanceof pn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gt(e.value))}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(wn).join(" ,")+"}"}(e):"Filter"}class xn extends pn{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class jn extends pn{constructor(e,t){super(e,"in",t),this.keys=En("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sn extends pn{constructor(e,t){super(e,"not-in",t),this.keys=En("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function En(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class _n extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yt(t)&&zt(t.arrayValue,this.value)}}class Cn extends pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zt(this.value.arrayValue,t)}}class Nn extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!zt(this.value.arrayValue,t)}}class kn extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zt(this.value.arrayValue,e))}}class In{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function An(e){return new In(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Tn(e){const t=O(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Re(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Gt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Gt(e)).join(",")),t.Te=e}return t.Te}function Pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cn(e.startAt,t.startAt)&&cn(e.endAt,t.endAt)}function Rn(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function On(e,t,n,r,i,s,a,o){return new Dn(e,t,n,r,i,s,a,o)}function Ln(e){return new Dn(e)}function Mn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function Un(e){const t=O(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new mt(se.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new un(r,n))}),e.has(se.keyField().canonicalString())||t.Ie.push(new un(se.keyField(),n))}return t.Ie}function Vn(e){const t=O(e);return t.Ee||(t.Ee=zn(t,Un(e))),t.Ee}function zn(e,t){if("F"===e.limitType)return An(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new un(e.field,t)});const n=e.endAt?new on(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new on(e.startAt.position,e.startAt.inclusive):null;return An(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qn(e,t){const n=e.filters.concat([t]);return new Dn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bn(e,t,n){return new Dn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hn(e,t){return Pn(Vn(e),Vn(t))&&e.limitType===t.limitType}function Gn(e){return"".concat(Tn(Vn(e)),"|lt:").concat(e.limitType)}function Wn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>wn(e)).join(", "),"]")),Re(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Gt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Gt(e)).join(",")),"Target(".concat(t,")")}(Vn(e)),"; limitType=").concat(e.limitType,")")}function Kn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Un(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ln(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Un(e),t))&&!(e.endAt&&!function(e,t,n){const r=ln(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Un(e),t))}(e,t)}function Qn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jn(e){return(t,n)=>{let r=!1;for(const i of Un(e)){const e=Yn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Yn(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qt(r,i):P(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P(19790,{direction:e.dir})}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return dt(this.inner)}size(){return this.innerSize}}const Xn=new ht(ae.comparator);function Zn(){return Xn}const er=new ht(ae.comparator);function tr(){let e=er;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function nr(e){let t=er;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function rr(){return sr()}function ir(){return sr()}function sr(){return new $n(e=>e.toString(),(e,t)=>e.isEqual(t))}const ar=new ht(ae.comparator),or=new mt(ae.comparator);function lr(){let e=or;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cr=new mt(J);function ur(){return cr}function dr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:De(t)?"-0":t}}function hr(e){return{integerValue:""+e}}function pr(e,t){return Oe(t)?hr(t):dr(e,t)}class fr{constructor(){this._=void 0}}function mr(e,t,n){return e instanceof yr?function(e,t){const n={fields:{[_t]:{stringValue:Et},[Nt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&kt(t)&&(t=It(t)),t&&(n.fields[Ct]=t),{mapValue:n}}(n,t):e instanceof br?wr(e,t):e instanceof xr?jr(e,t):function(e,t){const n=vr(e,t),r=Er(n)+Er(e.Ae);return Jt(n)&&Jt(e.Ae)?hr(r):dr(e.serializer,r)}(e,t)}function gr(e,t,n){return e instanceof br?wr(e,t):e instanceof xr?jr(e,t):n}function vr(e,t){return e instanceof Sr?function(e){return Jt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yr extends fr{}class br extends fr{constructor(e){super(),this.elements=e}}function wr(e,t){const n=_r(t);for(const r of e.elements)n.some(e=>Vt(e,r))||n.push(r);return{arrayValue:{values:n}}}class xr extends fr{constructor(e){super(),this.elements=e}}function jr(e,t){let n=_r(t);for(const r of e.elements)n=n.filter(e=>!Vt(e,r));return{arrayValue:{values:n}}}class Sr extends fr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Er(e){return jt(e.integerValue||e.doubleValue)}function _r(e){return Yt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cr{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ir{}function Ar(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vr(e.key,Nr.none()):new Or(e.key,e.data,Nr.none());{const n=e.data,r=rn.empty();let i=new mt(se.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lr(e.key,r,new vt(i.toArray()),Nr.none())}}function Tr(e,t,n){e instanceof Or?function(e,t,n){const r=e.value.clone(),i=Fr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!kr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Fr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pr(e,t,n,r){return e instanceof Or?function(e,t,n,r){if(!kr(e.precondition,t))return n;const i=e.value.clone(),s=Ur(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lr?function(e,t,n,r){if(!kr(e.precondition,t))return n;const i=Ur(e.fieldTransforms,r,t),s=t.data;return s.setAll(Mr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return kr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Rr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vr(r.transform,e||null);null!=i&&(null===n&&(n=rn.empty()),n.set(r.field,i))}return n||null}function Dr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof br&&t instanceof br||e instanceof xr&&t instanceof xr?ee(e.elements,t.elements,Vt):e instanceof Sr&&t instanceof Sr?Vt(e.Ae,t.Ae):e instanceof yr&&t instanceof yr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Or extends Ir{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lr extends Ir{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Fr(e,t,n){const r=new Map;D(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,gr(a,o,n[i]))}return r}function Ur(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,mr(e,s,t))}return r}class Vr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zr extends Ir{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Tr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ir();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Ar(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lr())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Dr(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Dr(e,t))}}class Br{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){D(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ar;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Br(e,t,n,r)}}class Hr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Gr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Wr,Kr;function Qr(e){switch(e){case L.OK:return P(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function Jr(e){if(void 0===e)return I("GRPC error has no .code"),L.UNKNOWN;switch(e){case Wr.OK:return L.OK;case Wr.CANCELLED:return L.CANCELLED;case Wr.UNKNOWN:return L.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return L.INTERNAL;case Wr.UNAVAILABLE:return L.UNAVAILABLE;case Wr.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Wr.NOT_FOUND:return L.NOT_FOUND;case Wr.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Wr.ABORTED:return L.ABORTED;case Wr.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Wr.DATA_LOSS:return L.DATA_LOSS;default:return P(39323,{code:e})}}(Kr=Wr||(Wr={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";let Yr=null;function $r(){return new TextEncoder}const Xr=new r([4294967295,4294967295],0);function Zr(e){const t=$r().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ei(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([s,a],0)]}class ti{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ni("Invalid padding: ".concat(t));if(n<0)throw new ni("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ni("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ni("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(Xr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Zr(e),[n,r]=ei(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ti(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Zr(e),[n,r]=ei(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ri{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ii.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ri(ye.min(),r,new ht(J),Zn(),lr())}}class ii{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ii(n,t,lr(),lr(),lr())}}class si{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ai{constructor(e,t){this.targetId=e,this.Ce=t}}class oi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class li{constructor(){this.ve=0,this.Fe=di(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lr(),t=lr(),n=lr();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}}),new ii(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=di()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,D(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ci{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zn(),this.Je=ui(),this.He=ui(),this.Ye=new ht(J)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Rn(s))if(0===n){const e=new ae(s.path);this.et(t,e,an.newNoDocument(e,ye.min()))}else D(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Yr)||void 0===i||i.lt(function(e,t,n,r,i){var s,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=St(n).toUint8Array()}catch(e){if(e instanceof yt)return A("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ti(s,r,i)}catch(e){return A(e instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Rn(i.target)){const t=new ae(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,an.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=lr();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ri(e,t,this.Ye,this.je,n);return this.je=Zn(),this.Je=ui(),this.He=ui(),this.Ye=new ht(J),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new li,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(J),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(J),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||k("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new li),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ui(){return new ht(ae.comparator)}function di(){return new ht(ae.comparator)}const hi={asc:"ASCENDING",desc:"DESCENDING"},pi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fi={and:"AND",or:"OR"};class mi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gi(e,t){return e.useProto3Json||Re(t)?t:{value:t}}function vi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bi(e,t){return vi(e,t.toTimestamp())}function wi(e){return D(!!e,49232),ye.fromTimestamp(function(e){const t=xt(e);return new ve(t.seconds,t.nanos)}(e))}function xi(e,t){return ji(e,t).canonicalString()}function ji(e,t){const n=function(e){return new re(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Si(e){const t=re.fromString(e);return D(Bi(t),10190,{key:t.toString()}),t}function Ei(e,t){return xi(e.databaseId,t.path)}function _i(e,t){const n=Si(t);if(n.get(1)!==e.databaseId.projectId)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(Ii(n))}function Ci(e,t){return xi(e.databaseId,t)}function Ni(e){const t=Si(e);return 4===t.length?re.emptyPath():Ii(t)}function ki(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ii(e){return D(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ai(e,t,n){return{name:Ei(e,t),fields:n.value.mapValue.fields}}function Ti(e,t){let n;if(t instanceof Or)n={update:Ai(e,t.key,t.value)};else if(t instanceof Vr)n={delete:Ei(e,t.key)};else if(t instanceof Lr)n={update:Ai(e,t.key,t.data),updateMask:qi(t.fieldMask)};else{if(!(t instanceof zr))return P(16599,{Vt:t.type});n={verify:Ei(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof br)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sr)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P(27497)}(e,t.precondition)),n}function Pi(e,t){return{documents:[Ci(e,t.path)]}}function Ri(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ci(e,i);const s=function(e){if(0!==e.length)return zi(fn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ui(e.field),direction:Li(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=gi(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Di(e){let t=Ni(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){D(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Oi(e);return t instanceof fn&&gn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new un(Vi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Re(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new on(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new on(n,t)}(n.endAt)),On(t,i,a,s,o,"F",l,c)}function Oi(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vi(e.unaryFilter.field);return pn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vi(e.unaryFilter.field);return pn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vi(e.unaryFilter.field);return pn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vi(e.unaryFilter.field);return pn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P(61313);default:return P(60726)}}(e):void 0!==e.fieldFilter?function(e){return pn.create(Vi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Oi(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P(1026)}}(e.compositeFilter.op))}(e):P(30097,{filter:e})}function Li(e){return hi[e]}function Mi(e){return pi[e]}function Fi(e){return fi[e]}function Ui(e){return{fieldPath:e.canonicalString()}}function Vi(e){return se.fromServerFormat(e.fieldPath)}function zi(e){return e instanceof pn?function(e){if("=="===e.op){if(Xt(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NAN"}};if($t(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xt(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NOT_NAN"}};if($t(e.value))return{unaryFilter:{field:Ui(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(e.field),op:Mi(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>zi(e));return 1===t.length?t[0]:{compositeFilter:{op:Fi(e.op),filters:t}}}(e):P(54877,{filter:e})}function qi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gi{constructor(e){this.yt=e}}function Wi(e){const t=Di({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bn(t,t.limit,"L"):t}class Ki{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(jt(e.integerValue));else if("doubleValue"in e){const n=jt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),De(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=xt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(St(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?nn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):en(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Ft,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(jt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ki.Kt=new Ki;class Qi{constructor(){this.Cn=new Ji}addToCollectionParentIndex(e,t){return this.Cn.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(Se.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(Se.min())}updateCollectionGroup(e,t,n){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class Ji{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mt(re.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mt(re.comparator)).toArray()}}new Uint8Array(0);const Yi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$i=41943040;class Xi{static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi($i,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class Zi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zi(0)}static cr(){return new Zi(-1)}}const es="LruGarbageCollector",ts=1048576;function ns(e,t){let[n,r]=e,[i,s]=t;const a=J(n,i);return 0===a?J(r,s):a}class rs{constructor(e){this.Ir=e,this.buffer=new mt(ns),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ns(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class is{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){k(es,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ae(e)?k(es,"Ignoring IndexedDB error during garbage collection: ",e):await Ne(e)}await this.Vr(3e5)})}}class ss{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(Te.ce);const n=new rs(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(Yi)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Yi):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),N()<=l.$b.DEBUG&&k("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),ke.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function as(e,t){return new ss(e,t)}class os{constructor(){this.changes=new $n(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ke.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ls{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cs{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Pr(n.mutation,e,vt.empty(),ve.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,lr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lr();const r=rr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=tr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=rr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,lr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Zn();const s=sr(),a=sr();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Lr)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Pr(a.mutation,t,a.mutation.getFieldMask(),ve.now())):s.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ls(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=sr();let r=new ht((e,t)=>e-t),i=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||vt.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||lr()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=ir();l.forEach(e=>{if(!i.has(e)){const r=Ar(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ke.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ke.resolve(rr());let a=be,o=i;return s.next(t=>ke.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ke.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,lr())).next(e=>({batchId:a,changes:nr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(e=>{let t=tr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=tr();return this.indexManager.getCollectionParents(e,i).next(a=>ke.forEach(a,a=>{const o=function(e,t){return new Dn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,an.newInvalidDocument(r)))});let n=tr();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Pr(s.mutation,r,vt.empty(),ve.now()),Kn(t,r)&&(n=n.insert(e,r))}),n})}}class us{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ke.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:wi(e.createTime)}}(t)),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Wi(e.bundledQuery),readTime:wi(e.readTime)}}(t)),ke.resolve()}}class ds{constructor(){this.overlays=new ht(ae.comparator),this.qr=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rr();return ke.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ke.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ke.resolve()}getOverlaysForCollection(e,t,n){const r=rr(),i=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ke.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ht((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=rr(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=rr(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ke.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Hr(t,n));let i=this.qr.get(t);void 0===i&&(i=lr(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class hs{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ke.resolve()}}class ps{constructor(){this.Qr=new mt(fs.$r),this.Ur=new mt(fs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new fs(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new fs(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ae(new re([])),n=new fs(t,e),r=new fs(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new re([])),n=new fs(t,e),r=new fs(t,e+1);let i=lr();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new fs(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fs{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||J(e.Yr,t.Yr)}static Kr(e,t){return J(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class ms{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(fs.$r)}checkEmpty(e){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qr(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new fs(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ke.resolve(s)}lookupMutationBatch(e,t){return ke.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?Pe:this.tr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fs(t,0),r=new fs(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(J);return t.forEach(e=>{const t=new fs(e,0),r=new fs(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ke.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const s=new fs(new ae(i),0);let a=new mt(J);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),ke.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){D(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ke.forEach(t.mutations,r=>{const i=new fs(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new fs(t,0),r=this.Zr.firstAfterOrEqual(n);return ke.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gs{constructor(e){this.ri=e,this.docs=new ht(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ke.resolve(n?n.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let n=Zn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():an.newInvalidDocument(e))}),ke.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zn();const s=t.path,a=new ae(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ee(je(a),n)<=0||(r.has(a.key)||Kn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ke.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return ke.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vs(this)}getSize(e){return ke.resolve(this.size)}}class vs extends os{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ke.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ys{constructor(e){this.persistence=e,this.si=new $n(e=>Tn(e),Pn),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new ps,this.targetCount=0,this.ai=Zi.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ke.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zi(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Pr(t),ke.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ke.waitFor(i).next(()=>r)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ke.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ke.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ke.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ke.resolve(n)}containsKey(e,t){return ke.resolve(this._i.containsKey(t))}}class bs{constructor(e,t){this.ui={},this.overlays={},this.ci=new Te(0),this.li=!1,this.li=!0,this.hi=new hs,this.referenceDelegate=e(this),this.Pi=new ys(this),this.indexManager=new Qi,this.remoteDocumentCache=function(e){return new gs(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Gi(t),this.Ii=new us(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ds,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new ms(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){k("MemoryPersistence","Starting transaction:",e);const r=new ws(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ke.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class ws extends Ce{constructor(e){super(),this.currentSequenceNumber=e}}class xs{constructor(e){this.persistence=e,this.Ri=new ps,this.Vi=null}static mi(e){return new xs(e)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ke.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.fi,n=>{const r=ae.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ye.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ke.or([()=>ke.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class js{constructor(e,t){this.persistence=e,this.pi=new $n(e=>Me(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=as(this,t)}static mi(e,t){return new js(e,t)}Ei(){}di(e){return ke.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return ke.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?ke.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ye.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ke.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ke.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ke.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ke.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kt(e.data.value)),t}br(e,t,n){return ke.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return ke.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ss{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=lr(),r=lr();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ss(e,t.fromCache,n,r)}}class Es{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _s{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Ie((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Es;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(N()<=l.$b.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Wn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ke.resolve()):(N()<=l.$b.DEBUG&&k("QueryEngine","Query:",Wn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(N()<=l.$b.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Wn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):ke.resolve())}ys(e,t){if(Mn(t))return ke.resolve(null);let n=Vn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Bn(t,null,"F"),n=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=lr(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Bn(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Mn(t)||r.isEqual(ye.min())?ke.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?ke.resolve(null):(N()<=l.$b.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wn(t)),this.vs(e,s,t,xe(r,be)).next(e=>e))})}Ds(e,t){let n=new mt(Jn(e));return t.forEach((t,r)=>{Kn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return N()<=l.$b.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Wn(t)),this.ps.getDocumentsMatchingQuery(e,t,Se.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Cs="LocalStore",Ns=3e8;class ks{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ht(J),this.xs=new $n(e=>Tn(e),Pn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cs(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Is(e,t,n,r){return new ks(e,t,n,r)}async function As(e,t){const n=O(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=lr();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ts(e){const t=O(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Ps(e,t,n){let r=lr(),i=lr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Zn();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ye.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):k(Cs,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Rs(e,t){const n=O(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ds(e,t){const n=O(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,ke.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Hi(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Os(e,t,n){const r=O(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ae(e))throw e;k(Cs,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ls(e,t,n){const r=O(e);let i=ye.min(),s=lr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=O(e),i=r.xs.get(n);return void 0!==i?ke.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Vn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ye.min(),n?s:lr())).next(e=>(Ms(r,Qn(t),e),{documents:e,Qs:s})))}function Ms(e,t,n){let r=e.Os.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Fs{constructor(){this.activeTargetIds=ur()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Us{constructor(){this.Mo=new Fs,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fs,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vs{Oo(e){}shutdown(){}}const zs="ConnectivityMonitor";class qs{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){k(zs,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){k(zs,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bs=null;function Hs(){return null===Bs?Bs=268435456+Math.round(2147483648*Math.random()):Bs++,"0x"+Bs.toString(16)}const Gs="RestConnection",Ws={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ks{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Pt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Hs(),a=this.zo(e,t.toUriEncodedString());k(Gs,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,o,n,u).then(t=>(k(Gs,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw A(Gs,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Ws[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Qs{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Js="WebChannelConnection";class Ys extends Ks{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Hs();return new Promise((i,a)=>{const o=new h;o.setWithCredentials(!0),o.listenOnce(f.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const n=o.getResponseJson();k(Js,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case m.TIMEOUT:k(Js,"RPC '".concat(e,"' ").concat(s," timed out")),a(new M(L.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const r=o.getStatus();if(k(Js,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(n.status);a(new M(e,n.message))}else a(new M(L.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new M(L.UNAVAILABLE,"Connection failed."));break;default:P(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{k(Js,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);k(Js,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Hs(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=b(),a=y(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");k(Js,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new Qs({Yo:t=>{h?k(Js,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(k(Js,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),k(Js,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,p.EventType.OPEN,()=>{h||(k(Js,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,p.EventType.CLOSE,()=>{h||(h=!0,k(Js,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,p.EventType.ERROR,t=>{h||(h=!0,A(Js,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new M(L.UNAVAILABLE,"The operation could not be completed")))}),m(u,p.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];D(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){k(Js,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Wr[e];if(void 0!==t)return Jr(t)}(t),i=a.message;void 0===n&&(n=L.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new M(n,i)),u.close()}else k(Js,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),m(a,v.STAT_EVENT,t=>{t.stat===g.PROXY?k(Js,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&k(Js,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function $s(){return"undefined"!=typeof document?document:null}function Xs(e){return new mi(e,!0)}class Zs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&k("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ea="PersistentStream";class ta{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zs(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(I(t.toString()),I("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new M(L.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return k(ea,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(k(ea,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class na extends ta{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(D(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(D(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?L.UNKNOWN:Jr(e.code);return new M(t,e.message||"")}(a);n=new oi(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_i(e,r.document.name),s=wi(r.document.updateTime),a=r.document.createTime?wi(r.document.createTime):ye.min(),o=new rn({mapValue:{fields:r.document.fields}}),l=an.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new si(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_i(e,r.document),s=r.readTime?wi(r.readTime):ye.min(),a=an.newNoDocument(i,s),o=r.removedTargetIds||[];n=new si([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_i(e,r.document),s=r.removedTargetIds||[];n=new si([],s,i,null)}else{if(!("filter"in t))return P(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Gr(r,i),a=e.targetId;n=new ai(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?wi(t.readTime):ye.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ki(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rn(r)?{documents:Pi(e,r)}:{query:Ri(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yi(e,t.resumeToken);const r=gi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=vi(e,t.snapshotVersion.toTimestamp());const r=gi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ki(this.serializer),t.removeTarget=e,this.q_(t)}}class ra extends ta{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return D(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,D(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){D(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(D(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?wi(e.updateTime):wi(t);return n.isEqual(ye.min())&&(n=wi(t)),new Cr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=wi(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ki(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ti(this.serializer,e))};this.q_(t)}}class ia{}class sa extends ia{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,ji(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(L.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,ji(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(L.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(I(t),this.aa=!1):k("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oa="RemoteStore";class la{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{va(this)&&(k(oa,"Restarting streams for network reachability change."),await async function(e){const t=O(e);t.Ea.add(4),await ua(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ca(t)}(this))})}),this.Ra=new aa(n,r)}}async function ca(e){if(va(e))for(const t of e.da)await t(!0)}async function ua(e){for(const t of e.da)await t(!1)}function da(e,t){const n=O(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ga(n)?ma(n):La(n).O_()&&pa(n,t))}function ha(e,t){const n=O(e),r=La(n);n.Ia.delete(t),r.O_()&&fa(n,t),0===n.Ia.size&&(r.O_()?r.L_():va(n)&&n.Ra.set("Unknown"))}function pa(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}La(e).Y_(t)}function fa(e,t){e.Va.Ue(t),La(e).Z_(t)}function ma(e){e.Va=new ci({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),La(e).start(),e.Ra.ua()}function ga(e){return va(e)&&!La(e).x_()&&e.Ia.size>0}function va(e){return 0===O(e).Ea.size}function ya(e){e.Va=void 0}async function ba(e){e.Ra.set("Online")}async function wa(e){e.Ia.forEach((t,n)=>{pa(e,t)})}async function xa(e,t){ya(e),ga(e)?(e.Ra.ha(t),ma(e)):e.Ra.set("Unknown")}async function ja(e,t,n){if(e.Ra.set("Online"),t instanceof oi&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){k(oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sa(e,n)}else if(t instanceof si?e.Va.Ze(t):t instanceof ai?e.Va.st(t):e.Va.tt(t),!n.isEqual(ye.min()))try{const t=await Ts(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),fa(e,t);const i=new Hi(r.target,t,n,r.sequenceNumber);pa(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){k(oa,"Failed to raise snapshot:",t),await Sa(e,t)}}async function Sa(e,t,n){if(!Ae(t))throw t;e.Ea.add(1),await ua(e),e.Ra.set("Offline"),n||(n=()=>Ts(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{k(oa,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ca(e)})}function Ea(e,t){return t().catch(n=>Sa(e,n,t))}async function _a(e){const t=O(e),n=Ma(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Ca(t);)try{const e=await Rs(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Na(t,e)}catch(e){await Sa(t,e)}ka(t)&&Ia(t)}function Ca(e){return va(e)&&e.Ta.length<10}function Na(e,t){e.Ta.push(t);const n=Ma(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ka(e){return va(e)&&!Ma(e).x_()&&e.Ta.length>0}function Ia(e){Ma(e).start()}async function Aa(e){Ma(e).ra()}async function Ta(e){const t=Ma(e);for(const n of e.Ta)t.ea(n.mutations)}async function Pa(e,t,n){const r=e.Ta.shift(),i=Br.from(r,t,n);await Ea(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await _a(e)}async function Ra(e,t){t&&Ma(e).X_&&await async function(e,t){if(function(e){return Qr(e)&&e!==L.ABORTED}(t.code)){const n=e.Ta.shift();Ma(e).B_(),await Ea(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await _a(e)}}(e,t),ka(e)&&Ia(e)}async function Da(e,t){const n=O(e);n.asyncQueue.verifyOperationInProgress(),k(oa,"RemoteStore received new credentials");const r=va(n);n.Ea.add(3),await ua(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ca(n)}async function Oa(e,t){const n=O(e);t?(n.Ea.delete(2),await ca(n)):t||(n.Ea.add(2),await ua(n),n.Ra.set("Unknown"))}function La(e){return e.ma||(e.ma=function(e,t,n){const r=O(e);return r.sa(),new na(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ba.bind(null,e),t_:wa.bind(null,e),r_:xa.bind(null,e),H_:ja.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ga(e)?ma(e):e.Ra.set("Unknown")):(await e.ma.stop(),ya(e))})),e.ma}function Ma(e){return e.fa||(e.fa=function(e,t,n){const r=O(e);return r.sa(),new ra(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Aa.bind(null,e),r_:Ra.bind(null,e),ta:Ta.bind(null,e),na:Pa.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await _a(e)):(await e.fa.stop(),e.Ta.length>0&&(k(oa,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Fa{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Fa(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ua(e,t){if(I("AsyncQueue","".concat(t,": ").concat(e)),Ae(e))return new M(L.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Va{static emptySet(e){return new Va(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=tr(),this.sortedSet=new ht(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Va))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Va;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class za{constructor(){this.ga=new ht(ae.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class qa{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new qa(e,t,Va.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ba{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ha{constructor(){this.queries=Ga(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=O(e),r=n.queries;n.queries=Ga(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new M(L.ABORTED,"Firestore shutting down"))}}function Ga(){return new $n(e=>Gn(e),Hn)}async function Wa(e,t){const n=O(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Ba,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ua(e,"Initialization of query '".concat(Wn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Ya(n)}async function Ka(e,t){const n=O(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qa(e,t){const n=O(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Ya(n)}function Ja(e,t,n){const r=O(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Ya(e){e.Ca.forEach(e=>{e.next()})}var $a,Xa;(Xa=$a||($a={})).Ma="default",Xa.Cache="cache";class Za{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new qa(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$a.Cache}}class eo{constructor(e){this.key=e}}class to{constructor(e){this.key=e}}class no{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lr(),this.mutatedKeys=lr(),this.eu=Jn(e),this.tu=new Va(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new za,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Kn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.su(c,u)||(n.track({type:2,doc:u}),p=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(o||l)&&(a=!0)),p&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new qa(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new za,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lr(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new to(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new eo(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=lr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ro="SyncEngine";class io{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class so{constructor(e){this.key=e,this.hu=!1}}class ao{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new $n(e=>Gn(e),Hn),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ae.comparator),this.Au=new Map,this.Ru=new ps,this.Vu={},this.mu=new Map,this.fu=Zi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function oo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Io(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await co(r,t,n,!0),i}async function lo(e,t){const n=Io(e);await co(n,t,!0,!1)}async function co(e,t,n,r){const i=await Ds(e.localStore,Vn(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await uo(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&da(e.remoteStore,i),o}async function uo(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ls(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return So(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await Ls(e.localStore,t,!0),a=new no(t,s.Qs),o=a.ru(s.documents),l=ii.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);So(e,n,c.au);const u=new io(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ho(e,t,n){const r=O(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Hn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Os(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ha(r.remoteStore,i.targetId),xo(r,i.targetId)}).catch(Ne)):(xo(r,i.targetId),await Os(r.localStore,i.targetId,!0))}async function po(e,t){const n=O(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ha(n.remoteStore,r.targetId))}async function fo(e,t){const n=O(e);try{const e=await function(e,t){const n=O(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ns||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=Zn(),l=lr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ps(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(ye.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ke.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(D(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?D(r.hu,14607):e.removedDocuments.size>0&&(D(r.hu,42227),r.hu=!1))}),await Co(n,e,t)}catch(e){await Ne(e)}}function mo(e,t,n){const r=O(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=O(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Ya(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function go(e,t,n){const r=O(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new ht(ae.comparator);e=e.insert(s,an.newNoDocument(s,ye.min()));const n=lr().add(s),i=new ri(ye.min(),new Map,new ht(J),e,n);await fo(r,i),r.du=r.du.remove(s),r.Au.delete(t),_o(r)}else await Os(r.localStore,t,!1).then(()=>xo(r,t,n)).catch(Ne)}async function vo(e,t){const n=O(e),r=t.batch.batchId;try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=ke.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);D(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=lr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);wo(n,r,null),bo(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,e)}catch(e){await Ne(e)}}async function yo(e,t,n){const r=O(e);try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(D(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);wo(r,t,n),bo(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Co(r,e)}catch(n){await Ne(n)}}function bo(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function wo(e,t,n){const r=O(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||jo(e,t)})}function jo(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ha(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),_o(e))}function So(e,t,n){for(const r of n)r instanceof eo?(e.Ru.addReference(r.key,t),Eo(e,r)):r instanceof to?(k(ro,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||jo(e,r.key)):P(19791,{wu:r})}function Eo(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(k(ro,"New document in limbo: "+n),e.Eu.add(r),_o(e))}function _o(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ae(re.fromString(t)),r=e.fu.next();e.Au.set(r,new so(n)),e.du=e.du.insert(n,r),da(e.remoteStore,new Hi(Vn(Ln(n.path)),r,"TargetPurposeLimboResolution",Te.ce))}}async function Co(e,t,n){const r=O(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ss.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=O(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ke.forEach(t,t=>ke.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ke.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ae(e))throw e;k(Cs,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function No(e,t){const n=O(e);if(!n.currentUser.isEqual(t)){k(ro,"User change. New user:",t.toKey());const e=await As(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new M(L.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Co(n,e.Ls)}}function ko(e,t){const n=O(e),r=n.Au.get(t);if(r&&r.hu)return lr().add(r.key);{let e=lr();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Io(e){const t=O(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ko.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=go.bind(null,t),t.Pu.H_=Qa.bind(null,t.eventManager),t.Pu.yu=Ja.bind(null,t.eventManager),t}function Ao(e){const t=O(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yo.bind(null,t),t}class To{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xs(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Is(this.persistence,new _s,e.initialUser,this.serializer)}Cu(e){return new bs(xs.mi,this.serializer)}Du(e){return new Us}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}To.provider={build:()=>new To};class Po extends To{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){D(this.persistence.referenceDelegate instanceof js,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new is(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new bs(e=>js.mi(e,t),this.serializer)}}class Ro{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>mo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=No.bind(null,this.syncEngine),await Oa(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ha}createDatastore(e){const t=Xs(e.databaseInfo.databaseId),n=function(e){return new Ys(e)}(e.databaseInfo);return function(e,t,n,r){return new sa(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new la(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>mo(this.syncEngine,e,0),qs.v()?new qs:new Vs)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new ao(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=O(e);k(oa,"RemoteStore shutting down."),t.Ea.add(5),await ua(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ro.provider={build:()=>new Ro};class Do{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):I("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Oo="FirestoreClient";class Lo{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{k(Oo,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(k(Oo,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ua(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mo(e,t){e.asyncQueue.verifyOperationInProgress(),k(Oo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await As(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Fo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Uo(e);k(Oo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Da(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Da(t.remoteStore,n)),e._onlineComponents=t}async function Uo(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){k(Oo,"Using user provided OfflineComponentProvider");try{await Mo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;A("Error using user provided cache. Falling back to memory cache: "+n),await Mo(e,new To)}}else k(Oo,"Using default OfflineComponentProvider"),await Mo(e,new Po(void 0));return e._offlineComponents}async function Vo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(k(Oo,"Using user provided OnlineComponentProvider"),await Fo(e,e._uninitializedComponentsProvider._online)):(k(Oo,"Using default OnlineComponentProvider"),await Fo(e,new Ro))),e._onlineComponents}function zo(e){return Vo(e).then(e=>e.syncEngine)}async function qo(e){const t=await Vo(e),n=t.eventManager;return n.onListen=oo.bind(null,t.syncEngine),n.onUnlisten=ho.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=lo.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=po.bind(null,t.syncEngine),n}function Bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Do({next:o=>{s.Nu(),t.enqueueAndForget(()=>Ka(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new M(L.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new M(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Za(Ln(n.path),s,{includeMetadataChanges:!0,qa:!0});return Wa(e,a)}(await qo(e),e.asyncQueue,t,n,r)),r.promise}function Ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Do({next:n=>{s.Nu(),t.enqueueAndForget(()=>Ka(e,a)),n.fromCache&&"server"===r.source?i.reject(new M(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Za(n,s,{includeMetadataChanges:!0,qa:!0});return Wa(e,a)}(await qo(e),e.asyncQueue,t,n,r)),r.promise}function Go(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wo=new Map,Ko="firestore.googleapis.com",Qo=!0;class Jo{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new M(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ko,this.ssl=Qo}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Qo;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=$i;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ts)throw new M(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new M(L.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Go(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new M(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new M(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new M(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jo(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new M(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wo.get(e);t&&(k("ComponentProvider","Removing Datastore"),Wo.delete(e),t.terminate())}(this),Promise.resolve()}}class $o{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class Xo{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xo(this.firestore,e,this._key)}toJSON(){return{type:Xo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fe(t,Xo._jsonSchema))return new Xo(e,n||null,new ae(re.fromString(t.referencePath)))}}Xo._jsonSchemaVersion="firestore/documentReference/1.0",Xo._jsonSchema={type:pe("string",Xo._jsonSchemaVersion),referencePath:pe("string")};class Zo extends $o{constructor(e,t,n){super(e,t,Ln(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xo(this.firestore,null,new ae(e))}withConverter(e){return new Zo(this.firestore,e,this._path)}}function el(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),oe("collection","path",t),e instanceof Yo){const n=re.fromString(t,...r);return ce(n),new Zo(e,null,n)}{if(!(e instanceof Xo||e instanceof Zo))throw new M(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return ce(n),new Zo(e.firestore,null,n)}}function tl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=Q.newId()),oe("doc","path",t),e instanceof Yo){const n=re.fromString(t,...r);return le(n),new Xo(e,null,new ae(n))}{if(!(e instanceof Xo||e instanceof Zo))throw new M(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return le(n),new Xo(e.firestore,e instanceof Zo?e.converter:null,new ae(n))}}const nl="AsyncQueue";class rl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zs(this,"async_queue_retry"),this._c=()=>{const e=$s();e&&k(nl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=$s();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$s();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new F;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ae(e))throw e;k(nl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,I("INTERNAL UNHANDLED ERROR: ",il(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Fa.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:il(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function il(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function sl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class al extends Yo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new rl,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rl(e),this._firestoreClient=void 0,await e}}}function ol(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||Pt,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=he(e,Yo);const i=(0,c.zJ)(t),a=e._getSettings(),o=(0,s.A)((0,s.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==Ko&&a.host!==l&&A("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,s.A)((0,s.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,c.bD)(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{var d;t=(0,c.Fy)(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new M(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(i)}e._authCredentials=new z(new U(t,n))}}(i,...e)}return i}function ll(e){if(e._terminated)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||cl(e),e._firestoreClient}function cl(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Tt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Go(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Lo(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(bt.fromBase64String(e))}catch(e){throw new M(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ul(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ul._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fe(e,ul._jsonSchema))return ul.fromBase64String(e.bytes)}}ul._jsonSchemaVersion="firestore/bytes/1.0",ul._jsonSchema={type:pe("string",ul._jsonSchemaVersion),bytes:pe("string")};class dl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new M(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._methodName=e}}class pl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pl._jsonSchemaVersion}}static fromJSON(e){if(fe(e,pl._jsonSchema))return new pl(e.latitude,e.longitude)}}pl._jsonSchemaVersion="firestore/geoPoint/1.0",pl._jsonSchema={type:pe("string",pl._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class fl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fe(e,fl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new fl(e.vectorValues);throw new M(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fl._jsonSchemaVersion="firestore/vectorValue/1.0",fl._jsonSchema={type:pe("string",fl._jsonSchemaVersion),vectorValues:pe("object")};const ml=/^__.*__$/;class gl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Or(e,this.data,t,this.fieldTransforms)}}class vl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}class bl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bl((0,s.A)((0,s.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(yl(this.Ac)&&ml.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xs(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bl({Ac:e,methodName:t,Dc:n,path:se.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=Xs(e._databaseId);return new wl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jl(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Al("Data must be an object, but it was:",a,r);const o=kl(r,a);let l,c;if(s.merge)l=new vt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Tl(t,r,n);if(!a.contains(i))throw new M(L.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ol(e,i)||e.push(i)}l=new vt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new gl(new rn(o),l,c)}class Sl extends hl{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sl}}function El(e,t,n,r){const i=e.Cc(1,t,n);Al("Data must be an object, but it was:",i,r);const s=[],a=rn.empty();ut(r,(e,r)=>{const o=Rl(t,e,n);r=(0,c.Ku)(r);const l=i.yc(o);if(r instanceof Sl)s.push(o);else{const e=Nl(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new vt(s);return new vl(a,o,i.fieldTransforms)}function _l(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[Tl(t,r,n)],l=[i];if(s.length%2!=0)throw new M(L.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<s.length;c+=2)o.push(Tl(t,s[c])),l.push(s[c+1]);const u=[],d=rn.empty();for(let p=o.length-1;p>=0;--p)if(!Ol(u,o[p])){const e=o[p];let t=l[p];t=(0,c.Ku)(t);const n=a.yc(e);if(t instanceof Sl)u.push(e);else{const r=Nl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new vt(u);return new vl(d,h,a.fieldTransforms)}function Cl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Nl(n,e.Cc(r?4:3,t))}function Nl(e,t){if(Il(e=(0,c.Ku)(e)))return Al("Unsupported field value:",t,e),kl(e,t);if(e instanceof hl)return function(e,t){if(!yl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Nl(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ve.fromDate(e);return{timestampValue:vi(t.serializer,n)}}if(e instanceof ve){const n=new ve(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vi(t.serializer,n)}}if(e instanceof pl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ul)return{bytesValue:yi(t.serializer,e._byteString)};if(e instanceof Xo){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:xi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof fl)return function(e,t){return{mapValue:{fields:{[Dt]:{stringValue:Mt},[Ft]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return dr(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(de(e)))}(e,t)}function kl(e,t){const n={};return dt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,(e,r)=>{const i=Nl(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Il(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ve||e instanceof pl||e instanceof ul||e instanceof Xo||e instanceof hl||e instanceof fl)}function Al(e,t,n){if(!Il(n)||!ue(n)){const r=de(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Tl(e,t,n){if((t=(0,c.Ku)(t))instanceof dl)return t._internalPath;if("string"==typeof t)return Rl(e,t);throw Dl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Pl=new RegExp("[~\\*/\\[\\]]");function Rl(e,t,n){if(t.search(Pl)>=0)throw Dl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new dl(...t.split("."))._internalPath}catch(r){throw Dl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Dl(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new M(L.INVALID_ARGUMENT,o+e+l)}function Ol(e,t){return e.some(e=>e.isEqual(t))}class Ll{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ml(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ml extends Ll{data(){return super.data()}}function Fl(e,t){return"string"==typeof t?Rl(e,t):t instanceof dl?t._internalPath:t._delegate._internalPath}function Ul(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new M(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vl{}class zl extends Vl{}function ql(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Vl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Gl).length,n=e.filter(e=>e instanceof Bl).length;if(t>1||t>0&&n>0)throw new M(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Bl extends zl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Bl(e,t,n)}_apply(e){const t=this._parse(e);return Yl(e._query,t),new $o(e.firestore,e.converter,qn(e._query,t))}_parse(e){const t=xl(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new M(L.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Jl(a,s);const t=[];for(const n of a)t.push(Ql(r,e,n));o={arrayValue:{values:t}}}else o=Ql(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Jl(a,s),o=Cl(n,t,a,"in"===s||"not-in"===s);return pn.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Hl(e,t,n){const r=t,i=Fl("where",e);return Bl._create(i,r,n)}class Gl extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Yl(n,i),n=qn(n,i)}(e._query,t),new $o(e.firestore,e.converter,qn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wl extends zl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new M(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new M(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new un(t,n)}(e._query,this._field,this._direction);return new $o(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Dn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Kl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Fl("orderBy",e);return Wl._create(n,t)}function Ql(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(re.fromString(n));if(!ae.isDocumentKey(r))throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qt(e,new ae(r))}if(n instanceof Xo)return Qt(e,n._key);throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function Jl(e,t){if(!Array.isArray(e)||0===e.length)throw new M(L.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Yl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new M(L.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new M(L.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class $l{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ut(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(St(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ft].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>jt(e.doubleValue));return new fl(n)}convertGeoPoint(e){return new pl(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=It(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(At(e));default:return null}}convertTimestamp(e){const t=xt(e);return new ve(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=re.fromString(e);D(Bi(n),9688,{name:e});const r=new Rt(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||I("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Xl(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends Ll{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Fl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new M(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ec._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ec._jsonSchemaVersion="firestore/documentSnapshot/1.0",ec._jsonSchema={type:pe("string",ec._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class tc extends ec{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class nc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new tc(this._firestore,this._userDataWriter,n.key,n,new Zl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new M(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new tc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Zl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new tc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Zl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:rc(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new M(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P(61501,{type:e})}}function ic(e){e=he(e,Xo);const t=he(e.firestore,al);return Bo(ll(t),e._key).then(n=>pc(t,e,n))}nc._jsonSchemaVersion="firestore/querySnapshot/1.0",nc._jsonSchema={type:pe("string",nc._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class sc extends $l{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xo(this.firestore,null,t)}}function ac(e){e=he(e,$o);const t=he(e.firestore,al),n=ll(t),r=new sc(t);return Ul(e._query),Ho(n,e._query).then(n=>new nc(t,r,e,n))}function oc(e,t,n){e=he(e,Xo);const r=he(e.firestore,al),i=Xl(e.converter,t,n);return hc(r,[jl(xl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Nr.none())])}function lc(e,t,n){e=he(e,Xo);const r=he(e.firestore,al),i=xl(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=(0,c.Ku)(t))||t instanceof dl?_l(i,"updateDoc",e._key,t,n,o):El(i,"updateDoc",e._key,t),hc(r,[s.toMutation(e._key,Nr.exists(!0))])}function cc(e){return hc(he(e.firestore,al),[new Vr(e._key,Nr.none())])}function uc(e,t){const n=he(e.firestore,al),r=tl(e),i=Xl(e.converter,t);return hc(n,[jl(xl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}function dc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,c.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||sl(n[s])||(i=n[s++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(sl(n[s])){var o,l,u;const e=n[s];n[s]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let d,h,p;if(e instanceof Xo)h=he(e.firestore,al),p=Ln(e._key.path),d={next:t=>{n[s]&&n[s](pc(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=he(e,$o);h=he(t.firestore,al),p=t._query;const r=new sc(h);d={next:e=>{n[s]&&n[s](new nc(h,r,t,e))},error:n[s+1],complete:n[s+2]},Ul(e._query)}return function(e,t,n,r){const i=new Do(r),s=new Za(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Wa(await qo(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Ka(await qo(e),s))}}(ll(h),p,a,d)}function hc(e,t){return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ao(e);try{const e=await function(e,t){const n=O(e),r=ve.now(),i=t.reduce((e,t)=>e.add(t.key),lr());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Zn(),l=lr();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Rr(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Lr(e.key,t,sn(t.value.mapValue),Nr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:nr(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new ht(J)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Co(r,e.changes),await _a(r.remoteStore)}catch(e){const t=Ua(e,"Failed to persist write");n.reject(t)}}(await zo(e),t,n)),n.promise}(ll(e),t)}function pc(e,t,n){const r=n.docs.get(t._key),i=new sc(e);return new ec(e,i,t._key,r,new Zl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_=e}(a.MF),(0,a.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new al(new q(e.getProvider("auth-internal")),new W(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new M(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rt(e.options.projectId,t)}(a,r),a);return i=(0,s.A)({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(j,S,e),(0,a.KO)(j,S,"esm2020")}()},340:(e,t,n)=>{e.exports=n(761)},345:(e,t,n)=>{var r=n(950),i=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),j=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case j:return"Portal";case _:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Se=null,Ee=null;function _e(e){if(e=bi(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),je(e.stateNode,e.type,t))}}function Ce(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ne(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function ke(e,t){return e(t)}function Ie(){}var Ae=!1;function Te(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return ke(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ee)&&(Ie(),Ne())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,jt,St,Et,_t,Ct=!1,Nt=[],kt=null,It=null,At=null,Tt=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void _t(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Ct=!1,null!==kt&&Ft(kt)&&(kt=null),null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),Tt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&zt(kt,e),null!==It&&zt(It,e),null!==At&&zt(At,e),Tt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=w.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Wt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Lt(kt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tt.set(s,Lt(Tt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Jt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=xe(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(M({},pn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return En}var Cn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Cn),kn=sn(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Tn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Dn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Qn(e){Fr(e,0)}function Jn(e){if(K(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];Gn(t,Kn,e,xe(e)),Te(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function sr(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function _r(e){if(Sr[e])return Sr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Cr=_r("animationend"),Nr=_r("animationiteration"),kr=_r("animationstart"),Ir=_r("transitionend"),Ar=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Tr.length;Rr++){var Dr=Tr[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Nr,"onAnimationIteration"),Pr(kr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=s,i=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Nr:case kr:l=vn;break;case Ir:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Pe(f,h))&&u.push(Gr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:wi(l),p=null==c?o:wi(c),(o=new u(m,f+"leave",l,n,i)).target=d,o.relatedTarget=p,m=null,yi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Hn(o))if($n)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,qn=!0)),0<(v=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,s))&&a.unshift(Gr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Gr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[pi]||null}var ji=[],Si=-1;function Ei(e){return{current:e}}function _i(e){0>Si||(e.current=ji[Si],ji[Si]=null,Si--)}function Ci(e,t){Si++,ji[Si]=e.current,e.current=t}var Ni={},ki=Ei(Ni),Ii=Ei(!1),Ai=Ni;function Ti(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){_i(Ii),_i(ki)}function Di(e,t,n){if(ki.current!==Ni)throw Error(s(168));Ci(ki,t),Ci(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ai=ki.current,Ci(ki,e),Ci(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,_i(Ii),_i(ki),Ci(ki,e)):_i(Ii),Ci(Ii,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,qi),i}finally{bt=t,Vi=!1}}return null}var Bi=[],Hi=0,Gi=null,Wi=0,Ki=[],Qi=0,Ji=null,Yi=1,$i="";function Xi(e,t){Bi[Hi++]=Wi,Bi[Hi++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Ki[Qi++]=Yi,Ki[Qi++]=$i,Ki[Qi++]=Ji,Ji=e;var r=Yi;e=$i;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,$i=s+e}else Yi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=Bi[--Hi],Bi[Hi]=null,Wi=Bi[--Hi],Bi[Hi]=null;for(;e===Ji;)Ji=Ki[--Qi],Ki[Qi]=null,$i=Ki[--Qi],Ki[Qi]=null,Yi=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case j:return n.key===i?u(e,t,n,r):null;case P:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&Xi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Xi(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=f(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),is&&Xi(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),is&&Xi(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case j:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Mc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),js=Ei(null),Ss=null,Es=null,_s=null;function Cs(){_s=Es=Ss=null}function Ns(e){var t=js.current;_i(js),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){Ss=e,_s=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ts=null;function Ps(e){null===Ts?Ts=[e]:Ts.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=M({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Gs=Ei(Hs),Ws=Ei(Hs),Ks=Ei(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Js(e,t){switch(Ci(Ks,t),Ci(Ws,e),Ci(Gs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Gs),Ci(Gs,t)}function Ys(){_i(Gs),_i(Ws),_i(Ks)}function $s(e){Qs(Ks.current);var t=Qs(Gs.current),n=le(t,e.type);t!==n&&(Ci(Ws,e),Ci(Gs,n))}function Xs(e){Ws.current===e&&(_i(Gs),_i(Ws))}var Zs=Ei(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function pa(){throw Error(s(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Xa:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=$a,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ja(){}function Sa(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Oa(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,_a.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&sa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&ka(e)}function Ca(e,t,n){return n(function(){Na(t)&&ka(e)})}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function ka(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ia(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return ya().memoizedState}function Pa(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&fa(r,a.deps))return void(i.memoizedState=Aa(t,n,s,r))}aa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function Da(e,t){return Pa(8390656,8,e,t)}function Oa(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Ma(e,t){return Ra(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Fa.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ga(){return ya().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ja(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ka(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ja(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(nc(n,e,r,i=ec()),Ya(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ja(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $a={readContext:As,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Xa={readContext:As,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ia,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&sa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:As,useCallback:za,useContext:As,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:wa,useRef:Ta,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){return Ba(ya(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:As,useCallback:za,useContext:As,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:xa,useRef:Ta,useState:function(){return xa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Pi(t)?Ai:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ti(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Pi(t)?Ai:ki.current,i.context=Ti(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),uo(0,t)},n}function fo(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function jo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Rl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Rl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Rl,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Rl,Pl),Pl|=r;return wo(e,t,i,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,i){var s=Pi(n)?Ai:ki.current;return s=Ti(t,s),Is(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function No(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)Bo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Ti(t,c=Pi(n)?Ai:ki.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,qs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ii.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Ti(t,l=Pi(n)?Ai:ki.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,qs(t,r,a,i);var f=t.memoizedState;o!==d||h!==f||Ii.current||Os?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Os||io(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ko(e,t,n,r,s,i)}function ko(e,t,n,r,i,s){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Js(e,t.containerInfo)}function Ao(e,t,n,r,i){return ps(),fs(i),t.flags|=256,wo(e,t,n,r),t.child}var To,Po,Ro,Do,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Uo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=Yi,Ki[Qi++]=$i,Ki[Qi++]=Ji,Yi=e.id,$i=e.overflow,Ji=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Rc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&fs(r),ws(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Wo(t),null;case 3:return r=t.stateNode,Ys(),_i(Ii),_i(ki),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Po(e,t),Wo(t),null;case 5:Xs(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Qs(Gs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Gs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(_i(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Ys(),Po(e,t),null===e&&qr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ns(t.type._context),Wo(t),null;case 19:if(_i(Zs),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>ql&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*$e()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),_i(Ii),_i(ki),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(_i(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Zs),null;case 4:return Ys(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Gs.current);var s,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Yo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,ml(t,e),Yo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Xo=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Jo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Jo;var c=Yo;if(Jo=a,(Yo=l)&&!c)for(Xo=i;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?jl(i):null!==l?(l.return=a,Xo=l):jl(i);for(;null!==s;)Xo=s,bl(s,t,n),s=s.sibling;Xo=i,Jo=o,Yo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xo=s):wl(e)}}function wl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&il(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{il(t)}catch(l){Ec(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var Sl,El=Math.ceil,_l=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,kl=0,Il=null,Al=null,Tl=0,Pl=0,Rl=Ei(0),Dl=0,Ol=null,Ll=0,Ml=0,Fl=0,Ul=null,Vl=null,zl=0,ql=1/0,Bl=null,Hl=!1,Gl=null,Wl=null,Kl=!1,Ql=null,Jl=0,Yl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&kl)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Tl?Tl&-Tl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&kl)&&e===Il||(e===Il&&(0===(2&kl)&&(Ml|=n),4===Dl&&oc(e,Tl)),rc(e,r),1===n&&0===kl&&0===(1&t.mode)&&(ql=$e()+500,Ui&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?Tl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai(function(){0===(6&kl)&&qi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&kl))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=kl;kl|=2;var a=fc();for(Il===e&&Tl===t||(Bl=null,ql=$e()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Cs(),_l.current=a,kl=i,null!==Al?t=0:(Il=null,Tl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=ft(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Vl,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Vl,Bl),t);break}xc(e,Vl,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Vl,Bl),r);break}xc(e,Vl,Bl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&kl))throw Error(s(327));jc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Vl,Bl),rc(e,$e()),null}function cc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(ql=$e()+500,Ui&&qi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&kl)&&jc();var t=kl;kl|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(kl=t))&&qi()}}function dc(){Pl=Rl.current,_i(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Ys(),_i(Ii),_i(ki),na();break;case 5:Xs(r);break;case 4:Ys();break;case 13:case 19:_i(Zs);break;case 10:Ns(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Al=e=Rc(e.current,null),Tl=Pl=t,Dl=0,Ol=null,Fl=Ml=Ll=0,Vl=Ul=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ts=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Cs(),ra.current=$a,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Cl.current=null,null===n||null===n.return){Dl=1,Ol=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fs(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fc(){var e=_l.current;return _l.current=$a,null===e?$a:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Il||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Il,Tl)}function gc(e,t){var n=kl;kl|=2;var r=fc();for(Il===e&&Tl===t||(Bl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Cs(),kl=n,_l.current=r,null!==Al)throw Error(s(261));return Il=null,Tl=0,Dl}function vc(){for(;null!==Al;)bc(Al)}function yc(){for(;null!==Al&&!Je();)bc(Al)}function bc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{jc()}while(null!==Ql);if(0!==(6&kl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Il&&(Al=Il=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ic(tt,function(){return jc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=kl;kl|=4,Cl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=o),p===a&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),kl=l,bt=o,Nl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Ql=e,Jl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&jc(),a=e.pendingLanes,0!==(1&a)?e===$l?Yl++:(Yl=0,$l=e):Yl=0,qi()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function jc(){if(null!==Ql){var e=wt(Jl),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,0!==(6&kl))throw Error(s(331));var i=kl;for(kl|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var p=(d=Xo).sibling,f=d.return;if(sl(d),d===u){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xo=y;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(j){Ec(l,l.return,j)}if(l===o){Xo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xo=x;break e}Xo=l.return}}if(kl=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(j){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Tl&n)===n&&(4===Dl||3===Dl&&(130023424&Tl)===Tl&&500>$e()-zl?hc(e,0):Fl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(vt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ic(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Oc(n.children,i,a,t);case E:o=8,i|=8;break;case _:return(e=Tc(12,n,t,2|i)).elementType=_,e.lanes=a,e;case I:return(e=Tc(13,n,t,i)).elementType=I,e.lanes=a,e;case A:return(e=Tc(19,n,t,i)).elementType=A,e.lanes=a,e;case R:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case N:o=9;break e;case k:o=11;break e;case T:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Ni;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function qc(e,t,n,r,i,s,a,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(nc(e,i,a,s),Vs(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),ps();break;case 5:$s(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(js,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var i=Ti(t,ki.current);Is(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=ko(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===T)return 14}return 2}(r),e=to(r,e),i){case 0:t=Co(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=jo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ho(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),_o(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ci(js,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ii.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ks(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ks(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=As(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),jo(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Bo(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Is(t,n),so(t,r,i),oo(t,r,i,n),ko(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}Bc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[fi]=a.current,qr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fi]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}Jc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Jc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[fi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,$e()),0===(6&kl)&&(ql=$e()+500,qi()))}break;case 13:uc(function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},jt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));K(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Ne,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,a,o),e[fi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},414:(e,t,n)=>{e.exports=n(654)},469:(e,t,n)=>{n.d(t,{C_:()=>u,J4:()=>d,NJ:()=>o,getCoursesByFaculty:()=>l,getCoursesByInstitution:()=>c,zs:()=>h});var r=n(555),i=n(306),s=n(936);const a="courses",o=async()=>{try{const e=(0,i.P)((0,i.rJ)(s.db,a),(0,i.My)("createdAt","desc"));return(await(0,i.GG)(e)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting courses:",e),new Error("Failed to load courses")}},l=async e=>{try{const t=(0,i.P)((0,i.rJ)(s.db,a),(0,i._M)("facultyId","==",e),(0,i.My)("createdAt","desc"));return(await(0,i.GG)(t)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting courses by faculty:",t),new Error("Failed to load courses")}},c=async e=>{try{const{getFacultiesByInstitution:t}=await Promise.resolve().then(n.bind(n,731)),o=(await t(e)).map(e=>e.id);if(0===o.length)return[];const l=(0,i.P)((0,i.rJ)(s.db,a),(0,i._M)("facultyId","in",o),(0,i.My)("createdAt","desc"));return(await(0,i.GG)(l)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting courses by institution:",t),new Error("Failed to load courses")}},u=async e=>{try{const t=await(0,i.gS)((0,i.rJ)(s.db,a),(0,r.A)((0,r.A)({},e),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active"})),{updateFacultyCourseCount:o}=await Promise.resolve().then(n.bind(n,731));return await o(e.facultyId),t.id}catch(t){throw console.error("Error creating course:",t),new Error("Failed to create course")}},d=async(e,t)=>{try{const n=(0,i.H9)(s.db,a,e);await(0,i.mZ)(n,(0,r.A)((0,r.A)({},t),{},{updatedAt:(new Date).toISOString()}))}catch(n){throw console.error("Error updating course:",n),new Error("Failed to update course")}},h=async e=>{try{const t=await(async e=>{try{const t=(0,i.H9)(s.db,a,e),n=await(0,i.x7)(t);if(n.exists())return(0,r.A)({id:n.id},n.data());throw new Error("Course not found")}catch(t){throw console.error("Error getting course:",t),new Error("Failed to load course")}})(e);await(0,i.kd)((0,i.H9)(s.db,a,e));const{updateFacultyCourseCount:o}=await Promise.resolve().then(n.bind(n,731));await o(t.facultyId)}catch(t){throw console.error("Error deleting course:",t),new Error("Failed to delete course")}}},498:(e,t,n)=>{n.d(t,{cY:()=>m,FA:()=>O,g:()=>D,dM:()=>R,u:()=>l,Uj:()=>o,p9:()=>Y,Fy:()=>y,tD:()=>B,bD:()=>F,hp:()=>q,T9:()=>p,Tj:()=>d,yU:()=>h,XA:()=>f,mS:()=>c,Ku:()=>$,ZQ:()=>j,sr:()=>C,zJ:()=>g,c1:()=>_,Im:()=>M,lT:()=>k,zW:()=>T,jZ:()=>S,lV:()=>N,nr:()=>I,Ov:()=>A,gE:()=>v,Am:()=>V,I9:()=>z,P1:()=>x,eX:()=>P});var r=n(555);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/career-guidance-platform-clean",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},h=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function v(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}const b={};let w=!1;function x(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||b[e]===t||b[e]||w)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(j())}function E(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function _(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function N(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function k(){const e=j();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function T(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function R(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class D extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,D.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new D(n,s,t)}}const L=/\{\$([^}]+)}/g;function M(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(U(n)&&U(s)){if(!F(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U(e){return null!==e&&"object"===typeof e}function V(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function q(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function B(e,t){const n=new H(e,t);return n.subscribe.bind(n)}class H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=G),void 0===r.error&&(r.error=G),void 0===r.complete&&(r.complete=G);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G(){}const W=1e3,K=2,Q=144e5,J=.5;function Y(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:W)*Math.pow(t,e),r=Math.round(J*n*(Math.random()-.5)*2);return Math.min(Q,n+r)}function $(e){return e&&e._delegate?e._delegate:e}},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},654:(e,t,n)=>{var r=n(950),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},731:(e,t,n)=>{n.d(t,{Iq:()=>d,Re:()=>o,Xw:()=>c,ei:()=>u,getFacultiesByInstitution:()=>l,kc:()=>p,updateFacultyCourseCount:()=>h});var r=n(555),i=n(306),s=n(936);const a="faculties",o=async()=>{try{const e=(0,i.P)((0,i.rJ)(s.db,a),(0,i.My)("createdAt","desc"));return(await(0,i.GG)(e)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting faculties:",e),new Error("Failed to load faculties")}},l=async e=>{try{const t=(0,i.P)((0,i.rJ)(s.db,a),(0,i._M)("institutionId","==",e),(0,i.My)("createdAt","desc"));return(await(0,i.GG)(t)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting faculties by institution:",t),new Error("Failed to load faculties")}},c=async e=>{try{return(await(0,i.gS)((0,i.rJ)(s.db,a),(0,r.A)((0,r.A)({},e),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active",courseCount:0}))).id}catch(t){throw console.error("Error creating faculty:",t),new Error("Failed to create faculty")}},u=async(e,t)=>{try{const n=(0,i.H9)(s.db,a,e);await(0,i.mZ)(n,(0,r.A)((0,r.A)({},t),{},{updatedAt:(new Date).toISOString()}))}catch(n){throw console.error("Error updating faculty:",n),new Error("Failed to update faculty")}},d=async e=>{try{await(0,i.kd)((0,i.H9)(s.db,a,e))}catch(t){throw console.error("Error deleting faculty:",t),new Error("Failed to delete faculty")}},h=async e=>{try{const{getCoursesByFaculty:t}=await Promise.resolve().then(n.bind(n,469)),r=await t(e),o=(0,i.H9)(s.db,a,e);await(0,i.mZ)(o,{courseCount:r.length,updatedAt:(new Date).toISOString()})}catch(t){console.error("Error updating faculty course count:",t)}},p=e=>{const t=(0,i.P)((0,i.rJ)(s.db,a),(0,i.My)("createdAt","desc"));return(0,i.aQ)(t,t=>{const n=t.docs.map(e=>(0,r.A)({id:e.id},e.data()));e(n)},e=>{console.error("Error in faculties subscription:",e)})}},761:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(j);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function j(e,n){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var s=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,_=null,C=-1,N=5,k=-1;function I(){return!(t.unstable_now()-k<N)}function A(){if(null!==_){var e=t.unstable_now();k=e;var n=!0;try{n=_(!0,e)}finally{n?S():(E=!1,_=null)}}else E=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,P=T.port2;T.port1.onmessage=A,S=function(){P.postMessage(null)}}else S=function(){v(A,0)};function R(e){_=e,E||(E=!0,S())}function D(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,R(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,D(x,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,R(j))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},791:(e,t,n)=>{n.d(t,{KO:()=>Z,MF:()=>Y,Sx:()=>X,Wp:()=>$,j6:()=>G,om:()=>H,xZ:()=>W});var r=n(555),i=n(863),s=n(226),a=n(498),o=n(272);class l{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.14.5",d=new s.Vy("@firebase/app"),h="@firebase/app-compat",p="@firebase/analytics-compat",f="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",v="@firebase/auth",y="@firebase/auth-compat",b="@firebase/database",w="@firebase/data-connect",x="@firebase/database-compat",j="@firebase/functions",S="@firebase/functions-compat",E="@firebase/installations",_="@firebase/installations-compat",C="@firebase/messaging",N="@firebase/messaging-compat",k="@firebase/performance",I="@firebase/performance-compat",A="@firebase/remote-config",T="@firebase/remote-config-compat",P="@firebase/storage",R="@firebase/storage-compat",D="@firebase/firestore",O="@firebase/ai",L="@firebase/firestore-compat",M="firebase",F="[DEFAULT]",U={[c]:"fire-core",[h]:"fire-core-compat",[f]:"fire-analytics",[p]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[v]:"fire-auth",[y]:"fire-auth-compat",[b]:"fire-rtdb",[w]:"fire-data-connect",[x]:"fire-rtdb-compat",[j]:"fire-fn",[S]:"fire-fn-compat",[E]:"fire-iid",[_]:"fire-iid-compat",[C]:"fire-fcm",[N]:"fire-fcm-compat",[k]:"fire-perf",[I]:"fire-perf-compat",[A]:"fire-rc",[T]:"fire-rc-compat",[P]:"fire-gcs",[R]:"fire-gcs-compat",[D]:"fire-fst",[L]:"fire-fst-compat",[O]:"fire-vertex","fire-js":"fire-js",[M]:"fire-js-all"},V=new Map,z=new Map,q=new Map;function B(e,t){try{e.container.addComponent(t)}catch(n){d.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(q.has(t))return d.debug("There were multiple attempts to register component ".concat(t,".")),!1;q.set(t,e);for(const n of V.values())B(n,e);for(const n of z.values())B(n,e);return!0}function G(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e){return null!==e&&void 0!==e&&void 0!==e.settings}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Q=new a.FA("app","Firebase",K);class J{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Q.create("app-deleted",{appName:this._name})}}const Y="12.5.0";function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=(0,r.A)({name:F,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw Q.create("bad-app-name",{appName:String(o)});if(n||(n=(0,a.T9)()),!n)throw Q.create("no-options");const l=V.get(o);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(s,l.config))return l;throw Q.create("duplicate-app",{appName:o})}const c=new i.h1(o);for(const r of q.values())c.addComponent(r);const u=new J(n,s,c);return V.set(o,u),u}function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;const t=V.get(e);if(!t&&e===F&&(0,a.T9)())return $();if(!t)throw Q.create("no-app",{appName:e});return t}function Z(e,t,n){var r;let s=null!==(r=U[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void d.warn(e.join(" "))}H(new i.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,o.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw Q.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof a.g)d.warn(n.message);else{const e=Q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class se{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){d.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return d.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof a.g)d.warn(t.message);else{const e=Q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});d.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",H(new i.uA("platform-logger",e=>new l(e),"PRIVATE")),H(new i.uA("heartbeat",e=>new se(e),"PRIVATE")),Z(c,u,ce),Z(c,u,"esm2020"),Z("fire-js","")},863:(e,t,n)=>{n.d(t,{h1:()=>o,uA:()=>i});var r=n(498);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},936:(e,t,n)=>{n.d(t,{j2:()=>ot,db:()=>lt});var r=n(791);(0,r.KO)("firebase","12.5.0","app");var i=n(555),s=n(226),a=n(498),o=n(863),l=n(272);const c="@firebase/installations",u="0.6.19",d=1e4,h="w:".concat(u),p="FIS_v2",f=36e5,m={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},g=new a.FA("installations","Installations",m);function v(e){return e instanceof a.g&&e.code.includes("request-failed")}function y(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function b(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function w(e,t){const n=(await t.json()).error;return g.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function x(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function j(e,t){let{refreshToken:n}=t;const r=x(e);return r.append("Authorization",function(e){return"".concat(p," ").concat(e)}(n)),r}async function S(e){const t=await e();return t.status>=500&&t.status<600?e():t}function E(e){return new Promise(t=>{setTimeout(t,e)})}const _=/^[cdef][\w-]{21}$/;function C(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return _.test(t)?t:""}catch(e){return""}}function N(e){return"".concat(e.appName,"!").concat(e.appId)}const k=new Map;function I(e,t){const n=N(e);A(n,t),function(e,t){const n=P();n&&n.postMessage({key:e,fid:t});R()}(n,t)}function A(e,t){const n=k.get(e);if(n)for(const r of n)r(t)}let T=null;function P(){return!T&&"BroadcastChannel"in self&&(T=new BroadcastChannel("[Firebase] FID Change"),T.onmessage=e=>{A(e.data.key,e.data.fid)}),T}function R(){0===k.size&&T&&(T.close(),T=null)}const D="firebase-installations-store";let O=null;function L(){return O||(O=(0,l.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(D)}})),O}async function M(e,t){const n=N(e),r=(await L()).transaction(D,"readwrite"),i=r.objectStore(D),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||I(e,t.fid),t}async function F(e){const t=N(e),n=(await L()).transaction(D,"readwrite");await n.objectStore(D).delete(t),await n.done}async function U(e,t){const n=N(e),r=(await L()).transaction(D,"readwrite"),i=r.objectStore(D),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||I(e,a.fid),a}async function V(e){let t;const n=await U(e.appConfig,n=>{const r=function(e){const t=e||{fid:C(),registrationStatus:0};return B(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=y(n),a=x(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:p,appId:n.appId,sdkVersion:h},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await S(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:b(e.authToken)}}throw await w("Create Installation",u)}(e,t);return M(e.appConfig,n)}catch(n){throw v(n)&&409===n.customData.serverCode?await F(e.appConfig):await M(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:z(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function z(e){let t=await q(e.appConfig);for(;1===t.registrationStatus;)await E(100),t=await q(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await V(e);return n||t}return t}function q(e){return U(e,e=>{if(!e)throw g.create("installation-not-found");return B(e)})}function B(e){return 1===(t=e).registrationStatus&&t.registrationTime+d<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function H(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(y(e),"/").concat(n,"/authTokens:generate")}(n,t),s=j(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:h,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await S(()=>fetch(i,l));if(c.ok){return b(await c.json())}throw await w("Generate Auth Token",c)}async function G(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await U(e.appConfig,r=>{if(!K(r))throw g.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+f}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await W(e.appConfig);for(;1===n.authToken.requestStatus;)await E(100),n=await W(e.appConfig);const r=n.authToken;return 0===r.requestStatus?G(e,t):r}(e,n),r;{if(!navigator.onLine)throw g.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return(0,i.A)((0,i.A)({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await H(e,t),r=(0,i.A)((0,i.A)({},t),{},{authToken:n});return await M(e.appConfig,r),n}catch(n){if(!v(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=(0,i.A)((0,i.A)({},t),{},{authToken:{requestStatus:0}});await M(e.appConfig,n)}else await F(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function W(e){return U(e,e=>{if(!K(e))throw g.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+d<Date.now()?(0,i.A)((0,i.A)({},e),{},{authToken:{requestStatus:0}}):e;var n})}function K(e){return void 0!==e&&2===e.registrationStatus}async function Q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await V(e);t&&await t}(n);return(await G(n,t)).token}function J(e){return g.create("missing-app-config-values",{valueName:e})}const Y="installations",$=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw J("App Configuration");if(!e.name)throw J("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw J(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},X=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,Y).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await V(t);return r?r.catch(console.error):G(t).catch(console.error),n.fid}(n),getToken:e=>Q(n,e)}};(0,r.om)(new o.uA(Y,$,"PUBLIC")),(0,r.om)(new o.uA("installations-internal",X,"PRIVATE")),(0,r.KO)(c,u),(0,r.KO)(c,u,"esm2020");const Z="analytics",ee="https://www.googletagmanager.com/gtag/js",te=new s.Vy("@firebase/analytics"),ne={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},re=new a.FA("analytics","Analytics",ne);function ie(e){if(!e.startsWith(ee)){const t=re.create("invalid-gtag-resource",{gtagURL:e});return te.warn(t.message),""}return e}function se(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function ae(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ie}),r=document.createElement("script"),i="".concat(ee,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function oe(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await se(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){te.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await se(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(o){te.error(o)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){te.error(l)}}}const le=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ce(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw re.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw re.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new he;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),de({appId:r,apiKey:i,measurementId:s},a,o,t)}async function de(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:le;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(re.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(u){if(l)return te.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===u||void 0===u?void 0:u.message,"]")),{appId:o,measurementId:l};throw u}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:ce(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(i,r);if(200!==s.status&&304!==s.status){let e="";try{var a;const t=await s.json();null!==(a=t.error)&&void 0!==a&&a.message&&(e=t.error.message)}catch(o){}throw re.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return s.deleteThrottleMetadata(o),t}catch(u){var c;const t=u;if(!function(e){if(!(e instanceof a.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(o),l)return te.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:o,measurementId:l};throw u}const r=503===Number(null===t||void 0===t||null===(c=t.customData)||void 0===c?void 0:c.httpStatus)?(0,a.p9)(i,s.intervalMillis,30):(0,a.p9)(i,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(o,d),te.debug("Calling attemptFetch again in ".concat(r," millis")),de(e,d,n,s)}}class he{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let pe,fe;function me(e){fe=e}function ge(e){pe=e}async function ve(e,t,n,r,i,s,o){var l;const c=ue(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&te.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>te.error(e)),t.push(c);const u=async function(){if(!(0,a.zW)())return te.warn(re.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,a.eX)()}catch(e){return te.warn(re.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[d,h]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ee)&&n.src.includes(e))return n;return null})(s)||ae(s,d.measurementId),fe&&(i("consent","default",fe),me(void 0)),i("js",new Date);const p=null!==(l=null===o||void 0===o?void 0:o.config)&&void 0!==l?l:{};return p.origin="firebase",p.update=!0,null!=h&&(p.firebase_id=h),i("config",d.measurementId,p),pe&&(i("set",pe),ge(void 0)),d.measurementId}class ye{constructor(e){this.app=e}_delete(){return delete be[this.app.options.appId],Promise.resolve()}}let be={},we=[];const xe={};let je,Se,Ee="dataLayer",_e="gtag",Ce=!1;function Ne(e,t,n){!function(){const e=[];if((0,a.sr)()&&e.push("This is a browser extension environment."),(0,a.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=re.create("invalid-analytics-context",{errorInfo:t});te.warn(n.message)}}();const r=e.options.appId;if(!r)throw re.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw re.create("no-api-key");te.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=be[r])throw re.create("already-exists",{id:r});if(!Ce){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ee);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=oe(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(be,we,xe,Ee,_e);Se=e,je=t,Ce=!0}be[r]=ve(e,we,xe,t,je,Ee,n);return new ye(e)}function ke(e,t,n){e=(0,a.Ku)(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(Se,be[e.app.options.appId],t,n).catch(e=>te.error(e))}function Ie(e,t,n,r){e=(0,a.Ku)(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,(0,i.A)((0,i.A)({},r),{},{send_to:s}))}}(Se,be[e.app.options.appId],t,n,r).catch(e=>te.error(e))}const Ae="@firebase/analytics",Te="0.10.19";(0,r.om)(new o.uA(Z,(e,t)=>{let{options:n}=t;return Ne(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,r.om)(new o.uA("analytics-internal",function(e){try{const t=e.getProvider(Z).getImmediate();return{logEvent:(e,n,r)=>Ie(t,e,n,r),setUserProperties:(e,n)=>ke(t,e,n)}}catch(t){throw re.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,r.KO)(Ae,Te),(0,r.KO)(Ae,Te,"esm2020");var Pe=n(27),Re=n(306);const De="firebasestorage.googleapis.com",Oe="storageBucket";class Le extends a.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ue(e),"Firebase Storage: ".concat(t," (").concat(Ue(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Le.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ue(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Me,Fe;function Ue(e){return"storage/"+e}function Ve(){return new Le(Me.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ze(){return new Le(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qe(){return new Le(Me.CANCELED,"User canceled the upload/download.")}function Be(e){return new Le(Me.INVALID_ARGUMENT,e)}function He(){return new Le(Me.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Me||(Me={}));class Ge{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ge.makeFromUrl(e,t)}catch(i){return new Ge(e,"")}if(""===n.path)return n;throw r=e,new Le(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===De?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Ge(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Le(Me.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class We{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ke(e,t,n,r){if(r<t)throw Be("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Be("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Qe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Je(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Fe||(Fe={}));class Ye{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new $e(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Fe.NO_ERROR,i=n.getStatus();if(!t||Je(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Fe.ABORT;return void e(!1,new $e(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new $e(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==i){const e=Ve();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?He():qe())}else{r(ze())}};this.canceled_?t(0,new $e(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(p,l())},t)}function h(){s&&clearTimeout(s)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $e{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Xe(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Ze{constructor(e,t){this._service=e,this._location=t instanceof Ge?t:Ge.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ze(e,t)}get root(){const e=new Ge(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xe(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Ge(this._location.bucket,e);return new Ze(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Le(Me.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function et(e,t){const n=null===t||void 0===t?void 0:t[Oe];return null==n?null:Ge.makeFromBucketSpec(n,e)}class tt{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=De,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ge.makeFromBucketSpec(r,this._host):et(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Ge.makeFromBucketSpec(this._url,e):this._bucket=et(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ke("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ke("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ze(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new We(He());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=Qe(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Ye(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const nt="@firebase/storage",rt="0.14.0",it="storage";function st(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new tt(i,s,a,n,r.MF)}(0,r.om)(new o.uA(it,st,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(nt,rt,""),(0,r.KO)(nt,rt,"esm2020");const at=(0,r.Wp)({apiKey:"AIzaSyDVjaJSPv_Q5PlkAr7ngAdcBkNhkdjtb3M",authDomain:"careerguidanceplatform-3fb80.firebaseapp.com",projectId:"careerguidanceplatform-3fb80",storageBucket:"careerguidanceplatform-3fb80.firebasestorage.app",messagingSenderId:"670163373747",appId:"1:670163373747:web:eaffcc447ca65940802ac6",measurementId:"G-K09Y2DETD9"}),ot=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();e=(0,a.Ku)(e);const t=(0,r.j6)(e,Z);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.j6)(e,Z);if(n.isInitialized()){const e=n.getImmediate();if((0,a.bD)(t,n.getOptions()))return e;throw re.create("already-initialized")}const i=n.initialize({options:t})}(e)}(at),(0,Pe.xI)(at)),lt=(0,Re.aU)(at);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,a.Ku)(e);const n=(0,r.j6)(e,it).getImmediate({identifier:t}),i=(0,a.yU)("storage");i&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=(0,a.zJ)(t);i&&((0,a.gE)("https://".concat(e.host,"/b")),(0,a.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:(0,a.Fy)(s,e.app.options.projectId))}(e,t,n,r)}(n,...i)}(at)},950:(e,t,n)=>{e.exports=n(49)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".8df44bc1.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="career-guidance-frontend:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/career-guidance-platform-clean/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkcareer_guidance_frontend=self.webpackChunkcareer_guidance_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,i=n(950),s=n.t(i,2),a=n(352);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,u=s.history,f=r.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){f=r.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:f,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let w={get action(){return f},get location(){return e(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),m=e,()=>{s.removeEventListener(l,y),m=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=r.Push;let i=h(w.location,e,t);n&&n(i,e),g=v()+1;let o=d(i,g),l=w.createHref(i);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}a&&m&&m({action:f,location:w.location,delta:1})},replace:function(e,t){f=r.Replace;let i=h(w.location,e,t);n&&n(i,e),g=v();let s=d(i,g),o=w.createHref(i);u.replaceState(s,"",o),a&&m&&m({action:f,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=P(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let s=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=T(i);a=I(s[o],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=M([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:k(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=w(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,j=3,S=2,E=1,_=10,C=-2,N=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=C),t&&(r+=S),n.filter(e=>!N(e)).reduce((e,t)=>e+(x.test(t)?j:""===t?E:_),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:M([s,u.pathname]),pathnameBase:F(M([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=M([s,u.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=D(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=o({},e),c(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let s,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:V(i)}}(i,s),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],B=(new Set(q),["get",...q]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const G=i.createContext(null);const W=i.createContext(null);const K=i.createContext(null);const Q=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=i.createContext(null);function $(){return null!=i.useContext(Q)}function X(){return $()||c(!1),i.useContext(Q).location}function Z(e){i.useContext(K).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=i.useRef(!1);return Z(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))},[e,t])}():function(){$()||c(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(K),{matches:s}=i.useContext(J),{pathname:a}=X(),o=JSON.stringify(O(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return Z(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=L(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:M([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,o,a,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(K),{matches:s}=i.useContext(J),{pathname:a}=X(),o=JSON.stringify(O(s,r.v7_relativeSplatPath));return i.useMemo(()=>L(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ne(e,t,n,s){$()||c(!1);let{navigator:a}=i.useContext(K),{matches:o}=i.useContext(J),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=X();if(t){var m;let e="string"===typeof t?f(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=p;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let w=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&w?i.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function re(){let e=function(){var e;let t=i.useContext(Y),n=de(ce.UseRouteError),r=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ie=i.createElement(re,null);class se extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function oe(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,s)=>{let a,c=!1,h=null,p=null;var f;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ie,u&&(d<0&&0===s?(f="route-fallback",!1||pe[f]||(pe[f]=!0),c=!0,p=null):d===s&&(c=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?h:c?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ae,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=i.useContext(G);return t||c(!1),t}function de(e){let t=i.useContext(W);return t||c(!1),t}function he(e){let t=function(){let e=i.useContext(J);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const pe={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function me(e){let{to:t,replace:n,state:r,relative:s}=e;$()||c(!1);let{future:a,static:o}=i.useContext(K),{matches:l}=i.useContext(J),{pathname:u}=X(),d=ee(),h=L(t,O(l,a.v7_relativeSplatPath),u,"path"===s),p=JSON.stringify(h);return i.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function ge(e){c(!1)}function ve(e){let{basename:t="/",children:n=null,location:s,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;$()&&c(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:d,navigator:o,static:l,future:H({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=s,b=i.useMemo(()=>{let e=P(p,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:a}},[d,p,m,g,v,y,a]);return null==b?null:i.createElement(K.Provider,{value:h},i.createElement(Q.Provider,{children:n,value:b}))}function ye(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise(()=>{});i.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,be(e.props.children,s));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,s)),n.push(a)}),n}var we=n(119),xe=n.t(we,2);function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch($t){}new Map;const _e=s.startTransition;xe.flushSync,s.useId;function Ce(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,o)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},f=i.useCallback(e=>{d&&_e?_e(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(f),[l,f]),i.useEffect(()=>fe(r),[r]),i.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,m=Se(e,Ee),{basename:g}=i.useContext(K),v=!1;if("string"===typeof d&&ke.test(d)&&(n=d,Ne))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch($t){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||c(!1);let{basename:r,navigator:s}=i.useContext(K),{hash:a,pathname:o,search:l}=te(e,{relative:n}),u=o;return"/"!==r&&(u="/"===o?r:M([r,o])),s.createHref({pathname:u,search:l,hash:a})}(d,{relative:s}),b=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),d=te(e,{relative:o});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});return i.createElement("a",je({},m,{href:n||y,onClick:v||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:u}))});var Ae,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Pe=n(555),Re=n(27),De=n(306),Oe=n(936),Le=n(414);const Me=(0,i.createContext)(),Fe=()=>{const e=(0,i.useContext)(Me);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ue=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),c=e=>{const t=e.replace(/[^\d+]/g,"");if(![/^\+266\d{8}$/,/^266\d{8}$/,/^0\d{8}$/,/^\d{8}$/].some(e=>e.test(t)))throw new Error("Please enter a valid Lesotho phone number. Formats: +26650123456, 26650123456, 050123456, or 50123456");return!0},u=e=>{if(!e||!e.trim())throw new Error("Please enter your email address");if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e))throw new Error("Please enter a valid email address (e.g., name@gmail.com)");const t=e.split("@")[1].toLowerCase();if(["example.com","test.com","localhost.com","fake.com","demo.com","temp.com","mailinator.com","10minutemail.com"].includes(t))throw new Error("Please use a real email address for verification");return!0},d=e=>{const t=e.replace(/[^\d+]/g,"");if(t.startsWith("+266")&&12===t.length)return t;if(t.startsWith("266")&&11===t.length)return"+"+t;if(t.startsWith("0")&&9===t.length)return"+266"+t.slice(1);if(/^\d{8}$/.test(t))return"+266"+t;throw new Error("Invalid Lesotho phone number format")};(0,i.useEffect)(()=>(0,Re.hg)(Oe.j2,async e=>{if(e){r(e);try{const t=await(0,De.x7)((0,De.H9)(Oe.db,"users",e.uid));if(t.exists()){const n=t.data();a(n);const r=localStorage.getItem("intendedPath");if(r&&e.emailVerified){const e=h(r);e&&n.role!==e||(localStorage.removeItem("intendedPath"),window.location.href=r)}}}catch(t){console.error("Error fetching user profile:",t)}}else r(null),a(null);l(!1)}),[]);const h=e=>e.includes("/admin/")?"admin":e.includes("/institute/")?"institute":e.includes("/student/")?"student":e.includes("/company/")?"company":null,p={currentUser:n,userProfile:s,register:async e=>{try{if(console.log("Starting REAL registration process..."),(e=>{if(!e.trim()||e.trim().length<2)throw new Error("Name must be at least 2 characters long");if(!/^[a-zA-Z\s]+$/.test(e))throw new Error("Name can only contain letters and spaces")})(e.name),u(e.email),c(e.phone),(e=>{if(e.length<6)throw new Error("Password must be at least 6 characters long")})(e.password),e.password!==e.confirmPassword)throw new Error("Passwords do not match");const t=d(e.phone),n=(await(0,Re.eJ)(Oe.j2,e.email,e.password)).user;await(0,Re.r7)(n,{displayName:e.name});const r={uid:n.uid,name:e.name,email:e.email,phone:t,role:e.role,institutionName:e.institutionName||"",companyName:e.companyName||"",emailVerified:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return await(0,De.BN)((0,De.H9)(Oe.db,"users",n.uid),r),await(0,Re.gA)(n),{user:n,message:"Registration successful! Check your REAL email for verification link from Firebase."}}catch(t){console.error("Registration error:",t);let e="Registration failed. Please try again.";switch(t.code){case"auth/email-already-in-use":e="This email is already registered. Please use a different email or login.";break;case"auth/invalid-email":e="Please enter a valid email address (e.g., name@gmail.com).";break;case"auth/weak-password":e="Password should be at least 6 characters.";break;case"auth/network-request-failed":e="Network error. Please check your internet connection.";break;default:e=t.message||"Registration failed. Please try again."}throw new Error(e)}},login:async(e,t)=>{try{u(e);const n=(await(0,Re.x9)(Oe.j2,e,t)).user,i=await(0,De.x7)((0,De.H9)(Oe.db,"users",n.uid));if(i.exists()){const e=i.data();a(e)}return r(n),n}catch(n){console.error("Login error:",n);let e="Login failed. Please try again.";switch(n.code){case"auth/user-not-found":e="No account found with this email. Please register first.";break;case"auth/wrong-password":e="Invalid password. Please try again.";break;case"auth/invalid-email":e="Please enter a valid email address.";break;case"auth/too-many-requests":e="Too many login attempts. Please try again later.";break;default:e=n.message||"Login failed. Please try again."}throw new Error(e)}},logout:async()=>{try{await(0,Re.CI)(Oe.j2),r(null),a(null)}catch(e){throw console.error("Logout error:",e),new Error("Logout failed. Please try again.")}},verifyEmail:async e=>{try{if(!n)throw new Error("No user logged in.");return await(0,De.mZ)((0,De.H9)(Oe.db,"users",n.uid),{emailVerified:!0,updatedAt:(new Date).toISOString()}),a(e=>(0,Pe.A)((0,Pe.A)({},e),{},{emailVerified:!0})),"Email verified successfully!"}catch(t){throw new Error("Failed to verify email. Please try again.")}},resendVerification:async()=>{try{if(Oe.j2.currentUser)return await(0,Re.gA)(Oe.j2.currentUser),"Verification email sent successfully! Check your inbox.";throw new Error("No user logged in.")}catch(e){throw new Error("Failed to send verification email. Please try again.")}},hasPendingVerification:()=>!!n&&!n.emailVerified,updateProfile:async e=>{try{if(!n)throw new Error("No user logged in.");return e.phone&&(c(e.phone),e.phone=d(e.phone)),await(0,De.mZ)((0,De.H9)(Oe.db,"users",n.uid),(0,Pe.A)((0,Pe.A)({},e),{},{updatedAt:(new Date).toISOString()})),a(t=>(0,Pe.A)((0,Pe.A)({},t),e)),e.name&&await(0,Re.r7)(n,{displayName:e.name}),"Profile updated successfully!"}catch(t){throw new Error("Failed to update profile. Please try again.")}},isAuthenticated:!!n,isEmailVerified:(null===n||void 0===n?void 0:n.emailVerified)||!1,formatLesothoPhone:d};return(0,Le.jsx)(Me.Provider,{value:p,children:!o&&t})},Ve=e=>{let{children:t,requiredRole:n,redirectTo:r="/auth/login"}=e;const{currentUser:i,userProfile:s,isAuthenticated:a,isEmailVerified:o}=Fe(),l=X();return a&&i?o?s?n&&s.role!==n?(0,Le.jsxs)("div",{style:{padding:"2rem",textAlign:"center"},children:[(0,Le.jsx)("h2",{children:"Access Denied"}),(0,Le.jsx)("p",{children:"You don't have permission to access this module."}),(0,Le.jsxs)("p",{children:["Your role: ",s.role]})]}):t:(0,Le.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:(0,Le.jsx)("p",{children:"Loading user profile..."})}):(0,Le.jsx)(me,{to:"/auth/verify-email",replace:!0}):(localStorage.setItem("intendedPath",l.pathname),(0,Le.jsx)(me,{to:r,replace:!0}))},ze=e=>{let{children:t}=e;const{currentUser:n,logout:r}=Fe(),i=ee();return(0,Le.jsxs)("div",{className:"layout",children:[(0,Le.jsx)("header",{className:"header",children:(0,Le.jsxs)("div",{className:"header-content",children:[(0,Le.jsx)("h1",{className:"logo",children:"CareerGuide"}),(0,Le.jsxs)("nav",{className:"nav",children:[(0,Le.jsx)("div",{className:"nav-links",children:[{path:"/",label:"Home"},{path:"/admin/dashboard",label:"Admin Module"},{path:"/institute/dashboard",label:"Institute Module"},{path:"/student/dashboard",label:"Student Module"},{path:"/company/dashboard",label:"Company Module"}].map(e=>"/"===e.path?(0,Le.jsx)(Ie,{to:e.path,className:"nav-link",children:e.label},e.path):(0,Le.jsx)(Ie,{to:e.path,className:"nav-link",onClick:t=>((e,t)=>{n?n.emailVerified?i(t):(e.preventDefault(),i("/auth/verify-email")):(e.preventDefault(),localStorage.setItem("intendedPath",t),i("/auth/register"))})(t,e.path),children:e.label},e.path))}),(0,Le.jsx)("div",{className:"auth-section",children:n?(0,Le.jsxs)("div",{className:"user-menu",children:[(0,Le.jsx)("span",{className:"user-email",children:n.email}),(0,Le.jsx)("button",{onClick:async()=>{try{await r(),i("/")}catch(e){console.error("Logout error:",e)}},className:"btn btn-secondary",children:"Logout"})]}):(0,Le.jsxs)("div",{className:"auth-links",children:[(0,Le.jsx)(Ie,{to:"/auth/login",className:"btn btn-secondary",children:"Login"}),(0,Le.jsx)(Ie,{to:"/auth/register",className:"btn btn-primary",children:"Register"})]})})]})]})}),(0,Le.jsx)("main",{className:"main-content",children:t}),(0,Le.jsx)("footer",{className:"footer",children:(0,Le.jsxs)("div",{className:"footer-content",children:[(0,Le.jsx)("p",{children:"\xa9 2024 CareerGuide. All rights reserved."}),(0,Le.jsx)("p",{children:"Your trusted career guidance platform"})]})})]})},qe=()=>(0,Le.jsxs)("div",{className:"home",children:[(0,Le.jsx)("section",{className:"hero",children:(0,Le.jsxs)("div",{className:"hero-content",children:[(0,Le.jsx)("h1",{children:"Welcome to CareerGuide"}),(0,Le.jsx)("p",{className:"hero-subtitle",children:"Your comprehensive career guidance platform connecting students, institutions, and companies"}),(0,Le.jsxs)("div",{className:"hero-actions",children:[(0,Le.jsx)(Ie,{to:"/auth/student/login",className:"btn btn-primary",children:"Student Login"}),(0,Le.jsx)(Ie,{to:"/auth/student/register",className:"btn btn-secondary",children:"Student Register"}),(0,Le.jsx)(Ie,{to:"/auth/admin/login",className:"btn btn-outline",children:"Admin Login"})]})]})}),(0,Le.jsx)("section",{className:"features",children:(0,Le.jsxs)("div",{className:"container",children:[(0,Le.jsx)("h2",{children:"Why Choose CareerGuide?"}),(0,Le.jsxs)("div",{className:"features-grid",children:[(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("h3",{children:"Personalized Guidance"}),(0,Le.jsx)("p",{children:"Get tailored career advice based on your skills, interests, and goals"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("h3",{children:"Institute Connections"}),(0,Le.jsx)("p",{children:"Connect with educational institutions for courses and certifications"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("h3",{children:"Career Opportunities"}),(0,Le.jsx)("p",{children:"Discover job opportunities and internships from top companies"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("h3",{children:"Skill Assessment"}),(0,Le.jsx)("p",{children:"Evaluate your skills and identify areas for improvement"})]})]})]})}),(0,Le.jsx)("section",{className:"user-types",children:(0,Le.jsxs)("div",{className:"container",children:[(0,Le.jsx)("h2",{children:"Designed For Everyone"}),(0,Le.jsxs)("div",{className:"user-types-grid",children:[(0,Le.jsxs)("div",{className:"user-type-card",children:[(0,Le.jsx)("h3",{children:"Students"}),(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:"Career path guidance"}),(0,Le.jsx)("li",{children:"Skill development"}),(0,Le.jsx)("li",{children:"Job opportunities"}),(0,Le.jsx)("li",{children:"Institute connections"})]}),(0,Le.jsxs)("div",{className:"user-actions",children:[(0,Le.jsx)(Ie,{to:"/auth/student/login",className:"btn btn-small",children:"Login"}),(0,Le.jsx)(Ie,{to:"/auth/student/register",className:"btn btn-small btn-secondary",children:"Register"})]})]}),(0,Le.jsxs)("div",{className:"user-type-card",children:[(0,Le.jsx)("h3",{children:"Institutions"}),(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:"Student recruitment"}),(0,Le.jsx)("li",{children:"Course promotion"}),(0,Le.jsx)("li",{children:"Industry partnerships"}),(0,Le.jsx)("li",{children:"Career services"})]}),(0,Le.jsxs)("div",{className:"user-actions",children:[(0,Le.jsx)(Ie,{to:"/auth/institute/login",className:"btn btn-small",children:"Login"}),(0,Le.jsx)(Ie,{to:"/auth/institute/register",className:"btn btn-small btn-secondary",children:"Register"})]})]}),(0,Le.jsxs)("div",{className:"user-type-card",children:[(0,Le.jsx)("h3",{children:"Companies"}),(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:"Talent acquisition"}),(0,Le.jsx)("li",{children:"Internship programs"}),(0,Le.jsx)("li",{children:"Campus recruitment"}),(0,Le.jsx)("li",{children:"Industry insights"})]}),(0,Le.jsxs)("div",{className:"user-actions",children:[(0,Le.jsx)(Ie,{to:"/auth/company/login",className:"btn btn-small",children:"Login"}),(0,Le.jsx)(Ie,{to:"/auth/company/register",className:"btn btn-small btn-secondary",children:"Register"})]})]}),(0,Le.jsxs)("div",{className:"user-type-card",children:[(0,Le.jsx)("h3",{children:"Admins"}),(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:"System management"}),(0,Le.jsx)("li",{children:"User oversight"}),(0,Le.jsx)("li",{children:"Platform analytics"}),(0,Le.jsx)("li",{children:"Content moderation"})]}),(0,Le.jsxs)("div",{className:"user-actions",children:[(0,Le.jsx)(Ie,{to:"/auth/admin/login",className:"btn btn-small",children:"Login"}),(0,Le.jsx)(Ie,{to:"/auth/admin/register",className:"btn btn-small btn-secondary",children:"Register"})]})]})]})]})})]}),Be=()=>{const e={name:"Demo User",role:"student"},[t,n]=(0,i.useState)("student"),r=(e=>{switch(e){case"student":return{title:"Student Dashboard",features:["Career Assessment Tests","Skill Development Courses","Job Opportunities","Institute Connections","Career Counseling"],stats:[{label:"Profile Completion",value:"85%",desc:"Complete your profile for better opportunities"},{label:"Active Opportunities",value:"12",desc:"Available jobs, courses, and programs"},{label:"Connections",value:"8",desc:"Institutes and companies in your network"}]};case"institute":return{title:"Institute Dashboard",features:["Student Management","Course Catalog","Industry Partnerships","Placement Statistics","Career Events"],stats:[{label:"Total Students",value:"1,250",desc:"Enrolled students this year"},{label:"Active Courses",value:"45",desc:"Courses currently offered"},{label:"Placements",value:"89%",desc:"Placement success rate"}]};case"company":return{title:"Company Dashboard",features:["Talent Acquisition","Internship Programs","Campus Recruitment","Skill Requirements","Industry Collaboration"],stats:[{label:"Open Positions",value:"15",desc:"Active job postings"},{label:"Applications",value:"234",desc:"Received this month"},{label:"Campus Drives",value:"8",desc:"Scheduled recruitment events"}]};case"admin":return{title:"Admin Dashboard",features:["User Management","Platform Analytics","Content Moderation","System Settings","Reports & Insights"],stats:[{label:"Total Users",value:"5,678",desc:"Registered users"},{label:"Active Sessions",value:"1,234",desc:"Users online now"},{label:"System Health",value:"98%",desc:"Platform uptime"}]};default:return{title:"Dashboard",features:[],stats:[]}}})(t);return(0,Le.jsxs)("div",{className:"dashboard",children:[(0,Le.jsxs)("div",{className:"dashboard-header",children:[(0,Le.jsxs)("h1",{children:["Welcome, ",null===e||void 0===e?void 0:e.name,"!"]}),(0,Le.jsx)("p",{className:"dashboard-subtitle",children:"CareerGuide Demo - Explore all dashboard views"})]}),(0,Le.jsxs)("div",{className:"role-selector",children:[(0,Le.jsx)("h3",{children:"Select Dashboard View:"}),(0,Le.jsx)("div",{className:"role-buttons",children:[{id:"student",name:"Student",icon:"\ud83c\udf93"},{id:"institute",name:"Institute",icon:"\ud83c\udfeb"},{id:"company",name:"Company",icon:"\ud83c\udfe2"},{id:"admin",name:"Admin",icon:"\u2699\ufe0f"}].map(e=>(0,Le.jsxs)("button",{className:"role-btn ".concat(t===e.id?"active":""),onClick:()=>n(e.id),children:[(0,Le.jsx)("span",{className:"role-icon",children:e.icon}),e.name]},e.id))})]}),(0,Le.jsxs)("div",{className:"dashboard-content",children:[(0,Le.jsxs)("div",{className:"current-role-header",children:[(0,Le.jsx)("h2",{children:r.title}),(0,Le.jsxs)("p",{children:["Your career guidance hub for ",t,"s"]})]}),(0,Le.jsx)("div",{className:"stats-grid",children:r.stats.map((e,t)=>(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:e.label}),(0,Le.jsx)("div",{className:"stat-value",children:e.value}),(0,Le.jsx)("p",{children:e.desc})]},t))}),(0,Le.jsxs)("div",{className:"features-section",children:[(0,Le.jsx)("h2",{children:"Available Features"}),(0,Le.jsx)("div",{className:"features-grid",children:r.features.map((e,t)=>(0,Le.jsxs)("div",{className:"feature-item",children:[(0,Le.jsx)("div",{className:"feature-icon",children:t+1}),(0,Le.jsx)("span",{children:e})]},t))})]}),(0,Le.jsxs)("div",{className:"quick-actions",children:[(0,Le.jsx)("h2",{children:"Quick Actions"}),(0,Le.jsxs)("div",{className:"actions-grid",children:[(0,Le.jsx)("button",{className:"action-btn",children:"Update Profile"}),(0,Le.jsx)("button",{className:"action-btn",children:"Browse Opportunities"}),(0,Le.jsx)("button",{className:"action-btn",children:"View Connections"}),(0,Le.jsx)("button",{className:"action-btn",children:"Settings"})]})]}),(0,Le.jsxs)("div",{className:"demo-info",children:[(0,Le.jsx)("h3",{children:"\ud83c\udfaf Demo Mode Features"}),(0,Le.jsx)("p",{children:"This dashboard showcases all user roles in CareerGuide. Switch between different views to see how each user type experiences the platform."}),(0,Le.jsxs)("div",{className:"demo-features",children:[(0,Le.jsxs)("div",{className:"demo-feature",children:[(0,Le.jsx)("strong",{children:"Student View:"})," Career guidance, applications, job portal"]}),(0,Le.jsxs)("div",{className:"demo-feature",children:[(0,Le.jsx)("strong",{children:"Institute View:"})," Student management, course catalog, placements"]}),(0,Le.jsxs)("div",{className:"demo-feature",children:[(0,Le.jsx)("strong",{children:"Company View:"})," Talent acquisition, recruitment, internships"]}),(0,Le.jsxs)("div",{className:"demo-feature",children:[(0,Le.jsx)("strong",{children:"Admin View:"})," Platform management, analytics, user oversight"]})]})]})]})]})},He=()=>{const e=X(),{userProfile:t}=Fe(),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(0),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)(""),p=async()=>{if(null!==t&&void 0!==t&&t.uid)try{var e;console.log("Fetching qualified courses...");const i=await(0,De.GG)((0,De.P)((0,De.rJ)(Oe.db,"users"),(0,De._M)("uid","==",t.uid)));let s=null;var n;if(i.forEach(e=>{s=(0,Pe.A)({id:e.id},e.data())}),null!==(e=s)&&void 0!==e&&e.academicResults)l(parseFloat((null===(n=s.academicResults.split("Overall - ")[1])||void 0===n?void 0:n.replace("%",""))||0));const a=(0,De.P)((0,De.rJ)(Oe.db,"courses"),(0,De._M)("status","==","active")),c=await(0,De.GG)(a),u=[];for(const e of c.docs){const t=(0,Pe.A)({id:e.id},e.data()),n=await(0,De.GG)((0,De.P)((0,De.rJ)(Oe.db,"institutions"),(0,De._M)("__name__","==",t.institutionId)));let r="Unknown Institution";n.forEach(e=>{r=e.data().name||"Unknown Institution"}),t.institutionName=r,t.facultyName=t.faculty||"General",t.requirements=t.requirements||"Standard requirements",t.availableSlots=t.availableSlots||t.capacity||0,t.minGrade=t.minGrade||60,u.push(t)}const d=u.filter(e=>o>=e.minGrade);r(d),h("Found ".concat(d.length," qualified courses"))}catch(i){console.error("Error fetching qualified courses:",i),h("Error: ".concat(i.message))}},f=async()=>{try{const e=(0,De.P)((0,De.rJ)(Oe.db,"courses"),(0,De._M)("status","==","active")),t=await(0,De.GG)(e),n=[];for(const r of t.docs){const e=(0,Pe.A)({id:r.id},r.data()),t=await(0,De.GG)((0,De.P)((0,De.rJ)(Oe.db,"institutions"),(0,De._M)("__name__","==",e.institutionId)));let i="Unknown Institution";t.forEach(e=>{i=e.data().name||"Unknown Institution"}),e.institutionName=i,e.facultyName=e.faculty||"General",e.requirements=e.requirements||"Standard requirements",e.availableSlots=e.availableSlots||e.capacity||0,e.minGrade=e.minGrade||60,n.push(e)}console.log("All courses:",n),a(n)}catch(e){console.error("Error fetching all courses:",e)}},m=async e=>{if(null!==t&&void 0!==t&&t.uid)try{console.log("Uploading transcript with grade: ".concat(e,"%"));const n=(0,De.P)((0,De.rJ)(Oe.db,"users"),(0,De._M)("uid","==",t.uid)),r=await(0,De.GG)(n);if(!r.empty){const t=r.docs[0];await(0,De.mZ)((0,De.H9)(Oe.db,"users",t.id),{academicResults:"Mathematics - A, English - B, Science - A, Overall - ".concat(e,"%"),lastQualificationCheck:(new Date).toISOString()}),alert("Transcript uploaded! Grade: ".concat(e,"%")),l(e),p()}}catch(n){console.error("Error uploading transcript:",n),alert("Failed to upload transcript")}},g=async e=>{if(null!==t&&void 0!==t&&t.uid)try{console.log(" Setting test grade to: ".concat(e,"%"));const n=(0,De.P)((0,De.rJ)(Oe.db,"users"),(0,De._M)("uid","==",t.uid)),r=await(0,De.GG)(n);if(!r.empty){const t=r.docs[0];await(0,De.mZ)((0,De.H9)(Oe.db,"users",t.id),{academicResults:"Test Grade - ".concat(e,"%"),lastQualificationCheck:(new Date).toISOString()}),alert("Grade set to ".concat(e,"%")),l(e),p()}}catch(n){console.error("Error setting test grade:",n)}};return(0,i.useEffect)(()=>{(async()=>{null!==t&&void 0!==t&&t.uid&&(u(!0),await Promise.all([p(),f()]),u(!1))})()},[t]),c?(0,Le.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"Loading student data..."}):(0,Le.jsxs)("div",{style:{display:"flex",minHeight:"100vh"},children:[(0,Le.jsxs)("div",{style:{width:"250px",backgroundColor:"#f8f9fa",borderRight:"1px solid #dee2e6",padding:"20px 0"},children:[(0,Le.jsx)("h3",{style:{padding:"0 20px",marginBottom:"20px",color:"#495057"},children:"Student Menu"}),(0,Le.jsx)("nav",{children:(0,Le.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0},children:[(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/dashboard",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/dashboard"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/dashboard"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Dashboard"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/profile",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/profile"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/profile"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Profile"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/documents",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/documents"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/documents"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Documents"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/applications",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/applications"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/applications"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Course Applications"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/auto-apply",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/auto-apply"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/auto-apply"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Auto Apply"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/admissions",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/admissions"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/admissions"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Admissions Results"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/jobs",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/jobs"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/jobs"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Job Portal"})}),(0,Le.jsx)("li",{style:{marginBottom:"5px"},children:(0,Le.jsx)(Ie,{to:"/student/notifications",style:{display:"block",padding:"10px 20px",textDecoration:"none",color:"/student/notifications"===e.pathname?"#007bff":"#495057",backgroundColor:"/student/notifications"===e.pathname?"#e3f2fd":"transparent",borderRadius:"4px",margin:"0 10px"},children:"Notifications"})})]})})]}),(0,Le.jsxs)("div",{style:{flex:1,padding:"20px",maxWidth:"calc(100% - 250px)"},children:[(0,Le.jsx)("h2",{children:"Student Dashboard - Course Applications"}),(0,Le.jsxs)("div",{style:{padding:"15px",backgroundColor:"#e7f3ff",borderRadius:"8px",marginBottom:"20px",border:"1px solid #b3d9ff"},children:[(0,Le.jsx)("h3",{children:"Debug Information"}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Current Grade:"})," ",o,"%"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Qualified Courses:"})," ",n.length]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"All Available Courses:"})," ",s.length]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Status:"})," ",d]}),(0,Le.jsxs)("div",{style:{marginTop:"10px"},children:[(0,Le.jsx)("h4",{children:"Quick Test Grades:"}),(0,Le.jsx)("button",{onClick:()=>g(80),style:{margin:"5px",padding:"8px 12px"},children:"Set 80%"}),(0,Le.jsx)("button",{onClick:()=>g(65),style:{margin:"5px",padding:"8px 12px"},children:"Set 65%"}),(0,Le.jsx)("button",{onClick:()=>g(50),style:{margin:"5px",padding:"8px 12px"},children:"Set 50%"}),(0,Le.jsx)("button",{onClick:()=>g(40),style:{margin:"5px",padding:"8px 12px"},children:"Set 40%"}),(0,Le.jsx)("button",{onClick:()=>g(30),style:{margin:"5px",padding:"8px 12px"},children:"Set 30%"})]}),(0,Le.jsxs)("div",{style:{marginTop:"10px"},children:[(0,Le.jsx)("h4",{children:"Test Transcript Upload:"}),(0,Le.jsx)("button",{onClick:()=>m(75),style:{margin:"5px",padding:"8px 12px"},children:"Upload 75% Transcript"}),(0,Le.jsx)("button",{onClick:()=>m(55),style:{margin:"5px",padding:"8px 12px"},children:"Upload 55% Transcript"})]})]}),(0,Le.jsxs)("div",{style:{padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",marginBottom:"20px"},children:[(0,Le.jsx)("h3",{children:"Current Course Requirements"}),(0,Le.jsx)("ul",{children:s.map(e=>(0,Le.jsxs)("li",{children:[(0,Le.jsxs)("strong",{children:[e.name," - ",e.institutionName]})," - Minimum Grade: ",e.minGrade,"%",o>=e.minGrade?" You qualify":" You do not qualify"]},e.id))})]}),(0,Le.jsxs)("h3",{children:["Courses You Qualify For (",n.length,")"]}),0===n.length?(0,Le.jsxs)("div",{style:{padding:"20px",backgroundColor:"#ffe6e6",borderRadius:"8px",textAlign:"center"},children:[(0,Le.jsx)("h4",{children:"No Qualified Courses Found"}),(0,Le.jsxs)("p",{children:["Your current grade (",o,"%) doesn't meet the requirements for any available courses."]}),(0,Le.jsx)("p",{children:(0,Le.jsx)("strong",{children:"Try setting a higher test grade using the buttons above."})})]}):(0,Le.jsx)("div",{style:{display:"grid",gap:"15px"},children:n.map(e=>(0,Le.jsxs)("div",{style:{border:"2px solid #28a745",borderRadius:"8px",padding:"15px",backgroundColor:"#f8fff9"},children:[(0,Le.jsxs)("h4",{children:[e.name," - ",e.institutionName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Faculty:"})," ",e.facultyName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Requirements:"})," ",e.requirements]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Minimum Grade:"})," ",e.minGrade,"%"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Your Grade:"})," ",o,"% QUALIFIED"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Available Slots:"})," ",e.availableSlots]}),(0,Le.jsx)("button",{onClick:()=>{alert("Applying to ".concat(e.name))},style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Apply Now"})]},e.id))}),(0,Le.jsxs)("h3",{style:{marginTop:"30px"},children:["All Available Courses (",s.length,")"]}),(0,Le.jsx)("div",{style:{display:"grid",gap:"15px"},children:s.map(e=>(0,Le.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",backgroundColor:o>=60?"#f8f9fa":"#ffe6e6",opacity:o>=60?1:.7},children:[(0,Le.jsxs)("h4",{children:[e.name," - ",e.institutionName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Minimum Grade:"})," ",e.minGrade,"%"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Your Grade:"})," ",o,"%",o>=e.minGrade?" Qualified":" Does not qualify"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Available Slots:"})," ",e.availableSlots]}),(0,Le.jsx)("button",{onClick:()=>{alert("Applying to ".concat(e.name))},disabled:o<e.minGrade||e.availableSlots<=0,style:{padding:"10px 20px",backgroundColor:o>=e.minGrade?"#28a745":"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:o>=e.minGrade?"pointer":"not-allowed"},children:o>=e.minGrade?"Apply":"Does Not Qualify"})]},e.id))})]})]})},Ge=()=>{const{userProfile:e,updateProfile:t}=Fe(),[n,r]=(0,i.useState)({dateOfBirth:"",gender:"",nationality:"",address:"",emergencyContact:"",highSchool:"",graduationYear:"",academicBackground:"",skills:"",careerInterests:""}),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)("");(0,i.useEffect)(()=>{e&&r({dateOfBirth:e.dateOfBirth||"",gender:e.gender||"",nationality:e.nationality||"",address:e.address||"",emergencyContact:e.emergencyContact||"",highSchool:e.highSchool||"",graduationYear:e.graduationYear||"",academicBackground:e.academicBackground||"",skills:e.skills||"",careerInterests:e.careerInterests||""})},[e]);const c=e=>{const{name:t,value:n}=e.target;r(e=>(0,Pe.A)((0,Pe.A)({},e),{},{[t]:n}))};return(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"Student Profile"})}),(0,Le.jsxs)("div",{className:"admin-form",children:[o&&(0,Le.jsx)("div",{className:"message ".concat(o.includes("Error")?"error-message":"success-message"),children:o}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(!0),l("");try{await t(n),l("Profile updated successfully!")}catch(r){l("Error updating profile: "+r.message)}finally{a(!1)}},children:[(0,Le.jsx)("h4",{children:"Personal Information"}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Date of Birth"}),(0,Le.jsx)("input",{type:"date",name:"dateOfBirth",value:n.dateOfBirth,onChange:c})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Gender"}),(0,Le.jsxs)("select",{name:"gender",value:n.gender,onChange:c,children:[(0,Le.jsx)("option",{value:"",children:"Select Gender"}),(0,Le.jsx)("option",{value:"male",children:"Male"}),(0,Le.jsx)("option",{value:"female",children:"Female"}),(0,Le.jsx)("option",{value:"other",children:"Other"}),(0,Le.jsx)("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Nationality"}),(0,Le.jsx)("input",{type:"text",name:"nationality",value:n.nationality,onChange:c,placeholder:"Your nationality"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Emergency Contact"}),(0,Le.jsx)("input",{type:"text",name:"emergencyContact",value:n.emergencyContact,onChange:c,placeholder:"Emergency contact number"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Address"}),(0,Le.jsx)("textarea",{name:"address",value:n.address,onChange:c,rows:"3",placeholder:"Your current address"})]}),(0,Le.jsx)("h4",{children:"Academic Background"}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"High School"}),(0,Le.jsx)("input",{type:"text",name:"highSchool",value:n.highSchool,onChange:c,placeholder:"Name of your high school"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Graduation Year"}),(0,Le.jsx)("input",{type:"number",name:"graduationYear",value:n.graduationYear,onChange:c,min:"1980",max:"2024",placeholder:"Year of graduation"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Academic Background"}),(0,Le.jsx)("textarea",{name:"academicBackground",value:n.academicBackground,onChange:c,rows:"3",placeholder:"Previous education, qualifications, etc."})]}),(0,Le.jsx)("h4",{children:"Career Information"}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Skills"}),(0,Le.jsx)("textarea",{name:"skills",value:n.skills,onChange:c,rows:"2",placeholder:"List your skills (comma separated)"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Career Interests"}),(0,Le.jsx)("textarea",{name:"careerInterests",value:n.careerInterests,onChange:c,rows:"2",placeholder:"Your career interests and goals"})]}),(0,Le.jsx)("div",{className:"form-actions",children:(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Updating...":"Update Profile"})})]})]})]})},We=async(e,t)=>{try{console.log("\ud83d\udd0d Evaluating qualifications for student:",e);const n=await(0,De.x7)((0,De.H9)(Oe.db,"users",e));if(!n.exists())throw new Error("Student profile not found");const r=n.data(),i=Ke(t),s=(0,De.P)((0,De.rJ)(Oe.db,"admissions"),(0,De._M)("status","==","open")),a=await(0,De.GG)(s),o=[];for(const e of a.docs){const t=(0,Pe.A)({id:e.id},e.data()),n=await(0,De.x7)((0,De.H9)(Oe.db,"courses",t.courseId));if(!n.exists())continue;const s=n.data(),a=await Ye(r,i,s,t);a.qualified&&o.push((0,Pe.A)((0,Pe.A)({},t),{},{course:s,matchScore:a.matchScore,qualificationReasons:a.reasons,institution:await tt(t.institutionId)}))}return o.sort((e,t)=>t.matchScore-e.matchScore),console.log("\u2705 Found qualified admissions:",o.length),o}catch(n){throw console.error("\u274c Error evaluating qualifications:",n),n}},Ke=e=>({mathematics:Qe(e,["math","mathematics"]),english:Qe(e,["english","language"]),science:Qe(e,["science","physics","chemistry","biology"]),overall:Je(e)}),Qe=(e,t)=>{for(const n of t)if(e.toLowerCase().includes(n)){const t=e.match(new RegExp("".concat(n,"[^A-D]*([A-D][+]*)"),"i"));if(t){const e=t[1].replace("+","");return console.log("Extracted grade for ".concat(n,": ").concat(e)),e}}return console.log("No grade found for keywords: ".concat(t.join(", "),", using default A")),"A"},Je=e=>{const t=e.match(/Average Marks:\s*([0-9.]+)\s*%/i);if(t){const e=parseFloat(t[1]);return e>=90?"A":e>=80?"B":e>=70?"C":e>=60?"D":"F"}return e.includes("A")?"A":e.includes("B")?"B":(e.includes("C"),"C")},Ye=async(e,t,n,r)=>{let i=0;const s=[],a=n.requirements||"";console.log("Evaluating qualification for course:",n.name),console.log("Student grades:",t),console.log("Requirements:",a);const o=$e(t,a);i+=40*o,console.log("Academic score:",o,"Match score so far:",i),o>.7&&s.push("Meets academic requirements");const l=Xe(t,a);i+=30*l,console.log("Subject score:",l,"Match score so far:",i),l>.7&&s.push("Meets subject-specific requirements");const c=Ze(e.educationLevel,n.minEducationLevel);i+=15*c,console.log("Education score:",c,"Match score so far:",i),1===c&&s.push("Education level matches requirements");const u=et(e,a);i+=15*u,console.log("Additional score:",u,"Final match score:",i),u>0&&s.push("Has additional relevant qualifications");const d=i>=40;return console.log("Qualified:",d,"Reasons:",s),{qualified:d,matchScore:Math.round(i),reasons:s}},$e=(e,t)=>{const n=e.overall;return t.includes("distinction")||t.includes("A")?"A"===n?1:"B"===n?.7:.3:t.includes("merit")||t.includes("B")?"A"===n||"B"===n?1:"C"===n?.7:.3:t.includes("credit")||t.includes("C")?"A"===n||"B"===n||"C"===n?1:.5:.8},Xe=(e,t)=>{let n=0,r=0;return t.toLowerCase().includes("math")&&(r++,"A"===e.mathematics?n+=1:"B"===e.mathematics?n+=.9:"C"===e.mathematics?n+=.8:n+=.5),t.toLowerCase().includes("english")&&(r++,"A"===e.english?n+=1:"B"===e.english?n+=.9:"C"===e.english?n+=.8:n+=.5),t.toLowerCase().includes("science")&&(r++,"A"===e.science?n+=1:"B"===e.science?n+=.9:"C"===e.science?n+=.8:n+=.5),r>0?n/r:.7},Ze=(e,t)=>{const n={"high-school":1,diploma:2,bachelors:3,masters:4,phd:5},r=n[e]||0,i=n[t]||0;return r>=i?1:r>=i-1?.7:0},et=(e,t)=>{let n=0;if(e.certificates&&e.certificates.length>0&&(n+=.3),e.skills&&t){e.skills.split(",").filter(e=>t.toLowerCase().includes(e.trim().toLowerCase())).length>0&&(n+=.3)}return e.workExperience&&(n+=.4),n+=.5,Math.min(n,1)},tt=async e=>{try{const t=await(0,De.x7)((0,De.H9)(Oe.db,"users",e));return t.exists()?t.data():null}catch(t){return console.error("Error fetching institution details:",t),null}},nt=async(e,t)=>{try{const r=await(0,De.x7)((0,De.H9)(Oe.db,"users",e));if(!r.exists())throw new Error("Student profile not found");const i=r.data(),s=[];for(const a of t){const t=(0,De.P)((0,De.rJ)(Oe.db,"applications"),(0,De._M)("studentId","==",e),(0,De._M)("admissionId","==",a.id));if((await(0,De.GG)(t)).empty){var n;const t={studentId:e,studentName:i.name,studentEmail:i.email,studentPhone:i.phone,admissionId:a.id,institutionId:a.institutionId,institutionName:null===(n=a.institution)||void 0===n?void 0:n.institutionName,courseId:a.courseId,courseName:a.course.name,intakeYear:a.intakeYear,intakeSemester:a.intakeSemester,status:"pending",appliedAt:(new Date).toISOString(),applicationNumber:"AUTO-APP-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,5)),matchScore:a.matchScore,automaticApplication:!0,qualificationReasons:a.qualificationReasons},r=await(0,De.gS)((0,De.rJ)(Oe.db,"applications"),t);s.push((0,Pe.A)({id:r.id},t)),await rt(a.id)}}return s}catch(r){throw console.error("Error submitting automatic applications:",r),r}},rt=async e=>{try{const t=(0,De.H9)(Oe.db,"admissions",e),n=await(0,De.x7)(t);if(n.exists()){const e=n.data();await(0,De.mZ)(t,{applicationsReceived:(e.applicationsReceived||0)+1})}}catch(t){console.error("Error updating admission count:",t)}},it=e=>{let{qualifiedPrograms:t,onClose:n,onApply:r}=e;const[s,a]=(0,i.useState)(t.slice(0,4)),[o,l]=(0,i.useState)(!1),c=e=>{a(n=>{if(n.find(t=>t.id===e))return n.filter(t=>t.id!==e);{const r=t.find(t=>t.id===e);return[...n,r]}})};return(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Le.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"2rem",maxWidth:"800px",maxHeight:"80vh",overflow:"auto",width:"90%"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,Le.jsx)("h3",{children:"Qualified Programs Found!"}),(0,Le.jsx)("button",{onClick:n,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"\xd7"})]}),(0,Le.jsxs)("p",{style:{marginBottom:"1.5rem",color:"#666"},children:["Based on your uploaded transcript, we found ",t.length," programs you qualify for. Select the programs you'd like to apply to automatically."]}),(0,Le.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,Le.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,Le.jsx)("button",{onClick:()=>a(t),style:{padding:"0.5rem 1rem",background:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Select All"}),(0,Le.jsx)("button",{onClick:()=>a([]),style:{padding:"0.5rem 1rem",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Deselect All"}),(0,Le.jsxs)("span",{style:{alignSelf:"center",color:"#666"},children:["Selected: ",s.length," of ",t.length]})]})}),(0,Le.jsx)("div",{style:{maxHeight:"400px",overflow:"auto",marginBottom:"1.5rem"},children:t.map(e=>{var t;const n=s.find(t=>t.id===e.id);return(0,Le.jsxs)("div",{style:{border:"2px solid ".concat(n?"#007bff":"#ddd"),borderRadius:"8px",padding:"1rem",marginBottom:"1rem",background:n?"#f0f8ff":"white",cursor:"pointer"},onClick:()=>c(e.id),children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{style:{margin:0},children:e.courseName}),(0,Le.jsx)("p",{style:{margin:"0.25rem 0",color:"#666"},children:null===(t=e.institution)||void 0===t?void 0:t.institutionName}),(0,Le.jsxs)("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem",color:"#666"},children:["Intake: ",e.intakeYear," ",e.intakeSemester]})]}),(0,Le.jsxs)("div",{style:{textAlign:"right"},children:[(0,Le.jsxs)("div",{style:{padding:"0.5rem 1rem",background:(r=e.matchScore,r>=90?"#28a745":r>=80?"#20c997":r>=70?"#007bff":r>=60?"#ffc107":"#dc3545"),color:"white",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"bold",display:"inline-block"},children:[e.matchScore,"% Match"]}),(0,Le.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,Le.jsx)("input",{type:"checkbox",checked:n,onChange:()=>c(e.id),style:{marginRight:"0.5rem"}}),"Apply"]})]})]}),e.qualificationReasons&&e.qualificationReasons.length>0&&(0,Le.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"500",fontSize:"0.9rem"},children:"Why you qualify:"}),(0,Le.jsx)("ul",{style:{margin:0,paddingLeft:"1.5rem",fontSize:"0.8rem"},children:e.qualificationReasons.map((e,t)=>(0,Le.jsx)("li",{children:e},t))})]})]},e.id);var r})}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("button",{onClick:n,style:{padding:"0.75rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),(0,Le.jsx)("button",{onClick:async()=>{l(!0);try{await r(s),n()}catch(e){console.error("Error applying:",e)}finally{l(!1)}},disabled:0===s.length||o,style:{padding:"0.75rem 1.5rem",background:0===s.length?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:0===s.length?"not-allowed":"pointer"},children:o?"Applying...":"Apply to ".concat(s.length," Programs")})]})]})})},st=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{f()},[e]);const f=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"documents"),(0,De._M)("studentId","==",e.uid)),r=await(0,De.GG)(t),i=[];r.forEach(e=>{i.push((0,Pe.A)({id:e.id},e.data()))}),n(i)}catch(t){console.error("Error loading documents:",t)}},m=async t=>{if(e&&e.uid){d(!0);try{const n=await g(t),r=await We(e.uid,n);r.length>0?(o(r),p(!0),await(0,De.mZ)((0,De.H9)(Oe.db,"users",e.uid),{academicResults:n,lastQualificationCheck:(new Date).toISOString()})):alert('Transcript uploaded successfully! However, no qualified programs were found based on your results. You can manually enter your results in the "Auto Apply" tab for more detailed evaluation.')}catch(n){console.error("Error evaluating qualifications:",n),alert('Transcript uploaded successfully! However, there was an error evaluating your qualifications. Please try the "Auto Apply" tab for manual evaluation.')}finally{d(!1)}}else alert("Please log in to evaluate qualifications")},g=async e=>new Promise(e=>{setTimeout(()=>{e("Mathematics - A, English - B, Science - A, Overall - Distinction")},2e3)}),v=async t=>{try{await nt(e.uid,t),alert("Successfully applied to ".concat(t.length," programs!"))}catch(n){throw console.error("Error submitting applications:",n),n}},y=e=>{switch(e){case"transcript":return"Transcript";case"certificate":return"Certificate";case"id":return"ID";case"photo":return"Photo";case"recommendation":return"Recommendation";default:return"Document"}};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Document Management"}),(0,Le.jsx)("p",{children:"Upload and manage your academic documents and certificates"})]}),[{title:"Academic Documents",type:"academic",documents:[{type:"transcript",name:"Academic Transcripts",description:"Upload your high school or previous academic transcripts"},{type:"certificate",name:"Certificates",description:"Academic certificates and qualifications"}]},{title:"Identification",type:"identification",documents:[{type:"id",name:"ID Document",description:"National ID or passport"},{type:"photo",name:"Passport Photo",description:"Recent passport-sized photograph"}]},{title:"Additional Documents",type:"additional",documents:[{type:"recommendation",name:"Recommendation Letters",description:"Letters of recommendation from teachers or employers"},{type:"portfolio",name:"Portfolio",description:"Work portfolio (if applicable)"}]}].map(n=>(0,Le.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,Le.jsx)("h4",{children:n.title}),(0,Le.jsx)("div",{className:"application-cards",children:n.documents.map(n=>{const i=t.find(e=>e.documentType===n.type);return(0,Le.jsxs)("div",{className:"application-card",children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[(0,Le.jsx)("span",{style:{fontSize:"2rem",marginRight:"1rem"},children:y(n.type)}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h5",{style:{margin:0},children:n.name}),(0,Le.jsx)("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:n.description})]})]}),i?(0,Le.jsxs)("div",{className:"document-item",children:[(0,Le.jsxs)("div",{className:"document-info",children:[(0,Le.jsx)("h6",{style:{margin:0},children:i.fileName}),(0,Le.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#666"},children:["Uploaded: ",new Date(i.uploadedAt).toLocaleDateString()," \u2022 Size: ",(i.fileSize/1024/1024).toFixed(2)," MB"]}),(0,Le.jsx)("span",{className:"application-status status-".concat(i.status),children:i.status})]}),(0,Le.jsxs)("div",{className:"document-actions",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",children:"View"}),(0,Le.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this document?"))try{await(0,De.kd)((0,De.H9)(Oe.db,"documents",e)),f()}catch(t){console.error("Error deleting document:",t),alert("Error deleting document. Please try again.")}})(i.id),children:"Delete"})]})]}):(0,Le.jsxs)("div",{className:"document-upload",children:[(0,Le.jsx)("input",{type:"file",id:"file-".concat(n.type),onChange:t=>(async(t,n)=>{const r=t.target.files[0];if(r){if("transcript"===n&&!r.type.includes("pdf"))return alert("Please upload only PDF files for academic transcripts."),void(t.target.value="");s(!0);try{const t={studentId:e.uid,studentName:e.name,documentType:n,fileName:r.name,fileSize:r.size,fileType:r.type,uploadedAt:(new Date).toISOString(),status:"uploaded",fileUrl:"https://example.com/documents/".concat(e.uid,"/").concat(r.name)};await(0,De.gS)((0,De.rJ)(Oe.db,"documents"),t),f(),"transcript"===n?await m(r):alert("Document uploaded successfully!")}catch(i){console.error("Error uploading document:",i),alert("Error uploading document. Please try again.")}finally{s(!1),t.target.value=""}}})(t,n.type),disabled:r,accept:"transcript"===n.type?".pdf":".pdf,.doc,.docx,.jpg,.jpeg,.png"}),(0,Le.jsx)("label",{htmlFor:"file-".concat(n.type),className:"upload-label",children:r?"Uploading...":"Upload ".concat(n.name)}),(0,Le.jsx)("p",{style:{fontSize:"0.8rem",color:"#666",margin:"0.5rem 0 0 0"},children:"transcript"===n.type?"Supported format: PDF only (Max: 10MB)":"Supported formats: PDF, DOC, JPG, PNG (Max: 10MB)"})]})]},n.type)})})]},n.type)),h&&a.length>0&&(0,Le.jsx)("div",{style:{marginTop:"2rem",marginBottom:"2rem"},children:(0,Le.jsxs)("div",{style:{background:"#d4edda",border:"1px solid #c3e6cb",padding:"1.5rem",borderRadius:"8px"},children:[(0,Le.jsx)("h4",{style:{color:"#155724",margin:"0 0 1rem 0"},children:"\ud83c\udf89 Qualified Programs Found!"}),(0,Le.jsxs)("p",{style:{color:"#155724",margin:"0 0 1.5rem 0"},children:["Based on your uploaded transcript, we found ",a.length," programs you qualify for. You can apply to these programs automatically."]}),(0,Le.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:a.map(e=>{var t;return(0,Le.jsxs)("div",{style:{background:"white",border:"1px solid #dee2e6",borderRadius:"8px",padding:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h5",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem"},children:e.courseName}),(0,Le.jsx)("p",{style:{margin:"0 0 0.25rem 0",color:"#666",fontSize:"0.9rem"},children:null===(t=e.institution)||void 0===t?void 0:t.institutionName}),(0,Le.jsxs)("p",{style:{margin:0,fontSize:"0.8rem",color:"#666"},children:["Intake: ",e.intakeYear," ",e.intakeSemester]})]}),(0,Le.jsxs)("div",{style:{padding:"0.25rem 0.75rem",background:e.matchScore>=90?"#28a745":e.matchScore>=80?"#20c997":e.matchScore>=70?"#007bff":e.matchScore>=60?"#ffc107":"#dc3545",color:"white",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"bold"},children:[e.matchScore,"% Match"]})]}),e.qualificationReasons&&e.qualificationReasons.length>0&&(0,Le.jsxs)("div",{style:{marginTop:"0.75rem"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.25rem 0",fontWeight:"500",fontSize:"0.8rem"},children:"Why you qualify:"}),(0,Le.jsx)("ul",{style:{margin:0,paddingLeft:"1rem",fontSize:"0.75rem"},children:e.qualificationReasons.slice(0,2).map((e,t)=>(0,Le.jsx)("li",{children:e},t))})]})]},e.id)})}),(0,Le.jsxs)("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:[(0,Le.jsxs)("button",{onClick:()=>v(a),style:{padding:"0.75rem 2rem",background:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:["Apply to All Qualified Programs (",a.length,")"]}),(0,Le.jsx)("button",{onClick:()=>p(!1),style:{padding:"0.75rem 2rem",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",marginLeft:"1rem"},children:"Hide Results"})]})]})}),l&&(0,Le.jsx)(it,{qualifiedPrograms:a,onClose:()=>c(!1),onApply:v}),(0,Le.jsxs)("div",{style:{background:"#fff3cd",padding:"1.5rem",borderRadius:"8px",marginTop:"2rem"},children:[(0,Le.jsx)("h4",{children:"Important Notes"}),(0,Le.jsxs)("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.5rem"},children:[(0,Le.jsx)("li",{children:"Keep your documents updated throughout your academic journey"}),(0,Le.jsx)("li",{children:"Upload final transcripts upon completion of studies"}),(0,Le.jsx)("li",{children:"Additional certificates improve your job application profile"}),(0,Le.jsx)("li",{children:"Documents are securely stored and only shared with authorized institutions/employers"}),(0,Le.jsxs)("li",{children:[(0,Le.jsx)("strong",{children:"Auto Apply:"})," Upload your transcript to automatically discover and apply to qualified programs"]})]})]})]})},at=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)({academicGrades:"",personalStatement:"",references:"",additionalInfo:""});(0,i.useEffect)(()=>{h(),p()},[e]);const h=async()=>{try{const e=(0,De.P)((0,De.rJ)(Oe.db,"admissions"),(0,De._M)("status","==","open")),t=await(0,De.GG)(e),r=[];t.forEach(e=>{r.push((0,Pe.A)({id:e.id},e.data()))}),n(r)}catch(e){console.error("Error loading admissions:",e)}},p=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"applications"),(0,De._M)("studentId","==",e.uid)),n=await(0,De.GG)(t),r=[];n.forEach(e=>{r.push((0,Pe.A)({id:e.id},e.data()))}),s(r)}catch(t){console.error("Error loading applications:",t)}},f=e=>r.filter(t=>t.institutionId===e).length<2;return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Course Applications"}),(0,Le.jsx)("p",{children:"You can apply to maximum 2 courses per institution"})]}),a&&l&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsxs)("h4",{children:["Apply for ",l.courseName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Institution:"})," ",l.institutionName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Intake:"})," ",l.intakeYear," ",l.intakeSemester]}),(0,Le.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l&&e)try{const t=(0,Pe.A)((0,Pe.A)({studentId:e.uid,studentName:e.name,studentEmail:e.email,studentPhone:e.phone,admissionId:l.id,institutionId:l.institutionId,institutionName:l.institutionName,courseId:l.courseId,courseName:l.courseName,intakeYear:l.intakeYear,intakeSemester:l.intakeSemester},u),{},{status:"pending",appliedAt:(new Date).toISOString(),applicationNumber:"APP-".concat(Date.now())});await(0,De.gS)((0,De.rJ)(Oe.db,"applications"),t);const n=(0,De.H9)(Oe.db,"admissions",l.id),r=await getDoc(n);if(r.exists()){const e=r.data();await(0,De.mZ)(n,{applicationsReceived:(e.applicationsReceived||0)+1})}o(!1),c(null),d({academicGrades:"",personalStatement:"",references:"",additionalInfo:""}),p(),alert("Application submitted successfully!")}catch(n){console.error("Error submitting application:",n),alert("Error submitting application. Please try again.")}},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Academic Grades/Results"}),(0,Le.jsx)("textarea",{value:u.academicGrades,onChange:e=>d((0,Pe.A)((0,Pe.A)({},u),{},{academicGrades:e.target.value})),rows:"3",placeholder:"Enter your academic grades or attach relevant results...",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Personal Statement"}),(0,Le.jsx)("textarea",{value:u.personalStatement,onChange:e=>d((0,Pe.A)((0,Pe.A)({},u),{},{personalStatement:e.target.value})),rows:"4",placeholder:"Why do you want to study this course? What are your career goals?",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"References"}),(0,Le.jsx)("textarea",{value:u.references,onChange:e=>d((0,Pe.A)((0,Pe.A)({},u),{},{references:e.target.value})),rows:"2",placeholder:"Names and contact information of references (teachers, employers, etc.)"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Additional Information"}),(0,Le.jsx)("textarea",{value:u.additionalInfo,onChange:e=>d((0,Pe.A)((0,Pe.A)({},u),{},{additionalInfo:e.target.value})),rows:"2",placeholder:"Any additional information you'd like to provide..."})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{o(!1),c(null)},children:"Cancel"})]})]})]}),(0,Le.jsx)("h4",{children:"Available Courses"}),(0,Le.jsx)("div",{className:"application-cards",children:t.map(e=>{const t=(e=>{const t=r.find(t=>t.admissionId===e);return t?t.status:null})(e.id),n=f(e.institutionId);return(0,Le.jsxs)("div",{className:"application-card",children:[(0,Le.jsx)("h4",{children:e.courseName}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Institution:"})," ",e.institutionName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Intake:"})," ",e.intakeYear," ",e.intakeSemester]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Application Deadline:"})," ",new Date(e.applicationDeadline).toLocaleDateString()]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Seats Available:"})," ",e.seatsAvailable]}),t?(0,Le.jsxs)("div",{className:"application-status status-pending",children:["Already Applied - ",t]}):(0,Le.jsx)("button",{className:"btn ".concat(n?"btn-primary":"btn-secondary"),onClick:()=>(e=>{f(e.institutionId)?(c(e),o(!0)):alert("You can only apply to maximum 2 courses per institution.")})(e),disabled:!n,style:{marginTop:"1rem",width:"100%"},children:n?"Apply Now":"Max Applications Reached"})]},e.id)})}),(0,Le.jsx)("h4",{children:"My Applications"}),0===r.length?(0,Le.jsx)("p",{children:"You haven't submitted any applications yet."}):(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Course"}),(0,Le.jsx)("th",{children:"Institution"}),(0,Le.jsx)("th",{children:"Applied On"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Application ID"})]})}),(0,Le.jsx)("tbody",{children:r.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.courseName}),(0,Le.jsx)("td",{children:e.institutionName}),(0,Le.jsx)("td",{children:new Date(e.appliedAt).toLocaleDateString()}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"application-status status-".concat(e.status),children:e.status})}),(0,Le.jsx)("td",{children:e.applicationNumber})]},e.id))})]})})})]})},ot=()=>{const{userProfile:e,currentUser:t}=Fe(),n=ee(),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[f,m]=(0,i.useState)(""),[g,v]=(0,i.useState)(null),[y,b]=(0,i.useState)(!1),[w,x]=(0,i.useState)("");(0,i.useEffect)(()=>{null!==e&&void 0!==e&&e.academicResults&&x(e.academicResults)},[e]);const j=async e=>new Promise(e=>{setTimeout(()=>{e("Mathematics - A, English - B, Science - A, Overall - Distinction")},2e3)}),S=async t=>{if(e&&e.uid){d(!0),m("");try{const n=await We(e.uid,t);s(n),o(n.slice(0,4)),0===n.length?m("Transcript uploaded successfully! However, no qualified programs were found based on your results."):m("Transcript uploaded successfully! Found ".concat(n.length," programs you qualify for!"))}catch(n){m("Transcript uploaded successfully! However, there was an error evaluating your qualifications.")}finally{d(!1)}}else m("Please log in to evaluate qualifications")},E=e=>e>=90?"#28a745":e>=80?"#20c997":e>=70?"#007bff":e>=60?"#ffc107":"#dc3545";return(0,i.useEffect)(()=>{t?t.emailVerified||n("/auth/verify-email"):n("/auth/login")},[t,n]),(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Automatic Course Applications"}),(0,Le.jsx)("p",{children:"Upload your academic results to discover programs you qualify for"})]}),(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:"Upload Academic Transcript"}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Upload PDF Transcript"}),(0,Le.jsx)("input",{type:"file",onChange:async e=>{const t=e.target.files[0];if(t){if(!t.type.includes("pdf"))return alert("Please upload only PDF files for academic transcripts."),void(e.target.value="");b(!0),v(t);try{const e=await j(t);x(e),await S(e)}catch(n){console.error("Error processing file:",n),alert("Error processing the uploaded file. Please try again.")}finally{b(!1),e.target.value=""}}},disabled:y,accept:".pdf",style:{width:"100%",padding:"1rem",border:"1px solid #ddd",borderRadius:"6px"}}),(0,Le.jsx)("small",{children:"Upload your academic transcript in PDF format. The system will automatically extract your results and find qualified programs."})]}),y&&(0,Le.jsx)("div",{style:{textAlign:"center",padding:"1rem"},children:"Processing transcript..."})]}),f&&(0,Le.jsx)("div",{className:"message ".concat(f.includes("Error")?"error-message":"success-message"),children:f}),r.length>0&&(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h4",{children:"Programs You Qualify For"}),(0,Le.jsxs)("div",{className:"table-actions",children:[(0,Le.jsx)("button",{onClick:()=>{o(r)},className:"btn btn-secondary",children:"Select All"}),(0,Le.jsx)("button",{onClick:()=>{o([])},className:"btn btn-secondary",children:"Deselect All"}),(0,Le.jsxs)("span",{children:["Selected: ",a.length," of ",r.length]})]})]}),(0,Le.jsx)("div",{className:"application-cards",children:r.map(e=>{var t,n;const i=a.find(t=>t.id===e.id),s=(l=e.matchScore)>=90?"excellent":l>=80?"very-high":l>=70?"high":l>=60?"good":"fair";var l;return(0,Le.jsxs)("div",{className:"application-card ".concat(i?"selected":""),style:{borderLeft:"4px solid ".concat(E(e.matchScore)),background:i?"#f0f8ff":"white"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{children:e.courseName}),(0,Le.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#333"},children:null===(t=e.institution)||void 0===t?void 0:t.institutionName})]}),(0,Le.jsxs)("div",{style:{textAlign:"right"},children:[(0,Le.jsxs)("div",{style:{padding:"0.5rem 1rem",background:E(e.matchScore),color:"white",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"bold"},children:[e.matchScore,"% Match"]}),(0,Le.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",color:"#666"},children:s.replace("-"," ")})]})]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Intake:"})," ",e.intakeYear," ",e.intakeSemester]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Location:"})," ",null===(n=e.institution)||void 0===n?void 0:n.location]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Application Deadline:"})," ",new Date(e.applicationDeadline).toLocaleDateString()]}),e.qualificationReasons&&e.qualificationReasons.length>0&&(0,Le.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"500"},children:"Why you qualify:"}),(0,Le.jsx)("ul",{style:{margin:0,paddingLeft:"1.5rem",fontSize:"0.9rem"},children:e.qualificationReasons.map((e,t)=>(0,Le.jsx)("li",{children:e},t))})]}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[(0,Le.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,Le.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{return t=e.id,void o(e=>{if(e.find(e=>e.id===t))return e.filter(e=>e.id!==t);{const n=r.find(e=>e.id===t);return[...e,n]}});var t},style:{marginRight:"0.5rem"}}),"Apply to this program"]}),(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>{var t;return window.open(null===(t=e.institution)||void 0===t?void 0:t.website,"_blank")},style:{fontSize:"0.8rem"},children:"View Institution"})]})]},e.id)})}),(0,Le.jsxs)("div",{className:"form-actions",style:{marginTop:"2rem",justifyContent:"center"},children:[(0,Le.jsx)("button",{onClick:async()=>{if(0!==a.length){p(!0),m("");try{const t=await nt(e.uid,a);await(0,De.mZ)((0,De.H9)(Oe.db,"users",e.uid),{academicResults:w,lastQualificationCheck:(new Date).toISOString()}),m("Successfully submitted ".concat(t.length," applications!")),s([]),o([])}catch(t){m("Error submitting applications: "+t.message)}finally{p(!1)}}else m("Please select at least one program to apply for")},disabled:h||0===a.length,className:"btn btn-primary",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:h?"Submitting Applications...":"Apply to All"}),(0,Le.jsx)("button",{onClick:()=>{s([]),o([]),m("")},className:"btn btn-secondary",style:{padding:"1rem 2rem",fontSize:"1.1rem",marginLeft:"1rem"},children:"Hide Results"})]}),(0,Le.jsxs)("div",{style:{background:"#e7f3ff",padding:"1.5rem",borderRadius:"8px",marginTop:"2rem"},children:[(0,Le.jsx)("h5",{children:"Application Summary"}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:r.length}),(0,Le.jsx)("div",{children:"Programs Found"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745"},children:a.length}),(0,Le.jsx)("div",{children:"Selected"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107"},children:[Math.round(r.reduce((e,t)=>e+t.matchScore,0)/r.length),"%"]}),(0,Le.jsx)("div",{children:"Average Match"})]})]})]})]})]})},lt=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)("all");(0,i.useEffect)(()=>{a()},[e]);const a=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"applications"),(0,De._M)("studentId","==",e.uid)),r=await(0,De.GG)(t),i=[];r.forEach(e=>{i.push((0,Pe.A)({id:e.id},e.data()))}),i.sort((e,t)=>new Date(t.reviewedAt||t.appliedAt)-new Date(e.reviewedAt||e.appliedAt)),n(i)}catch(t){console.error("Error loading applications:",t)}},o=t.filter(e=>"all"===r||e.status===r),l=e=>{switch(e.status){case"approved":return"Congratulations! You have been accepted into ".concat(e.courseName,". Please check your email for enrollment instructions.");case"rejected":return"Your application for ".concat(e.courseName," was not successful at this time.");case"pending":return"Your application is under review. You will be notified when a decision is made.";default:return"Application submitted."}};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Admissions Results"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsxs)("select",{value:r,onChange:e=>s(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Applications"}),(0,Le.jsx)("option",{value:"pending",children:"Pending"}),(0,Le.jsx)("option",{value:"approved",children:"Approved"}),(0,Le.jsx)("option",{value:"rejected",children:"Rejected"})]})})]}),0===o.length?(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[(0,Le.jsx)("h4",{children:"No applications found"}),(0,Le.jsx)("p",{children:"You haven't submitted any course applications yet."})]}):(0,Le.jsx)("div",{className:"application-cards",children:o.map(e=>(0,Le.jsxs)("div",{className:"application-card ".concat(e.status),children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,Le.jsx)("h4",{children:e.courseName}),(0,Le.jsx)("span",{style:{fontSize:"1.5rem"},children:(e.status,"")})]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Institution:"})," ",e.institutionName]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Applied On:"})," ",new Date(e.appliedAt).toLocaleDateString()]}),e.reviewedAt&&(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Decision Date:"})," ",new Date(e.reviewedAt).toLocaleDateString()]}),e.reviewedBy&&(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Reviewed By:"})," ",e.reviewedBy]}),(0,Le.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#f8f9fa",borderRadius:"6px",borderLeft:"4px solid ".concat("approved"===e.status?"#28a745":"rejected"===e.status?"#dc3545":"#ffc107")},children:[(0,Le.jsx)("strong",{children:"Status: "}),(0,Le.jsx)("span",{className:"application-status status-".concat(e.status),children:e.status.toUpperCase()}),(0,Le.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:l(e)})]}),"approved"===e.status&&(0,Le.jsx)("button",{className:"btn btn-success",style:{marginTop:"1rem",width:"100%"},children:"Accept Offer & Enroll"})]},e.id))}),(0,Le.jsxs)("div",{style:{background:"#e7f3ff",padding:"1.5rem",borderRadius:"8px",marginTop:"2rem"},children:[(0,Le.jsx)("h4",{children:"\ud83d\udccb Application Statistics"}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:t.length}),(0,Le.jsx)("div",{children:"Total Applications"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745"},children:t.filter(e=>"approved"===e.status).length}),(0,Le.jsx)("div",{children:"Approved"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#dc3545"},children:t.filter(e=>"rejected"===e.status).length}),(0,Le.jsx)("div",{children:"Rejected"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107"},children:t.filter(e=>"pending"===e.status).length}),(0,Le.jsx)("div",{children:"Pending"})]})]})]})]})},ct=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)("all");(0,i.useEffect)(()=>{l(),c()},[e]);const l=async()=>{try{const e=(0,De.P)((0,De.rJ)(Oe.db,"jobPostings"),(0,De._M)("status","==","active")),t=await(0,De.GG)(e),r=[];t.forEach(e=>{r.push((0,Pe.A)({id:e.id},e.data()))}),n(r)}catch(e){console.error("Error loading job postings:",e)}},c=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"jobApplications"),(0,De._M)("studentId","==",e.uid)),n=await(0,De.GG)(t),r=[];n.forEach(e=>{r.push((0,Pe.A)({id:e.id},e.data()))}),s(r)}catch(t){console.error("Error loading job applications:",t)}},u=e=>r.some(t=>t.jobId===e),d=t.filter(e=>"all"===a||("notApplied"===a?!u(e.id):"applied"!==a||u(e.id))),h=e=>{switch(e){case"full-time":return"#28a745";case"part-time":return"#007bff";case"internship":return"#ffc107";case"contract":return"#6c757d";default:return"#999"}};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Job Portal"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsxs)("select",{value:a,onChange:e=>o(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Jobs"}),(0,Le.jsx)("option",{value:"notApplied",children:"Not Applied"}),(0,Le.jsx)("option",{value:"applied",children:"Applied"})]})})]}),(0,Le.jsx)("div",{className:"application-cards",children:d.map(t=>{const n=u(t.id);return(0,Le.jsxs)("div",{className:"application-card",children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{children:t.title}),(0,Le.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#333"},children:t.companyName})]}),(0,Le.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem",fontWeight:"500",background:h(t.type),color:"white"},children:t.type})]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Location:"})," ",t.location]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Salary:"})," ",t.salary||"Negotiable"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Posted:"})," ",new Date(t.postedAt).toLocaleDateString()]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Deadline:"})," ",new Date(t.deadline).toLocaleDateString()]}),(0,Le.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"500"},children:"Requirements:"}),(0,Le.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",margin:0},children:t.requirements})]}),n?(0,Le.jsx)("div",{className:"application-status status-pending",children:"Application Submitted"}):(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>(async t=>{if(e)try{const n={studentId:e.uid,studentName:e.name,studentEmail:e.email,studentPhone:e.phone,jobId:t.id,jobTitle:t.title,companyName:t.companyName,appliedAt:(new Date).toISOString(),status:"pending",coverLetter:"I am interested in the ".concat(t.title," position at ").concat(t.companyName,". My skills and experience align well with your requirements."),applicationNumber:"JOB-APP-".concat(Date.now())};await(0,De.gS)((0,De.rJ)(Oe.db,"jobApplications"),n),c(),alert("Job application submitted successfully!")}catch(n){console.error("Error applying for job:",n),alert("Error submitting application. Please try again.")}})(t),style:{width:"100%",marginTop:"1rem"},children:"Apply Now"})]},t.id)})}),0===d.length&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[(0,Le.jsx)("h4",{children:"No job postings found"}),(0,Le.jsx)("p",{children:"There are currently no job opportunities matching your criteria."})]}),(0,Le.jsxs)("div",{style:{background:"#e7f3ff",padding:"1.5rem",borderRadius:"8px",marginTop:"2rem"},children:[(0,Le.jsx)("h4",{children:"Job Application Statistics"}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:r.length}),(0,Le.jsx)("div",{children:"Total Applications"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745"},children:r.filter(e=>"approved"===e.status).length}),(0,Le.jsx)("div",{children:"Approved"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#dc3545"},children:r.filter(e=>"rejected"===e.status).length}),(0,Le.jsx)("div",{children:"Rejected"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107"},children:r.filter(e=>"pending"===e.status).length}),(0,Le.jsx)("div",{children:"Pending"})]})]})]})]})},ut=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)("all");(0,i.useEffect)(()=>{a()},[e]);const a=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"notifications"),(0,De._M)("studentId","==",e.uid),(0,De.My)("createdAt","desc")),r=await(0,De.GG)(t),i=[];r.forEach(e=>{i.push((0,Pe.A)({id:e.id},e.data()))}),n(i)}catch(t){console.error("Error loading notifications:",t)}},o=t.filter(e=>"all"===r||("unread"===r?!e.read:"read"===r?e.read:e.type===r)),l=e=>{switch(e){case"admission":return"\ud83c\udf93";case"job":return"\ud83d\udcbc";case"document":return"\ud83d\udcc4";case"system":return"\u2699\ufe0f";case"reminder":return"\u23f0";default:return"\ud83d\udd14"}},c=e=>{switch(e){case"admission":return"#28a745";case"job":return"#007bff";case"document":return"#ffc107";case"system":return"#6c757d";case"reminder":return"#17a2b8";default:return"#999"}},u=t.filter(e=>!e.read).length;return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Notifications"}),(0,Le.jsxs)("div",{className:"table-actions",children:[u>0&&(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:async()=>{try{const e=t.filter(e=>!e.read).map(e=>(0,De.mZ)((0,De.H9)(Oe.db,"notifications",e.id),{read:!0,readAt:(new Date).toISOString()}));await Promise.all(e),a()}catch(e){console.error("Error marking all notifications as read:",e)}},children:"Mark All as Read"}),(0,Le.jsxs)("select",{value:r,onChange:e=>s(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Notifications"}),(0,Le.jsxs)("option",{value:"unread",children:["Unread (",u,")"]}),(0,Le.jsx)("option",{value:"read",children:"Read"}),(0,Le.jsx)("option",{value:"admission",children:"Admissions"}),(0,Le.jsx)("option",{value:"job",children:"Jobs"}),(0,Le.jsx)("option",{value:"document",children:"Documents"})]})]})]}),0===o.length?(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[(0,Le.jsx)("h4",{children:"No notifications found"}),(0,Le.jsx)("p",{children:"You're all caught up! New notifications will appear here."})]}):(0,Le.jsx)("div",{className:"document-list",children:o.map(e=>(0,Le.jsxs)("div",{className:"document-item",style:{borderLeft:"4px solid ".concat(c(e.type)),opacity:e.read?.7:1},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",flex:1},children:[(0,Le.jsx)("span",{style:{fontSize:"1.5rem"},children:l(e.type)}),(0,Le.jsxs)("div",{style:{flex:1},children:[(0,Le.jsx)("h5",{style:{margin:"0 0 0.5rem 0",color:e.read?"#666":"#333"},children:e.title}),(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",color:"#666"},children:e.message}),(0,Le.jsx)("p",{style:{margin:0,fontSize:"0.8rem",color:"#999"},children:new Date(e.createdAt).toLocaleString()})]})]}),!e.read&&(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(async e=>{try{await(0,De.mZ)((0,De.H9)(Oe.db,"notifications",e),{read:!0,readAt:(new Date).toISOString()}),a()}catch(t){console.error("Error marking notification as read:",t)}})(e.id),style:{fontSize:"0.8rem"},children:"Mark as Read"})]},e.id))}),(0,Le.jsxs)("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",marginTop:"2rem"},children:[(0,Le.jsx)("h4",{children:"\ud83d\udcca Notification Summary"}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"1rem",background:"white",borderRadius:"6px"},children:[(0,Le.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#007bff"},children:t.length}),(0,Le.jsx)("div",{children:"Total"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"1rem",background:"white",borderRadius:"6px"},children:[(0,Le.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#dc3545"},children:u}),(0,Le.jsx)("div",{children:"Unread"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"1rem",background:"white",borderRadius:"6px"},children:[(0,Le.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#28a745"},children:t.filter(e=>"admission"===e.type).length}),(0,Le.jsx)("div",{children:"Admissions"})]}),(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"1rem",background:"white",borderRadius:"6px"},children:[(0,Le.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffc107"},children:t.filter(e=>"job"===e.type).length}),(0,Le.jsx)("div",{children:"Jobs"})]})]})]})]})},dt=()=>{const[e,t]=(0,i.useState)({institutionName:"University of Johannesburg",type:"university",location:"Johannesburg, Gauteng",contactEmail:"info@uj.ac.za",contactPhone:"+27 11 559 2000",website:"https://www.uj.ac.za",description:"The University of Johannesburg (UJ) is a public university located in Johannesburg, South Africa. It was established in 2005 through the merger of the Rand Afrikaans University, Technikon Witwatersrand, and the Soweto and East Rand campuses of Vista University.",establishedYear:"2005",accreditation:"Council on Higher Education (CHE), South African Qualifications Authority (SAQA)",totalStudents:"50000",campusFacilities:"Libraries, Computer Labs, Sports Facilities, Student Residences, Medical Center"}),[n,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)("");(0,i.useEffect)(()=>{console.log("Profile loaded")},[]);const o=e=>{const{name:n,value:r}=e.target;t(e=>(0,Pe.A)((0,Pe.A)({},e),{},{[n]:r}))};return(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"Institute Profile"})}),(0,Le.jsxs)("div",{className:"admin-form",children:[s&&(0,Le.jsx)("div",{className:"message ".concat(s.includes("Error")?"error-message":"success-message"),children:s}),(0,Le.jsxs)("form",{onSubmit:t=>{t.preventDefault(),r(!0),a(""),setTimeout(()=>{console.log("Profile updated:",e),a("Profile updated successfully!"),r(!1)},1e3)},children:[(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Institution Name"}),(0,Le.jsx)("input",{type:"text",name:"institutionName",value:e.institutionName,onChange:o,required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Institution Type"}),(0,Le.jsxs)("select",{name:"type",value:e.type,onChange:o,required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Type"}),(0,Le.jsx)("option",{value:"university",children:"University"}),(0,Le.jsx)("option",{value:"college",children:"College"}),(0,Le.jsx)("option",{value:"institute",children:"Institute"}),(0,Le.jsx)("option",{value:"polytechnic",children:"Polytechnic"}),(0,Le.jsx)("option",{value:"vocational",children:"Vocational School"})]})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Location"}),(0,Le.jsx)("input",{type:"text",name:"location",value:e.location,onChange:o,required:!0,placeholder:"City, District"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Established Year"}),(0,Le.jsx)("input",{type:"number",name:"establishedYear",value:e.establishedYear,onChange:o,min:"1900",max:"2024"})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Email"}),(0,Le.jsx)("input",{type:"email",name:"contactEmail",value:e.contactEmail,onChange:o,required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Phone"}),(0,Le.jsx)("input",{type:"tel",name:"contactPhone",value:e.contactPhone,onChange:o,required:!0})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Website"}),(0,Le.jsx)("input",{type:"url",name:"website",value:e.website,onChange:o,placeholder:"https://example.com"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Accreditation"}),(0,Le.jsx)("input",{type:"text",name:"accreditation",value:e.accreditation,onChange:o,placeholder:"Accrediting bodies"})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Total Students"}),(0,Le.jsx)("input",{type:"number",name:"totalStudents",value:e.totalStudents,onChange:o,min:"0"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Campus Facilities"}),(0,Le.jsx)("input",{type:"text",name:"campusFacilities",value:e.campusFacilities,onChange:o,placeholder:"Library, Labs, Sports, etc."})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{name:"description",value:e.description,onChange:o,rows:"4",placeholder:"Brief description of your institution..."})]}),(0,Le.jsx)("div",{className:"form-actions",children:(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Updating...":"Update Profile"})})]})]})]})},ht=()=>{const[e,t]=(0,i.useState)([{id:"1",name:"Faculty of Engineering",code:"ENG",description:"Engineering and Technology programs",dean:"Dr. John Smith",contactEmail:"dean.eng@uj.ac.za",contactPhone:"+27 11 559 2000",courseCount:12,createdAt:"2024-01-15T10:00:00Z"},{id:"2",name:"Faculty of Business",code:"BUS",description:"Business and Management programs",dean:"Prof. Sarah Johnson",contactEmail:"dean.bus@uj.ac.za",contactPhone:"+27 11 559 2100",courseCount:8,createdAt:"2024-01-16T10:00:00Z"},{id:"3",name:"Faculty of Science",code:"SCI",description:"Science and Applied Sciences programs",dean:"Dr. Michael Brown",contactEmail:"dean.sci@uj.ac.za",contactPhone:"+27 11 559 2200",courseCount:15,createdAt:"2024-01-17T10:00:00Z"}]),[n,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)({name:"",code:"",description:"",dean:"",contactEmail:"",contactPhone:""});(0,i.useEffect)(()=>{console.log("Faculties loaded")},[]);return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Manage Faculties"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>r(!0),children:"Add Faculty"})})]}),n&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:s?"Edit Faculty":"Add New Faculty"}),(0,Le.jsxs)("form",{onSubmit:n=>{n.preventDefault();const i=(0,Pe.A)((0,Pe.A)({},o),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active"});if(s){const n=e.map(e=>e.id===s.id?(0,Pe.A)((0,Pe.A)({},e),i):e);t(n),console.log("Faculty updated:",i)}else{const n=(0,Pe.A)((0,Pe.A)({id:Date.now().toString()},i),{},{courseCount:0});t([...e,n]),console.log("Faculty added:",i)}r(!1),a(null),l({name:"",code:"",description:"",dean:"",contactEmail:"",contactPhone:""})},children:[(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Faculty Name"}),(0,Le.jsx)("input",{type:"text",value:o.name,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{name:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Faculty Code"}),(0,Le.jsx)("input",{type:"text",value:o.code,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{code:e.target.value})),required:!0,placeholder:"e.g., CS, ENG, BUS"})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Dean Name"}),(0,Le.jsx)("input",{type:"text",value:o.dean,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{dean:e.target.value}))})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Email"}),(0,Le.jsx)("input",{type:"email",value:o.contactEmail,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{contactEmail:e.target.value}))})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Phone"}),(0,Le.jsx)("input",{type:"tel",value:o.contactPhone,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{contactPhone:e.target.value}))})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{value:o.description,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{description:e.target.value})),rows:"3"})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:s?"Update Faculty":"Add Faculty"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{r(!1),a(null),l({name:"",code:"",description:"",dean:"",contactEmail:"",contactPhone:""})},children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Code"}),(0,Le.jsx)("th",{children:"Name"}),(0,Le.jsx)("th",{children:"Dean"}),(0,Le.jsx)("th",{children:"Contact"}),(0,Le.jsx)("th",{children:"Courses"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(n=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:(0,Le.jsx)("strong",{children:n.code})}),(0,Le.jsx)("td",{children:n.name}),(0,Le.jsx)("td",{children:n.dean||"-"}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:n.contactEmail||"-"}),(0,Le.jsx)("div",{children:n.contactPhone||"-"})]}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"stat-value",style:{fontSize:"1rem"},children:n.courseCount||0})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{a(e),l(e),r(!0)})(n),children:"Edit"}),(0,Le.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(n=>{if(window.confirm("Are you sure you want to delete this faculty? This will also delete all associated courses.")){const r=e.filter(e=>e.id!==n);t(r),console.log("Faculty deleted:",n)}})(n.id),children:"Delete"})]})})]},n.id))})]})})})]})},pt=()=>{const[e,t]=(0,i.useState)([{id:"1",name:"Bachelor of Computer Science",code:"BCS101",facultyId:"1",duration:"4 years",level:"undergraduate",tuitionFee:"45000",requirements:"Mathematics and English proficiency",description:"Comprehensive computer science program covering programming, algorithms, and software development.",capacity:"120",createdAt:"2024-01-15T10:00:00Z"},{id:"2",name:"Master of Business Administration",code:"MBA201",facultyId:"2",duration:"2 years",level:"postgraduate",tuitionFee:"65000",requirements:"Bachelor's degree and 2 years work experience",description:"Advanced business management program for aspiring leaders.",capacity:"60",createdAt:"2024-01-16T10:00:00Z"},{id:"3",name:"Bachelor of Engineering",code:"BENG301",facultyId:"1",duration:"4 years",level:"undergraduate",tuitionFee:"50000",requirements:"Mathematics, Physics, and English",description:"Engineering program focusing on practical applications and innovation.",capacity:"100",createdAt:"2024-01-17T10:00:00Z"}]),[n,r]=(0,i.useState)([{id:"1",name:"Faculty of Engineering",code:"ENG"},{id:"2",name:"Faculty of Business",code:"BUS"},{id:"3",name:"Faculty of Science",code:"SCI"}]),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)({name:"",code:"",facultyId:"",duration:"",level:"undergraduate",tuitionFee:"",requirements:"",description:"",capacity:""});(0,i.useEffect)(()=>{console.log("Courses and faculties loaded")},[]);return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Manage Courses"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>a(!0),disabled:0===n.length,children:"Add Course"})}),0===n.length&&(0,Le.jsx)("p",{style:{color:"#dc3545",marginTop:"0.5rem"},children:"Please create at least one faculty before adding courses."})]}),s&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:o?"Edit Course":"Add New Course"}),(0,Le.jsxs)("form",{onSubmit:n=>{n.preventDefault();const r=(0,Pe.A)((0,Pe.A)({},c),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active"});if(o){const n=e.map(e=>e.id===o.id?(0,Pe.A)((0,Pe.A)({},e),r):e);t(n),console.log("Course updated:",r)}else{const n=(0,Pe.A)({id:Date.now().toString()},r);t([...e,n]),console.log("Course added:",r)}a(!1),l(null),u({name:"",code:"",facultyId:"",duration:"",level:"undergraduate",tuitionFee:"",requirements:"",description:"",capacity:""})},children:[(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Course Name"}),(0,Le.jsx)("input",{type:"text",value:c.name,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{name:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Course Code"}),(0,Le.jsx)("input",{type:"text",value:c.code,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{code:e.target.value})),required:!0})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Faculty"}),(0,Le.jsxs)("select",{value:c.facultyId,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{facultyId:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Faculty"}),n.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Level"}),(0,Le.jsxs)("select",{value:c.level,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{level:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"undergraduate",children:"Undergraduate"}),(0,Le.jsx)("option",{value:"postgraduate",children:"Postgraduate"}),(0,Le.jsx)("option",{value:"diploma",children:"Diploma"}),(0,Le.jsx)("option",{value:"certificate",children:"Certificate"})]})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Duration"}),(0,Le.jsx)("input",{type:"text",value:c.duration,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{duration:e.target.value})),placeholder:"e.g., 4 years, 2 semesters",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Tuition Fee (LSL)"}),(0,Le.jsx)("input",{type:"number",value:c.tuitionFee,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{tuitionFee:e.target.value})),min:"0"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Capacity"}),(0,Le.jsx)("input",{type:"number",value:c.capacity,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{capacity:e.target.value})),min:"1",placeholder:"Maximum number of students"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Requirements"}),(0,Le.jsx)("textarea",{value:c.requirements,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{requirements:e.target.value})),rows:"3",placeholder:"Entry requirements for this course..."})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{value:c.description,onChange:e=>u((0,Pe.A)((0,Pe.A)({},c),{},{description:e.target.value})),rows:"3",placeholder:"Course description and overview..."})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:o?"Update Course":"Add Course"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{a(!1),l(null),u({name:"",code:"",facultyId:"",duration:"",level:"undergraduate",tuitionFee:"",requirements:"",description:"",capacity:""})},children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Code"}),(0,Le.jsx)("th",{children:"Name"}),(0,Le.jsx)("th",{children:"Faculty"}),(0,Le.jsx)("th",{children:"Level"}),(0,Le.jsx)("th",{children:"Duration"}),(0,Le.jsx)("th",{children:"Fee"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(r=>{const i=n.find(e=>e.id===r.facultyId);return(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:(0,Le.jsx)("strong",{children:r.code})}),(0,Le.jsx)("td",{children:r.name}),(0,Le.jsx)("td",{children:(null===i||void 0===i?void 0:i.name)||"-"}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge",style:{textTransform:"capitalize"},children:r.level})}),(0,Le.jsx)("td",{children:r.duration}),(0,Le.jsx)("td",{children:r.tuitionFee?"LSL ".concat(r.tuitionFee):"-"}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>{l(r),u(r),a(!0)},children:"Edit"}),(0,Le.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(n=>{if(window.confirm("Are you sure you want to delete this course?")){const r=e.filter(e=>e.id!==n);t(r),console.log("Course deleted:",n)}})(r.id),children:"Delete"})]})})]},r.id)})})]})})})]})},ft=()=>{const[e,t]=(0,i.useState)([{id:"1",courseId:"1",courseName:"Bachelor of Computer Science",intakeYear:2024,intakeSemester:"fall",applicationDeadline:"2024-08-31",classesStart:"2024-09-15",requirements:"Mathematics and English proficiency required",seatsAvailable:120,applicationFee:500,status:"open",applicationsReceived:45,applicationsApproved:32,applicationsRejected:8,publishedAt:"2024-06-01T10:00:00Z"},{id:"2",courseId:"2",courseName:"Master of Business Administration",intakeYear:2024,intakeSemester:"spring",applicationDeadline:"2024-12-15",classesStart:"2025-01-15",requirements:"Bachelor's degree and 2 years work experience",seatsAvailable:60,applicationFee:750,status:"open",applicationsReceived:28,applicationsApproved:18,applicationsRejected:5,publishedAt:"2024-06-15T10:00:00Z"},{id:"3",courseId:"3",courseName:"Bachelor of Engineering",intakeYear:2024,intakeSemester:"fall",applicationDeadline:"2024-08-31",classesStart:"2024-09-15",requirements:"Mathematics, Physics, and English",seatsAvailable:100,applicationFee:600,status:"closed",applicationsReceived:95,applicationsApproved:85,applicationsRejected:10,publishedAt:"2024-06-01T10:00:00Z",closedAt:"2024-08-31T23:59:59Z"}]),[n,r]=(0,i.useState)([{id:"1",name:"Bachelor of Computer Science",code:"BCS101"},{id:"2",name:"Master of Business Administration",code:"MBA201"},{id:"3",name:"Bachelor of Engineering",code:"BENG301"}]),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)({courseId:"",intakeYear:(new Date).getFullYear(),intakeSemester:"fall",applicationDeadline:"",classesStart:"",requirements:"",seatsAvailable:"",applicationFee:""});(0,i.useEffect)(()=>{console.log("Admissions and courses loaded")},[]);return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Manage Admissions"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>a(!0),disabled:0===n.length,children:"Publish Admission"})}),0===n.length&&(0,Le.jsx)("p",{style:{color:"#dc3545",marginTop:"0.5rem"},children:"Please create at least one course before publishing admissions."})]}),s&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:"Publish New Admission"}),(0,Le.jsxs)("form",{onSubmit:r=>{r.preventDefault();const i=n.find(e=>e.id===o.courseId),s=(0,Pe.A)((0,Pe.A)({},o),{},{courseName:null===i||void 0===i?void 0:i.name,publishedAt:(new Date).toISOString(),status:"open",applicationsReceived:0,applicationsApproved:0,applicationsRejected:0}),c=(0,Pe.A)({id:Date.now().toString()},s);t([...e,c]),console.log("Admission published:",s),a(!1),l({courseId:"",intakeYear:(new Date).getFullYear(),intakeSemester:"fall",applicationDeadline:"",classesStart:"",requirements:"",seatsAvailable:"",applicationFee:""})},children:[(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Course"}),(0,Le.jsxs)("select",{value:o.courseId,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{courseId:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),n.map(e=>(0,Le.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Intake Year"}),(0,Le.jsx)("input",{type:"number",value:o.intakeYear,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{intakeYear:e.target.value})),min:(new Date).getFullYear(),max:(new Date).getFullYear()+2,required:!0})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Intake Semester"}),(0,Le.jsxs)("select",{value:o.intakeSemester,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{intakeSemester:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"fall",children:"Fall Semester"}),(0,Le.jsx)("option",{value:"spring",children:"Spring Semester"}),(0,Le.jsx)("option",{value:"summer",children:"Summer Semester"}),(0,Le.jsx)("option",{value:"winter",children:"Winter Semester"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Seats Available"}),(0,Le.jsx)("input",{type:"number",value:o.seatsAvailable,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{seatsAvailable:e.target.value})),min:"1",required:!0})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Application Deadline"}),(0,Le.jsx)("input",{type:"date",value:o.applicationDeadline,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{applicationDeadline:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Classes Start Date"}),(0,Le.jsx)("input",{type:"date",value:o.classesStart,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{classesStart:e.target.value})),required:!0})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Application Fee (LSL)"}),(0,Le.jsx)("input",{type:"number",value:o.applicationFee,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{applicationFee:e.target.value})),min:"0"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Additional Requirements"}),(0,Le.jsx)("textarea",{value:o.requirements,onChange:e=>l((0,Pe.A)((0,Pe.A)({},o),{},{requirements:e.target.value})),rows:"3",placeholder:"Any additional application requirements..."})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Publish Admission"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>a(!1),children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Course"}),(0,Le.jsx)("th",{children:"Intake"}),(0,Le.jsx)("th",{children:"Deadline"}),(0,Le.jsx)("th",{children:"Applications"}),(0,Le.jsx)("th",{children:"Seats"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(n=>{const r=(e=>{const t=e.applicationsReceived||0,n=e.applicationsApproved||0,r=e.applicationsRejected||0;return{total:t,approved:n,rejected:r,pending:t-n-r}})(n);return(0,Le.jsxs)("tr",{children:[(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("strong",{children:n.courseName})}),(0,Le.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:[n.intakeYear," ",n.intakeSemester]})]}),(0,Le.jsx)("td",{children:new Date(n.classesStart).toLocaleDateString()}),(0,Le.jsx)("td",{children:new Date(n.applicationDeadline).toLocaleDateString()}),(0,Le.jsxs)("td",{children:[(0,Le.jsxs)("div",{children:["Total: ",r.total]}),(0,Le.jsxs)("div",{style:{fontSize:"0.8rem"},children:[r.approved," ",r.rejected," ",r.pending]})]}),(0,Le.jsx)("td",{children:n.seatsAvailable}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge status-".concat(n.status),children:n.status})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:["open"===n.status?(0,Le.jsx)("button",{className:"action-btn btn-danger",onClick:()=>(n=>{const r=e.map(e=>e.id===n?(0,Pe.A)((0,Pe.A)({},e),{},{status:"closed",closedAt:(new Date).toISOString()}):e);t(r),console.log("Admission closed:",n)})(n.id),children:"Close"}):(0,Le.jsx)("button",{className:"action-btn btn-success",onClick:()=>(n=>{const r=e.map(e=>e.id===n?(0,Pe.A)((0,Pe.A)({},e),{},{status:"open",reopenedAt:(new Date).toISOString()}):e);t(r),console.log("Admission reopened:",n)})(n.id),children:"Reopen"}),(0,Le.jsx)("button",{className:"action-btn edit-btn",children:"View"})]})})]},n.id)})})]})})})]})},mt=()=>{const[e,t]=(0,i.useState)([{id:"1",studentName:"John Doe",studentEmail:"john.doe@email.com",studentPhone:"+266 123 4567",courseName:"Bachelor of Computer Science",intakeYear:2024,intakeSemester:"fall",appliedAt:"2024-07-15T10:00:00Z",academicGrades:"A- Average",documentsSubmitted:5,status:"pending"},{id:"2",studentName:"Jane Smith",studentEmail:"jane.smith@email.com",studentPhone:"+266 234 5678",courseName:"Master of Business Administration",intakeYear:2024,intakeSemester:"spring",appliedAt:"2024-07-10T14:30:00Z",academicGrades:"B+ Average",documentsSubmitted:4,status:"approved"},{id:"3",studentName:"Mike Johnson",studentEmail:"mike.johnson@email.com",studentPhone:"+266 345 6789",courseName:"Bachelor of Engineering",intakeYear:2024,intakeSemester:"fall",appliedAt:"2024-07-08T09:15:00Z",academicGrades:"A Average",documentsSubmitted:6,status:"rejected"},{id:"4",studentName:"Sarah Wilson",studentEmail:"sarah.wilson@email.com",studentPhone:"+266 456 7890",courseName:"Bachelor of Computer Science",intakeYear:2024,intakeSemester:"fall",appliedAt:"2024-07-12T16:45:00Z",academicGrades:"B Average",documentsSubmitted:3,status:"pending"}]),[n,r]=(0,i.useState)("all");(0,i.useEffect)(()=>{console.log("Applications loaded")},[]);const s=(n,r)=>{const i=e.map(e=>e.id===n?(0,Pe.A)((0,Pe.A)({},e),{},{status:r,reviewedAt:(new Date).toISOString()}):e);t(i),console.log("Application ".concat(n," status updated to ").concat(r))},a=e.filter(e=>"all"===n||e.status===n),o=e=>{switch(e){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";default:return"#6c757d"}};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Student Applications"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Applications"}),(0,Le.jsx)("option",{value:"pending",children:"Pending Review"}),(0,Le.jsx)("option",{value:"approved",children:"Approved"}),(0,Le.jsx)("option",{value:"rejected",children:"Rejected"})]})})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Student"}),(0,Le.jsx)("th",{children:"Course"}),(0,Le.jsx)("th",{children:"Applied On"}),(0,Le.jsx)("th",{children:"Qualifications"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:a.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("strong",{children:e.studentName})}),(0,Le.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:e.studentEmail}),(0,Le.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:e.studentPhone})]}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("strong",{children:e.courseName})}),(0,Le.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:[e.intakeYear," ",e.intakeSemester]})]}),(0,Le.jsx)("td",{children:new Date(e.appliedAt).toLocaleDateString()}),(0,Le.jsxs)("td",{children:[(0,Le.jsxs)("div",{style:{fontSize:"0.8rem"},children:[(0,Le.jsx)("strong",{children:"Grades:"})," ",e.academicGrades||"N/A"]}),(0,Le.jsxs)("div",{style:{fontSize:"0.8rem"},children:[(0,Le.jsx)("strong",{children:"Documents:"})," ",e.documentsSubmitted||0]})]}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge",style:{backgroundColor:o(e.status),color:"white"},children:e.status})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:["pending"===e.status&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("button",{className:"action-btn approve-btn",onClick:()=>s(e.id,"approved"),children:"Approve"}),(0,Le.jsx)("button",{className:"action-btn btn-danger",onClick:()=>s(e.id,"rejected"),children:"Reject"})]}),(0,Le.jsx)("button",{className:"action-btn edit-btn",children:"View Details"})]})})]},e.id))})]})})}),0===a.length&&(0,Le.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No applications found for the selected filter."})]})},gt=()=>{const[e,t]=(0,i.useState)([{id:"1",studentId:"STU2024001",studentName:"John Doe",dateOfBirth:"2000-05-15",courseName:"Bachelor of Computer Science",intakeYear:2024,intakeSemester:"fall",reviewedAt:"2024-07-20T10:00:00Z",enrollmentCompleted:!0,studentEmail:"john.doe@email.com",studentPhone:"+266 123 4567"},{id:"2",studentId:"STU2024002",studentName:"Jane Smith",dateOfBirth:"1999-12-08",courseName:"Master of Business Administration",intakeYear:2024,intakeSemester:"spring",reviewedAt:"2024-07-18T14:30:00Z",enrollmentCompleted:!0,studentEmail:"jane.smith@email.com",studentPhone:"+266 234 5678"},{id:"3",studentId:"STU2024003",studentName:"Mike Johnson",dateOfBirth:"2001-03-22",courseName:"Bachelor of Engineering",intakeYear:2024,intakeSemester:"fall",reviewedAt:"2024-07-15T09:15:00Z",enrollmentCompleted:!1,studentEmail:"mike.johnson@email.com",studentPhone:"+266 345 6789"},{id:"4",studentId:"STU2024004",studentName:"Sarah Wilson",dateOfBirth:"2000-08-10",courseName:"Bachelor of Computer Science",intakeYear:2024,intakeSemester:"fall",reviewedAt:"2024-07-22T16:45:00Z",enrollmentCompleted:!0,studentEmail:"sarah.wilson@email.com",studentPhone:"+266 456 7890"}]),[n,r]=(0,i.useState)("all");(0,i.useEffect)(()=>{console.log("Students loaded")},[]);const s=e=>e.enrollmentCompleted?"Enrolled":"Admitted";return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Student Management"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Students"}),(0,Le.jsx)("option",{value:"enrolled",children:"Enrolled"}),(0,Le.jsx)("option",{value:"admitted",children:"Admitted"})]})})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Student ID"}),(0,Le.jsx)("th",{children:"Student Name"}),(0,Le.jsx)("th",{children:"Course"}),(0,Le.jsx)("th",{children:"Admission Date"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Contact"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:(0,Le.jsx)("strong",{children:e.studentId||"N/A"})}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("strong",{children:e.studentName})}),(0,Le.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["DOB: ",e.dateOfBirth||"N/A"]})]}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:(0,Le.jsx)("strong",{children:e.courseName})}),(0,Le.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:[e.intakeYear," ",e.intakeSemester]})]}),(0,Le.jsx)("td",{children:new Date(e.reviewedAt).toLocaleDateString()}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge status-".concat(s(e).toLowerCase()),children:s(e)})}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{style:{fontSize:"0.8rem"},children:e.studentEmail}),(0,Le.jsx)("div",{style:{fontSize:"0.8rem"},children:e.studentPhone})]}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",children:"View Profile"}),(0,Le.jsx)("button",{className:"action-btn approve-btn",children:"Generate ID"})]})})]},e.id))})]})})}),0===e.length&&(0,Le.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No students found. Student records will appear here after applications are approved."})]})},vt=()=>(0,Le.jsxs)("div",{className:"tab-content",children:[(0,Le.jsx)("h2",{children:"Institute Overview"}),(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Total Faculties"}),(0,Le.jsx)("div",{className:"stat-value",children:"8"}),(0,Le.jsx)("p",{children:"Active departments"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Available Courses"}),(0,Le.jsx)("div",{className:"stat-value",children:"45"}),(0,Le.jsx)("p",{children:"Programs offered"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Active Admissions"}),(0,Le.jsx)("div",{className:"stat-value",children:"6"}),(0,Le.jsx)("p",{children:"Open for applications"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Pending Applications"}),(0,Le.jsx)("div",{className:"stat-value",children:"127"}),(0,Le.jsx)("p",{children:"Require review"})]})]}),(0,Le.jsxs)("div",{className:"recent-activity",children:[(0,Le.jsx)("h3",{children:"Recent Activity"}),(0,Le.jsxs)("div",{className:"activity-list",children:[(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsx)("strong",{children:"New Application:"})," Computer Science - John Doe"]}),(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsx)("strong",{children:"Admission Published:"})," Engineering 2024"]}),(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsx)("strong",{children:"Course Added:"})," Data Science Fundamentals"]})]})]})]}),yt=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)("overview");return(0,Le.jsxs)("div",{className:"institute-dashboard",children:[(0,Le.jsxs)("div",{className:"institute-header",children:[(0,Le.jsx)("h1",{children:"Institute Dashboard"}),(0,Le.jsxs)("p",{children:["Welcome, ",(null===e||void 0===e?void 0:e.institutionName)||(null===e||void 0===e?void 0:e.name)]})]}),(0,Le.jsxs)("div",{className:"institute-layout",children:[(0,Le.jsx)("div",{className:"institute-sidebar",children:[{id:"overview",name:"Overview"},{id:"profile",name:"Institute Profile"},{id:"faculties",name:"Faculties"},{id:"courses",name:"Courses"},{id:"admissions",name:"Admissions"},{id:"applications",name:"Applications"},{id:"students",name:"Students"}].map(e=>(0,Le.jsx)("button",{className:"sidebar-tab ".concat(t===e.id?"active":""),onClick:()=>n(e.id),children:e.name},e.id))}),(0,Le.jsx)("div",{className:"institute-content",children:(()=>{switch(t){case"overview":default:return(0,Le.jsx)(vt,{});case"profile":return(0,Le.jsx)(dt,{});case"faculties":return(0,Le.jsx)(ht,{});case"courses":return(0,Le.jsx)(pt,{});case"admissions":return(0,Le.jsx)(ft,{});case"applications":return(0,Le.jsx)(mt,{});case"students":return(0,Le.jsx)(gt,{})}})()})]})]})},bt=()=>{const{userProfile:e,updateProfile:t}=Fe(),[n,r]=(0,i.useState)({companyName:"",industry:"",companySize:"",website:"",foundedYear:"",headquarters:"",description:"",contactPerson:"",contactPosition:"",contactEmail:"",contactPhone:"",companyValues:"",specialties:""}),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)("");(0,i.useEffect)(()=>{e&&r({companyName:e.companyName||"",industry:e.industry||"",companySize:e.companySize||"",website:e.website||"",foundedYear:e.foundedYear||"",headquarters:e.headquarters||"",description:e.description||"",contactPerson:e.contactPerson||"",contactPosition:e.contactPosition||"",contactEmail:e.contactEmail||e.email||"",contactPhone:e.contactPhone||e.phone||"",companyValues:e.companyValues||"",specialties:e.specialties||""})},[e]);const c=e=>{const{name:t,value:n}=e.target;r(e=>(0,Pe.A)((0,Pe.A)({},e),{},{[t]:n}))};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Company Profile"}),"pending"===(null===e||void 0===e?void 0:e.status)&&(0,Le.jsxs)("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"6px",marginTop:"1rem"},children:[(0,Le.jsx)("strong",{children:"Status: Pending Approval"})," - Your company profile is under review by our admin team."]})]}),(0,Le.jsxs)("div",{className:"admin-form",children:[o&&(0,Le.jsx)("div",{className:"message ".concat(o.includes("Error")?"error-message":"success-message"),children:o}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(!0),l("");try{await t(n),l("Company profile updated successfully!")}catch(r){l("Error updating profile: "+r.message)}finally{a(!1)}},children:[(0,Le.jsx)("h4",{children:"Company Information"}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Company Name"}),(0,Le.jsx)("input",{type:"text",name:"companyName",value:n.companyName,onChange:c,required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Industry"}),(0,Le.jsxs)("select",{name:"industry",value:n.industry,onChange:c,required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Industry"}),["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Hospitality","Construction","Transportation","Energy","Telecommunications","Other"].map(e=>(0,Le.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Company Size"}),(0,Le.jsxs)("select",{name:"companySize",value:n.companySize,onChange:c,required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Company Size"}),["1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1000+ employees"].map(e=>(0,Le.jsx)("option",{value:e,children:e},e))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Founded Year"}),(0,Le.jsx)("input",{type:"number",name:"foundedYear",value:n.foundedYear,onChange:c,min:"1800",max:"2024"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Headquarters Location"}),(0,Le.jsx)("input",{type:"text",name:"headquarters",value:n.headquarters,onChange:c,placeholder:"City, Country"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Website"}),(0,Le.jsx)("input",{type:"url",name:"website",value:n.website,onChange:c,placeholder:"https://example.com"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Company Description"}),(0,Le.jsx)("textarea",{name:"description",value:n.description,onChange:c,rows:"4",placeholder:"Brief description of your company, mission, and vision..."})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Specialties"}),(0,Le.jsx)("textarea",{name:"specialties",value:n.specialties,onChange:c,rows:"2",placeholder:"Company specialties, key areas of expertise..."})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Company Values"}),(0,Le.jsx)("textarea",{name:"companyValues",value:n.companyValues,onChange:c,rows:"2",placeholder:"Core values and culture..."})]}),(0,Le.jsx)("h4",{children:"Contact Information"}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Person"}),(0,Le.jsx)("input",{type:"text",name:"contactPerson",value:n.contactPerson,onChange:c,required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Position"}),(0,Le.jsx)("input",{type:"text",name:"contactPosition",value:n.contactPosition,onChange:c,placeholder:"e.g., HR Manager, Recruiter"})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Email"}),(0,Le.jsx)("input",{type:"email",name:"contactEmail",value:n.contactEmail,onChange:c,required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Phone"}),(0,Le.jsx)("input",{type:"tel",name:"contactPhone",value:n.contactPhone,onChange:c,required:!0})]})]}),(0,Le.jsx)("div",{className:"form-actions",children:(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Updating...":"Update Profile"})})]})]})]})},wt=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)({title:"",type:"full-time",department:"",location:"",salary:"",deadline:"",description:"",requirements:"",qualifications:"",responsibilities:"",benefits:"",experienceLevel:"entry",educationLevel:"bachelors"});(0,i.useEffect)(()=>{u()},[e]);const u=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"jobPostings"),(0,De._M)("companyId","==",e.uid)),r=await(0,De.GG)(t),i=[];r.forEach(e=>{i.push((0,Pe.A)({id:e.id},e.data()))}),i.sort((e,t)=>new Date(t.postedAt)-new Date(e.postedAt)),n(i)}catch(t){console.error("Error loading job postings:",t)}};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Job Postings"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>s(!0),children:"Post New Job"})})]}),r&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:a?"Edit Job Posting":"Create New Job Posting"}),(0,Le.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=(0,Pe.A)((0,Pe.A)({},l),{},{companyId:e.uid,companyName:e.companyName,companyIndustry:e.industry,postedAt:(new Date).toISOString(),status:"active",applicationsReceived:0,applicationsShortlisted:0,applicationsRejected:0});a?await(0,De.mZ)((0,De.H9)(Oe.db,"jobPostings",a.id),t):await(0,De.gS)((0,De.rJ)(Oe.db,"jobPostings"),t),s(!1),o(null),c({title:"",type:"full-time",department:"",location:"",salary:"",deadline:"",description:"",requirements:"",qualifications:"",responsibilities:"",benefits:"",experienceLevel:"entry",educationLevel:"bachelors"}),u()}catch(n){console.error("Error saving job posting:",n)}},children:[(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Job Title"}),(0,Le.jsx)("input",{type:"text",value:l.title,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{title:e.target.value})),required:!0,placeholder:"e.g., Senior Software Engineer"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Job Type"}),(0,Le.jsx)("select",{value:l.type,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{type:e.target.value})),required:!0,children:["full-time","part-time","contract","internship","temporary"].map(e=>(0,Le.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1).replace("-"," ")},e))})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Department"}),(0,Le.jsx)("input",{type:"text",value:l.department,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{department:e.target.value})),placeholder:"e.g., Engineering, Marketing"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Location"}),(0,Le.jsx)("input",{type:"text",value:l.location,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{location:e.target.value})),required:!0,placeholder:"e.g., Maseru, Lesotho"})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Salary Range"}),(0,Le.jsx)("input",{type:"text",value:l.salary,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{salary:e.target.value})),placeholder:"e.g., LSL 15,000 - 25,000"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Application Deadline"}),(0,Le.jsx)("input",{type:"date",value:l.deadline,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{deadline:e.target.value})),required:!0,min:(new Date).toISOString().split("T")[0]})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Experience Level"}),(0,Le.jsx)("select",{value:l.experienceLevel,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{experienceLevel:e.target.value})),required:!0,children:["internship","entry","mid","senior","executive"].map(e=>(0,Le.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Education Level"}),(0,Le.jsx)("select",{value:l.educationLevel,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{educationLevel:e.target.value})),required:!0,children:["high-school","diploma","bachelors","masters","phd"].map(e=>(0,Le.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1).replace("-"," ")},e))})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Job Description"}),(0,Le.jsx)("textarea",{value:l.description,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{description:e.target.value})),rows:"4",placeholder:"Detailed description of the job role and responsibilities...",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Requirements"}),(0,Le.jsx)("textarea",{value:l.requirements,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{requirements:e.target.value})),rows:"3",placeholder:"Required skills, technologies, and competencies...",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Qualifications"}),(0,Le.jsx)("textarea",{value:l.qualifications,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{qualifications:e.target.value})),rows:"2",placeholder:"Educational and professional qualifications required..."})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Benefits"}),(0,Le.jsx)("textarea",{value:l.benefits,onChange:e=>c((0,Pe.A)((0,Pe.A)({},l),{},{benefits:e.target.value})),rows:"2",placeholder:"Company benefits, perks, and opportunities..."})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:a?"Update Job":"Post Job"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{s(!1),o(null),c({title:"",type:"full-time",department:"",location:"",salary:"",deadline:"",description:"",requirements:"",qualifications:"",responsibilities:"",benefits:"",experienceLevel:"entry",educationLevel:"bachelors"})},children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"applicant-cards",children:t.map(e=>(0,Le.jsxs)("div",{className:"applicant-card",children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{children:e.title}),(0,Le.jsxs)("p",{style:{margin:0,color:"#666"},children:[e.department," \u2022 ",e.location]})]}),(0,Le.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Type:"})," ",e.type]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Experience:"})," ",e.experienceLevel]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Education:"})," ",e.educationLevel]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Salary:"})," ",e.salary||"Not specified"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Deadline:"})," ",new Date(e.deadline).toLocaleDateString()]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Posted:"})," ",new Date(e.postedAt).toLocaleDateString()]}),(0,Le.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"500"},children:"Applications:"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"1rem",fontSize:"0.9rem"},children:[(0,Le.jsxs)("span",{children:["Total: ",e.applicationsReceived||0]}),(0,Le.jsxs)("span",{children:["Shortlisted: ",e.applicationsShortlisted||0]}),(0,Le.jsxs)("span",{children:["Rejected: ",e.applicationsRejected||0]})]})]}),(0,Le.jsxs)("div",{className:"form-actions",style:{marginTop:"1rem"},children:["active"===e.status?(0,Le.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{try{await(0,De.mZ)((0,De.H9)(Oe.db,"jobPostings",e),{status:"closed",closedAt:(new Date).toISOString()}),u()}catch(t){console.error("Error closing job posting:",t)}})(e.id),children:"Close Job"}):(0,Le.jsx)("button",{className:"btn btn-success",onClick:()=>(0,De.mZ)((0,De.H9)(Oe.db,"jobPostings",e.id),{status:"active"}),children:"Reopen Job"}),(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>{o(e),c(e),s(!0)},children:"Edit"}),(0,Le.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this job posting?"))try{await(0,De.kd)((0,De.H9)(Oe.db,"jobPostings",e)),u()}catch(t){console.error("Error deleting job posting:",t)}})(e.id),children:"Delete"})]})]},e.id))}),0===t.length&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[(0,Le.jsx)("h4",{children:"No job postings yet"}),(0,Le.jsx)("p",{children:"Create your first job posting to start receiving applications from qualified students."})]})]})},xt=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)("all"),[l,c]=(0,i.useState)("all");(0,i.useEffect)(()=>{u(),d()},[e]);const u=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"jobPostings"),(0,De._M)("companyId","==",e.uid)),n=await(0,De.GG)(t),r=[];n.forEach(e=>{r.push((0,Pe.A)({id:e.id},e.data()))}),s(r)}catch(t){console.error("Error loading job postings:",t)}},d=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"jobApplications"),(0,De._M)("companyId","==",e.uid)),r=await(0,De.GG)(t),i=[];for(const e of r.docs){const t=(0,Pe.A)({id:e.id},e.data()),n=await(0,De.x7)(e(Oe.db,"users",t.studentId));n.exists()&&(t.studentProfile=n.data());const r=await(0,De.x7)(e(Oe.db,"jobPostings",t.jobId));r.exists()&&(t.jobRequirements=r.data()),t.matchScore=h(t),t.matchLevel=v(t.matchScore),i.push(t)}i.sort((e,t)=>t.matchScore-e.matchScore),n(i)}catch(t){console.error("Error loading applicants:",t)}},h=e=>{var t,n,r,i;let s=0;const a=e.jobRequirements,o=e.studentProfile;if(!a||!o)return 50;((null===(t=o.academicBackground)||void 0===t?void 0:t.includes("distinction"))||(null===(n=o.academicBackground)||void 0===n?void 0:n.includes("merit"))||(null===(r=o.academicBackground)||void 0===r?void 0:r.includes("3.5"))||(null===(i=o.academicBackground)||void 0===i?void 0:i.includes("A")))&&(s+=30);s+=20*p(a.educationLevel,o.educationLevel);s+=25*f(a.requirements,o.skills);s+=15*g(a.experienceLevel,o.experience);return o.certificates&&o.certificates.length>0&&(s+=10),Math.min(100,Math.round(s))},p=(e,t)=>{const n={"high-school":1,diploma:2,bachelors:3,masters:4,phd:5},r=n[e]||0,i=n[t]||0;return i>=r?1:i>=r-1?.5:0},f=(e,t)=>{if(!e||!t)return.5;const n=m(e),r=t.split(",").map(e=>e.trim().toLowerCase());let i=0;return n.forEach(e=>{r.some(t=>t.includes(e)||e.includes(t))&&i++}),i/Math.max(n.length,1)},m=e=>{if(!e)return[];return["javascript","python","java","react","angular","vue","node","sql","mongodb","aws","docker","kubernetes","git","agile","scrum","communication","leadership","problem solving","teamwork"].filter(t=>e.toLowerCase().includes(t))},g=(e,t)=>{const n={internship:1,entry:2,mid:3,senior:4,executive:5},r=n[e]||0,i=t&&n[t]||0;return i>=r?1:i>=r-1?.7:i>=r-2?.4:0},v=e=>e>=80?"high":e>=60?"medium":"low",y=async(n,r)=>{try{await(0,De.mZ)((0,De.H9)(Oe.db,"jobApplications",n),{status:r,reviewedAt:(new Date).toISOString(),reviewedBy:e.name});const i=t.find(e=>e.id===n);if(i){const e=(0,De.H9)(Oe.db,"jobPostings",i.jobId),t=await(0,De.x7)(e);if(t.exists()){const n=t.data(),i={};"shortlisted"===r?i.applicationsShortlisted=(n.applicationsShortlisted||0)+1:"rejected"===r&&(i.applicationsRejected=(n.applicationsRejected||0)+1),Object.keys(i).length>0&&await(0,De.mZ)(e,i)}}d()}catch(i){console.error("Error updating application status:",i)}},b=t.filter(e=>("all"===a||e.jobId===a)&&(("all"===l||e.status===l)&&("ready-for-interview"!==l||"high"===e.matchLevel))),w=e=>{switch(e){case"high":return"#28a745";case"medium":return"#ffc107";case"low":return"#dc3545";default:return"#6c757d"}};return(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Applicant Management"}),(0,Le.jsxs)("div",{className:"table-actions",children:[(0,Le.jsxs)("select",{value:a,onChange:e=>o(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Jobs"}),r.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.title},e.id))]}),(0,Le.jsxs)("select",{value:l,onChange:e=>c(e.target.value),style:{padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Le.jsx)("option",{value:"all",children:"All Applicants"}),(0,Le.jsx)("option",{value:"pending",children:"Pending Review"}),(0,Le.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,Le.jsx)("option",{value:"rejected",children:"Rejected"}),(0,Le.jsx)("option",{value:"ready-for-interview",children:"Ready for Interview"})]})]})]}),(0,Le.jsxs)("div",{style:{background:"#e7f3ff",padding:"1.5rem",borderRadius:"8px",marginBottom:"2rem"},children:[(0,Le.jsx)("h4",{children:"Smart Filtering System"}),(0,Le.jsxs)("p",{style:{margin:"0.5rem 0 0 0"},children:["Applicants are automatically ranked based on:",(0,Le.jsx)("strong",{children:" Academic Performance (30%) \u2022 Education Match (20%) \u2022 Skills Match (25%) \u2022 Experience Match (15%) \u2022 Certificates (10%)"})]})]}),(0,Le.jsx)("div",{className:"applicant-cards",children:b.map(e=>{var t,n,r,i,s;return(0,Le.jsxs)("div",{className:"applicant-card ".concat(e.matchLevel,"-match"),children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{children:e.studentName}),(0,Le.jsxs)("p",{style:{margin:0,color:"#666"},children:[e.jobTitle," \u2022 ",(null===(t=e.studentProfile)||void 0===t?void 0:t.educationLevel)||"Not specified"]})]}),(0,Le.jsxs)("div",{style:{textAlign:"right"},children:[(0,Le.jsxs)("div",{className:"match-score",style:{background:w(e.matchLevel),color:"white"},children:[e.matchScore,"% Match"]}),(0,Le.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})]})]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Email:"})," ",e.studentEmail]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Phone:"})," ",e.studentPhone]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Applied:"})," ",new Date(e.appliedAt).toLocaleDateString()]}),(null===(n=e.studentProfile)||void 0===n?void 0:n.skills)&&(0,Le.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"500"},children:"Skills:"}),(0,Le.jsx)("div",{className:"skills-list",children:e.studentProfile.skills.split(",").slice(0,5).map((e,t)=>(0,Le.jsx)("span",{className:"skill-tag",children:e.trim()},t))})]}),(0,Le.jsxs)("div",{style:{margin:"1rem 0"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"500"},children:"Match Analysis:"}),(0,Le.jsxs)("div",{style:{fontSize:"0.9rem",color:"#666"},children:[(0,Le.jsx)("div",{children:"\u2705 Academic Performance: Good"}),(0,Le.jsx)("div",{children:"\u2705 Education: Matched"}),(0,Le.jsxs)("div",{children:["\u2705 Skills: ",Math.round(100*f(null===(r=e.jobRequirements)||void 0===r?void 0:r.requirements,null===(i=e.studentProfile)||void 0===i?void 0:i.skills)),"% aligned"]}),(0,Le.jsxs)("div",{children:["\ud83d\udcca Experience: ",(null===(s=e.studentProfile)||void 0===s?void 0:s.experience)||"Entry level"]})]})]}),(0,Le.jsxs)("div",{className:"form-actions",style:{marginTop:"1rem"},children:["pending"===e.status&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("button",{className:"btn btn-success",onClick:()=>y(e.id,"shortlisted"),children:"Shortlist"}),(0,Le.jsx)("button",{className:"btn btn-danger",onClick:()=>y(e.id,"rejected"),children:"Reject"})]}),"shortlisted"===e.status&&"high"===e.matchLevel&&(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>y(e.id,"interview"),children:"Schedule Interview"}),(0,Le.jsx)("button",{className:"btn btn-secondary",children:"View Profile"})]})]},e.id)})}),0===b.length&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[(0,Le.jsx)("h4",{children:"No applicants found"}),(0,Le.jsx)("p",{children:"No applicants match your current filters."})]})]})},jt=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)([]);(0,i.useEffect)(()=>{r()},[e]);const r=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"interviews"),(0,De._M)("companyId","==",e.uid)),r=await(0,De.GG)(t),i=[];r.forEach(e=>{i.push((0,Pe.A)({id:e.id},e.data()))}),i.sort((e,t)=>new Date(e.scheduledDate)-new Date(t.scheduledDate)),n(i)}catch(t){console.error("Error loading interviews:",t)}},s=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{await(0,De.mZ)((0,De.H9)(Oe.db,"interviews",e),{status:t,feedback:n,updatedAt:(new Date).toISOString()}),r()}catch(i){console.error("Error updating interview:",i)}},a=e=>{switch(e){case"scheduled":return"#17a2b8";case"completed":return"#28a745";case"cancelled":return"#dc3545";case"no-show":return"#6c757d";default:return"#ffc107"}};return(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"Interview Management"})}),(0,Le.jsx)("div",{className:"applicant-cards",children:t.map(e=>(0,Le.jsxs)("div",{className:"applicant-card",children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{children:e.studentName}),(0,Le.jsxs)("p",{style:{margin:0,color:"#666"},children:[e.jobTitle," \u2022 ",e.interviewType]})]}),(0,Le.jsx)("span",{className:"status-badge",style:{background:a(e.status)},children:e.status})]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Date & Time:"})," ",new Date(e.scheduledDate).toLocaleString()]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Duration:"})," ",e.duration," minutes"]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Interviewer:"})," ",e.interviewer]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Location/Platform:"})," ",e.location]}),e.notes&&(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Notes:"})," ",e.notes]}),e.feedback&&(0,Le.jsxs)("div",{style:{margin:"1rem 0",padding:"1rem",background:"#f8f9fa",borderRadius:"6px"},children:[(0,Le.jsx)("strong",{children:"Feedback:"})," ",e.feedback]}),(0,Le.jsxs)("div",{className:"form-actions",style:{marginTop:"1rem"},children:["scheduled"===e.status&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("button",{className:"btn btn-success",onClick:()=>s(e.id,"completed","Interview completed successfully"),children:"Mark Completed"}),(0,Le.jsx)("button",{className:"btn btn-danger",onClick:()=>s(e.id,"cancelled","Interview cancelled"),children:"Cancel"})]}),(0,Le.jsx)("button",{className:"btn btn-secondary",children:"Reschedule"})]})]},e.id))}),0===t.length&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},children:[(0,Le.jsx)("h4",{children:"No interviews scheduled"}),(0,Le.jsx)("p",{children:"Interviews will appear here once scheduled with shortlisted candidates."})]})]})},St=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)({});(0,i.useEffect)(()=>{r()},[e]);const r=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=(0,De.P)((0,De.rJ)(Oe.db,"jobPostings"),(0,De._M)("companyId","==",e.uid)),r=await(0,De.GG)(t),i=(0,De.P)((0,De.rJ)(Oe.db,"jobApplications"),(0,De._M)("companyId","==",e.uid)),s=await(0,De.GG)(i),a=[];let o=0,l=0,c=0;r.forEach(e=>{const t=e.data();a.push(t),o+=t.applicationsReceived||0,l+=t.applicationsShortlisted||0}),s.forEach(e=>{"hired"===e.data().status&&c++}),n({totalJobs:a.length,activeJobs:a.filter(e=>"active"===e.status).length,totalApplications:o,shortlisted:l,hired:c,conversionRate:o>0?(c/o*100).toFixed(1):0})}catch(t){console.error("Error loading analytics:",t)}};return(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"Company Analytics"})}),(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Total Job Postings"}),(0,Le.jsx)("div",{className:"stat-value",children:t.totalJobs||0}),(0,Le.jsx)("p",{children:"All time"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Active Jobs"}),(0,Le.jsx)("div",{className:"stat-value",children:t.activeJobs||0}),(0,Le.jsx)("p",{children:"Currently open"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Total Applications"}),(0,Le.jsx)("div",{className:"stat-value",children:t.totalApplications||0}),(0,Le.jsx)("p",{children:"Received"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Shortlisted"}),(0,Le.jsx)("div",{className:"stat-value",children:t.shortlisted||0}),(0,Le.jsx)("p",{children:"Candidates"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Hired"}),(0,Le.jsx)("div",{className:"stat-value",children:t.hired||0}),(0,Le.jsx)("p",{children:"Successful placements"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Conversion Rate"}),(0,Le.jsxs)("div",{className:"stat-value",children:[t.conversionRate||0,"%"]}),(0,Le.jsx)("p",{children:"Application to hire"})]})]}),(0,Le.jsxs)("div",{style:{background:"#e7f3ff",padding:"2rem",borderRadius:"8px",marginTop:"2rem"},children:[(0,Le.jsx)("h4",{children:"\ud83d\udcca Performance Insights"}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginTop:"1rem"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h5",{children:"Application Funnel"}),(0,Le.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"6px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,Le.jsx)("span",{children:"Applications Received"}),(0,Le.jsx)("span",{children:t.totalApplications||0})]}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,Le.jsx)("span",{children:"Shortlisted"}),(0,Le.jsx)("span",{children:t.shortlisted||0})]}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsx)("span",{children:"Hired"}),(0,Le.jsx)("span",{children:t.hired||0})]})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h5",{children:"Smart Matching Effectiveness"}),(0,Le.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"6px"},children:[(0,Le.jsxs)("p",{style:{margin:"0 0 1rem 0"},children:[(0,Le.jsx)("strong",{children:"High-match candidates:"})," ",Math.round(t.shortlisted/Math.max(t.totalApplications,1)*100),"% of shortlisted"]}),(0,Le.jsxs)("p",{style:{margin:"0"},children:[(0,Le.jsx)("strong",{children:"System accuracy:"})," 85% of high-match candidates proceed to interview"]})]})]})]})]})]})},Et=()=>(0,Le.jsxs)("div",{className:"tab-content",children:[(0,Le.jsx)("h2",{children:"Company Overview"}),(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Active Job Postings"}),(0,Le.jsx)("div",{className:"stat-value",children:"3"}),(0,Le.jsx)("p",{children:"Currently open positions"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Total Applicants"}),(0,Le.jsx)("div",{className:"stat-value",children:"45"}),(0,Le.jsx)("p",{children:"This month"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Interview Scheduled"}),(0,Le.jsx)("div",{className:"stat-value",children:"12"}),(0,Le.jsx)("p",{children:"Upcoming interviews"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Hired Candidates"}),(0,Le.jsx)("div",{className:"stat-value",children:"5"}),(0,Le.jsx)("p",{children:"Successful placements"})]})]}),(0,Le.jsxs)("div",{className:"recent-activity",children:[(0,Le.jsx)("h3",{children:"Recent Activity"}),(0,Le.jsxs)("div",{className:"activity-list",children:[(0,Le.jsxs)("div",{className:"activity-item success",children:[(0,Le.jsx)("strong",{children:"New Job Posted:"})," Senior Software Engineer"]}),(0,Le.jsxs)("div",{className:"activity-item info",children:[(0,Le.jsx)("strong",{children:"New Applicant:"})," John Doe for Data Analyst position"]}),(0,Le.jsxs)("div",{className:"activity-item warning",children:[(0,Le.jsx)("strong",{children:"Interview Scheduled:"})," Jane Smith - Tomorrow 2:00 PM"]})]})]})]}),_t=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)("overview");return(0,Le.jsxs)("div",{className:"company-dashboard",children:[(0,Le.jsxs)("div",{className:"company-header",children:[(0,Le.jsx)("h1",{children:"Company Dashboard"}),(0,Le.jsxs)("p",{children:["Welcome, ",(null===e||void 0===e?void 0:e.companyName)||(null===e||void 0===e?void 0:e.name)]}),(0,Le.jsx)("div",{className:"company-status",children:(0,Le.jsx)("span",{className:"status-badge status-".concat((null===e||void 0===e?void 0:e.status)||"pending"),children:(null===e||void 0===e?void 0:e.status)||"pending"})})]}),(0,Le.jsxs)("div",{className:"company-layout",children:[(0,Le.jsx)("div",{className:"company-sidebar",children:[{id:"overview",name:"Overview"},{id:"profile",name:"Company Profile"},{id:"jobs",name:"Job Postings"},{id:"applicants",name:"Applicants"},{id:"interviews",name:"Interviews"},{id:"analytics",name:"Analytics"}].map(e=>(0,Le.jsx)("button",{className:"sidebar-tab ".concat(t===e.id?"active":""),onClick:()=>n(e.id),children:e.name},e.id))}),(0,Le.jsx)("div",{className:"company-content",children:(()=>{switch(t){case"overview":default:return(0,Le.jsx)(Et,{});case"profile":return(0,Le.jsx)(bt,{});case"jobs":return(0,Le.jsx)(wt,{});case"applicants":return(0,Le.jsx)(xt,{});case"interviews":return(0,Le.jsx)(jt,{});case"analytics":return(0,Le.jsx)(St,{})}})()})]})]})},Ct="institutions",Nt=async()=>{try{const e=(0,De.P)((0,De.rJ)(Oe.db,Ct),(0,De.My)("createdAt","desc"));return(await(0,De.GG)(e)).docs.map(e=>(0,Pe.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting institutions:",e),new Error("Failed to load institutions")}},kt=e=>{const t=(0,De.P)((0,De.rJ)(Oe.db,Ct),(0,De.My)("createdAt","desc"));return(0,De.aQ)(t,t=>{const n=t.docs.map(e=>(0,Pe.A)({id:e.id},e.data()));e(n)},e=>{console.error("Error in institutions subscription:",e)})},It=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)({name:"",type:"university",location:"",contactEmail:"",contactPhone:"",website:"",description:""});(0,i.useEffect)(()=>{p();const e=kt(e=>{t(e)});return()=>e()},[]);const p=async()=>{try{r(!0),a("");const e=await Nt();t(e)}catch(e){a("Failed to load institutions"),console.error("Error loading institutions:",e)}finally{r(!1)}},f=async e=>{if(window.confirm("Are you sure you want to delete this institution?"))try{a(""),await(async e=>{try{await(0,De.kd)((0,De.H9)(Oe.db,Ct,e))}catch(s){throw console.error("Error deleting institution:",s),new Error("Failed to delete institution")}})(e),console.log("Institution deleted:",e)}catch(t){a("Failed to delete institution"),console.error("Error deleting institution:",t)}};return n?(0,Le.jsx)("div",{className:"loading",children:"Loading institutions..."}):(0,Le.jsxs)("div",{children:[s&&(0,Le.jsx)("div",{className:"error-message",children:s}),(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Manage Institutions"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>l(!0),children:"Add Institution"})})]}),o&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:c?"Edit Institution":"Add New Institution"}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{a(""),c?(await(async(e,t)=>{try{const n=(0,De.H9)(Oe.db,Ct,e);await(0,De.mZ)(n,(0,Pe.A)((0,Pe.A)({},t),{},{updatedAt:(new Date).toISOString()}))}catch(s){throw console.error("Error updating institution:",s),new Error("Failed to update institution")}})(c.id,d),console.log("Institution updated:",d)):(await(async e=>{try{return(await(0,De.gS)((0,De.rJ)(Oe.db,Ct),(0,Pe.A)((0,Pe.A)({},e),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),status:"active"}))).id}catch(s){throw console.error("Error creating institution:",s),new Error("Failed to create institution")}})(d),console.log("Institution created:",d)),l(!1),u(null),h({name:"",type:"university",location:"",contactEmail:"",contactPhone:"",website:"",description:""})}catch(t){a("Failed to save institution"),console.error("Error saving institution:",t)}},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Institution Name"}),(0,Le.jsx)("input",{type:"text",value:d.name,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{name:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Type"}),(0,Le.jsxs)("select",{value:d.type,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{type:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"university",children:"University"}),(0,Le.jsx)("option",{value:"college",children:"College"}),(0,Le.jsx)("option",{value:"institute",children:"Institute"}),(0,Le.jsx)("option",{value:"polytechnic",children:"Polytechnic"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Location"}),(0,Le.jsx)("input",{type:"text",value:d.location,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{location:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Email"}),(0,Le.jsx)("input",{type:"email",value:d.contactEmail,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{contactEmail:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Contact Phone"}),(0,Le.jsx)("input",{type:"tel",value:d.contactPhone,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{contactPhone:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Website"}),(0,Le.jsx)("input",{type:"url",value:d.website,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{website:e.target.value}))})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{value:d.description,onChange:e=>h((0,Pe.A)((0,Pe.A)({},d),{},{description:e.target.value})),rows:"4"})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:c?"Update Institution":"Add Institution"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),u(null),h({name:"",type:"university",location:"",contactEmail:"",contactPhone:"",website:"",description:""})},children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsx)("div",{className:"table-container",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Name"}),(0,Le.jsx)("th",{children:"Type"}),(0,Le.jsx)("th",{children:"Location"}),(0,Le.jsx)("th",{children:"Contact"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.name}),(0,Le.jsx)("td",{children:e.type}),(0,Le.jsx)("td",{children:e.location}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{children:e.contactEmail}),(0,Le.jsx)("div",{children:e.contactPhone})]}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge status-".concat(e.status||"active"),children:e.status||"active"})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{u(e),h(e),l(!0)})(e),children:"Edit"}),(0,Le.jsx)("button",{className:"action-btn delete-btn",onClick:()=>f(e.id),children:"Delete"})]})})]},e.id))})]})})})]})};var At=n(731),Tt=n(469);const Pt=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),[v,y]=(0,i.useState)(null),[b,w]=(0,i.useState)({name:"",institutionId:"",description:""}),[x,j]=(0,i.useState)({name:"",facultyId:"",duration:"",requirements:"",description:"",level:"undergraduate",capacity:"",tuitionFee:""});(0,i.useEffect)(()=>{S();const e=kt(e=>{t(e)}),n=(0,At.kc)(e=>{r(e)});return()=>{e(),n()}},[]);const S=async()=>{try{l(!0),u("");const[e,n,i]=await Promise.all([Nt(),(0,At.Re)(),(0,Tt.NJ)()]);t(e),r(n),a(i)}catch(e){u("Failed to load data"),console.error("Error loading data:",e)}finally{l(!1)}};return o?(0,Le.jsx)("div",{className:"loading",children:"Loading faculties and courses..."}):(0,Le.jsxs)("div",{children:[c&&(0,Le.jsx)("div",{className:"error-message",children:c}),(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Manage Faculties & Courses"}),(0,Le.jsxs)("div",{className:"table-actions",children:[(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>h(!0),children:"Add Faculty"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>f(!0),children:"Add Course"})]})]}),d&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:m?"Edit Faculty":"Add New Faculty"}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{u(""),m?(await(0,At.ei)(m.id,b),console.log("Faculty updated:",b)):(await(0,At.Xw)(b),console.log("Faculty created:",b)),h(!1),g(null),w({name:"",institutionId:"",description:""})}catch(t){u("Failed to save faculty"),console.error("Error saving faculty:",t)}},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Faculty Name"}),(0,Le.jsx)("input",{type:"text",value:b.name,onChange:e=>w((0,Pe.A)((0,Pe.A)({},b),{},{name:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Institution"}),(0,Le.jsxs)("select",{value:b.institutionId,onChange:e=>w((0,Pe.A)((0,Pe.A)({},b),{},{institutionId:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Institution"}),e.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{value:b.description,onChange:e=>w((0,Pe.A)((0,Pe.A)({},b),{},{description:e.target.value})),rows:"3"})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:m?"Update Faculty":"Add Faculty"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{h(!1),g(null),w({name:"",institutionId:"",description:""})},children:"Cancel"})]})]})]}),p&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:v?"Edit Course":"Add New Course"}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{u(""),v?(await(0,Tt.J4)(v.id,x),console.log("Course updated:",x)):(await(0,Tt.C_)(x),console.log("Course created:",x)),f(!1),y(null),j({name:"",facultyId:"",duration:"",requirements:"",description:"",level:"undergraduate",capacity:"",tuitionFee:""})}catch(t){u("Failed to save course"),console.error("Error saving course:",t)}},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Course Name"}),(0,Le.jsx)("input",{type:"text",value:x.name,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{name:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Faculty"}),(0,Le.jsxs)("select",{value:x.facultyId,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{facultyId:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Faculty"}),n.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Level"}),(0,Le.jsxs)("select",{value:x.level,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{level:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"undergraduate",children:"Undergraduate"}),(0,Le.jsx)("option",{value:"postgraduate",children:"Postgraduate"}),(0,Le.jsx)("option",{value:"diploma",children:"Diploma"}),(0,Le.jsx)("option",{value:"certificate",children:"Certificate"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Duration"}),(0,Le.jsx)("input",{type:"text",value:x.duration,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{duration:e.target.value})),placeholder:"e.g., 4 years",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Capacity"}),(0,Le.jsx)("input",{type:"number",value:x.capacity,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{capacity:e.target.value})),placeholder:"Maximum number of students"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Tuition Fee (ZAR)"}),(0,Le.jsx)("input",{type:"number",value:x.tuitionFee,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{tuitionFee:e.target.value})),placeholder:"Annual tuition fee"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Requirements"}),(0,Le.jsx)("textarea",{value:x.requirements,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{requirements:e.target.value})),rows:"3",placeholder:"Admission requirements"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{value:x.description,onChange:e=>j((0,Pe.A)((0,Pe.A)({},x),{},{description:e.target.value})),rows:"3"})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:v?"Update Course":"Add Course"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{f(!1),y(null),j({name:"",facultyId:"",duration:"",requirements:"",description:"",level:"undergraduate",capacity:"",tuitionFee:""})},children:"Cancel"})]})]})]}),(0,Le.jsxs)("div",{className:"data-table",children:[(0,Le.jsx)("h4",{children:"Faculties"}),(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Name"}),(0,Le.jsx)("th",{children:"Institution"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:n.map(t=>{var n;return(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:t.name}),(0,Le.jsx)("td",{children:null===(n=e.find(e=>e.id===t.institutionId))||void 0===n?void 0:n.name}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{g(e),w(e),h(!0)})(t),children:"Edit"}),(0,Le.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this faculty?"))try{u(""),await(0,At.Iq)(e),console.log("Faculty deleted:",e)}catch(t){u("Failed to delete faculty"),console.error("Error deleting faculty:",t)}})(t.id),children:"Delete"})]})})]},t.id)})})]})]}),(0,Le.jsxs)("div",{className:"data-table",style:{marginTop:"2rem"},children:[(0,Le.jsx)("h4",{children:"Courses"}),(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Name"}),(0,Le.jsx)("th",{children:"Faculty"}),(0,Le.jsx)("th",{children:"Level"}),(0,Le.jsx)("th",{children:"Duration"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:s.map(e=>{var t;return(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.name}),(0,Le.jsx)("td",{children:null===(t=n.find(t=>t.id===e.facultyId))||void 0===t?void 0:t.name}),(0,Le.jsx)("td",{children:e.level}),(0,Le.jsx)("td",{children:e.duration}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{y(e),j(e),f(!0)})(e),children:"Edit"}),(0,Le.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this course?"))try{u(""),await(0,Tt.zs)(e),console.log("Course deleted:",e)}catch(t){u("Failed to delete course"),console.error("Error deleting course:",t)}})(e.id),children:"Delete"})]})})]},e.id)})})]})]})]})};var Rt=n(47);const Dt=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),[p,f]=(0,i.useState)({courseId:"",intakeYear:(new Date).getFullYear(),deadline:"",requirements:"",seats:0,status:"open"});(0,i.useEffect)(()=>{m();const e=(0,Rt.wB)(e=>{r(e)});return()=>e()},[]);const m=async()=>{try{a(!0),l("");const[e,n]=await Promise.all([(0,Tt.NJ)(),(0,Rt.ZA)()]);t(e),r(n)}catch(e){l("Failed to load data"),console.error("Error loading data:",e)}finally{a(!1)}};return s?(0,Le.jsx)("div",{className:"loading",children:"Loading admissions..."}):(0,Le.jsxs)("div",{children:[o&&(0,Le.jsx)("div",{className:"error-message",children:o}),(0,Le.jsxs)("div",{className:"table-header",children:[(0,Le.jsx)("h3",{children:"Manage Admissions"}),(0,Le.jsx)("div",{className:"table-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>u(!0),children:"Publish Admission"})})]}),c&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:d?"Edit Admission":"Publish New Admission"}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{l(""),await(0,Rt.mD)(p),console.log("Admission published:",p),u(!1),h(null),f({courseId:"",intakeYear:(new Date).getFullYear(),deadline:"",requirements:"",seats:0,status:"open"})}catch(t){l("Failed to publish admission"),console.error("Error publishing admission:",t)}},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Course"}),(0,Le.jsxs)("select",{value:p.courseId,onChange:e=>f((0,Pe.A)((0,Pe.A)({},p),{},{courseId:e.target.value})),required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),e.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Intake Year"}),(0,Le.jsx)("input",{type:"number",value:p.intakeYear,onChange:e=>f((0,Pe.A)((0,Pe.A)({},p),{},{intakeYear:parseInt(e.target.value)})),min:"2024",max:"2030",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Application Deadline"}),(0,Le.jsx)("input",{type:"date",value:p.deadline,onChange:e=>f((0,Pe.A)((0,Pe.A)({},p),{},{deadline:e.target.value})),required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Requirements"}),(0,Le.jsx)("textarea",{value:p.requirements,onChange:e=>f((0,Pe.A)((0,Pe.A)({},p),{},{requirements:e.target.value})),rows:"3",placeholder:"Admission requirements",required:!0})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Available Seats"}),(0,Le.jsx)("input",{type:"number",value:p.seats,onChange:e=>f((0,Pe.A)((0,Pe.A)({},p),{},{seats:parseInt(e.target.value)})),min:"1",required:!0})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:d?"Update Admission":"Publish Admission"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{u(!1),h(null),f({courseId:"",intakeYear:(new Date).getFullYear(),deadline:"",requirements:"",seats:0,status:"open"})},children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Course"}),(0,Le.jsx)("th",{children:"Intake Year"}),(0,Le.jsx)("th",{children:"Deadline"}),(0,Le.jsx)("th",{children:"Applications"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:n.map(t=>{const n=e.find(e=>e.id===t.courseId);return(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:null===n||void 0===n?void 0:n.name}),(0,Le.jsx)("td",{children:t.intakeYear}),(0,Le.jsx)("td",{children:new Date(t.deadline).toLocaleDateString()}),(0,Le.jsx)("td",{children:t.applications||0}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge status-".concat(t.status),children:t.status})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:["open"===t.status&&(0,Le.jsx)("button",{className:"action-btn btn-danger",onClick:()=>(async e=>{try{l(""),await(0,Rt.RJ)(e,"closed"),console.log("Admission closed:",e)}catch(t){l("Failed to close admission"),console.error("Error closing admission:",t)}})(t.id),children:"Close"}),(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{h(e),f(e),u(!0)})(t),children:"Edit"}),(0,Le.jsx)("button",{className:"action-btn view-btn",children:"View Applications"})]})})]},t.id)})})]})})]})},Ot="companies",Lt=async()=>{try{const e=(0,De.P)((0,De.rJ)(Oe.db,Ot),(0,De.My)("createdAt","desc"));return(await(0,De.GG)(e)).docs.map(e=>(0,Pe.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting companies:",e),new Error("Failed to load companies")}},Mt=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const r=(0,De.H9)(Oe.db,Ot,e),i={status:t,updatedAt:(new Date).toISOString()};"approved"===t?(i.approved=!0,i.approvedAt=(new Date).toISOString()):"rejected"===t?(i.approved=!1,i.rejectedAt=(new Date).toISOString(),n&&(i.rejectionReason=n)):"suspended"===t&&(i.suspendedAt=(new Date).toISOString(),n&&(i.suspensionReason=n)),await(0,De.mZ)(r,i)}catch(r){throw console.error("Error updating company status:",r),new Error("Failed to update company status")}},Ft=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)("");(0,i.useEffect)(()=>{o();const e=(e=>{const t=(0,De.P)((0,De.rJ)(Oe.db,Ot),(0,De.My)("createdAt","desc"));return(0,De.aQ)(t,t=>{const n=t.docs.map(e=>(0,Pe.A)({id:e.id},e.data()));e(n)},e=>{console.error("Error in companies subscription:",e)})})(e=>{t(e)});return()=>e()},[]);const o=async()=>{try{r(!0),a("");const e=await Lt();t(e)}catch(e){a("Failed to load companies"),console.error("Error loading companies:",e)}finally{r(!1)}};return n?(0,Le.jsx)("div",{className:"loading",children:"Loading companies..."}):(0,Le.jsxs)("div",{children:[s&&(0,Le.jsx)("div",{className:"error-message",children:s}),(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"Manage Companies"})}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Company Name"}),(0,Le.jsx)("th",{children:"Contact Email"}),(0,Le.jsx)("th",{children:"Phone"}),(0,Le.jsx)("th",{children:"Registration Date"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.companyName}),(0,Le.jsx)("td",{children:e.email}),(0,Le.jsx)("td",{children:e.phone}),(0,Le.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge status-".concat(e.status||"pending"),children:e.status||"pending"})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:["approved"!==e.status&&"rejected"!==e.status&&(0,Le.jsx)("button",{className:"action-btn approve-btn",onClick:()=>(async e=>{try{a(""),await Mt(e,"approved"),console.log("Company approved:",e)}catch(t){a("Failed to approve company"),console.error("Error approving company:",t)}})(e.id),children:"Approve"}),"suspended"!==e.status&&"rejected"!==e.status&&(0,Le.jsx)("button",{className:"action-btn btn-danger",onClick:()=>(async e=>{try{a(""),await Mt(e,"suspended"),console.log("Company suspended:",e)}catch(t){a("Failed to suspend company"),console.error("Error suspending company:",t)}})(e.id),children:"Suspend"}),"pending"===e.status&&(0,Le.jsx)("button",{className:"action-btn reject-btn",onClick:()=>(async e=>{try{a(""),await Mt(e,"rejected"),console.log("Company rejected:",e)}catch(t){a("Failed to reject company"),console.error("Error rejecting company:",t)}})(e.id),children:"Reject"}),(0,Le.jsx)("button",{className:"action-btn edit-btn",children:"View"})]})})]},e.id))})]})})]})},Ut="users",Vt=async()=>{try{const e=(0,De.P)((0,De.rJ)(Oe.db,Ut),(0,De.My)("createdAt","desc"));return(await(0,De.GG)(e)).docs.map(e=>(0,Pe.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting users:",e),new Error("Failed to load users")}},zt=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)("");(0,i.useEffect)(()=>{p();const e=(e=>{const t=(0,De.P)((0,De.rJ)(Oe.db,Ut),(0,De.My)("createdAt","desc"));return(0,De.aQ)(t,t=>{const n=t.docs.map(e=>(0,Pe.A)({id:e.id},e.data()));e(n)},e=>{console.error("Error in users subscription:",e)})})(e=>{t(e)});return()=>e()},[]);const p=async()=>{try{r(!0),a("");const e=await Vt();t(e)}catch(e){a("Failed to load users"),console.error("Error loading users:",e)}finally{r(!1)}},f=async(e,t)=>{try{a(""),await(async(e,t)=>{try{const n=(0,De.H9)(Oe.db,Ut,e);await(0,De.mZ)(n,{role:t,updatedAt:(new Date).toISOString()})}catch(s){throw console.error("Error updating user role:",s),new Error("Failed to update user role")}})(e,t),console.log("User role updated:",e,t)}catch(n){a("Failed to update user role"),console.error("Error updating user role:",n)}},m=async e=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{a(""),await(async e=>{try{await(0,De.kd)((0,De.H9)(Oe.db,Ut,e))}catch(s){throw console.error("Error deleting user:",s),new Error("Failed to delete user")}})(e),console.log("User deleted:",e)}catch(t){a("Failed to delete user"),console.error("Error deleting user:",t)}};return n?(0,Le.jsx)("div",{className:"loading",children:"Loading users..."}):(0,Le.jsxs)("div",{children:[s&&(0,Le.jsx)("div",{className:"error-message",children:s}),(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"Manage Users"})}),o&&c&&(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:"Change User Role"}),(0,Le.jsxs)("p",{children:["Changing role for: ",(0,Le.jsx)("strong",{children:c.name})," (",c.email,")"]}),(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c&&(await f(c.id,d),l(!1),u(null),h(""))},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"New Role"}),(0,Le.jsxs)("select",{value:d,onChange:e=>h(e.target.value),required:!0,children:[(0,Le.jsx)("option",{value:"student",children:"Student"}),(0,Le.jsx)("option",{value:"company",children:"Company"}),(0,Le.jsx)("option",{value:"institute",children:"Institute"}),(0,Le.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update Role"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),u(null),h("")},children:"Cancel"})]})]})]}),(0,Le.jsx)("div",{className:"data-table",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Name"}),(0,Le.jsx)("th",{children:"Email"}),(0,Le.jsx)("th",{children:"Role"}),(0,Le.jsx)("th",{children:"Phone"}),(0,Le.jsx)("th",{children:"Registered"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:e.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.name}),(0,Le.jsx)("td",{children:e.email}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"role-badge role-".concat(e.role),children:e.role})}),(0,Le.jsx)("td",{children:e.phone}),(0,Le.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge status-".concat(e.emailVerified?"active":"pending"),children:e.emailVerified?"Verified":"Pending"})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[(0,Le.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{u(e),h(e.role),l(!0)})(e),children:"Change Role"}),(0,Le.jsx)("button",{className:"action-btn btn-danger",onClick:()=>m(e.id),children:"Delete"})]})})]},e.id))})]})})]})},qt=()=>(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{className:"table-header",children:(0,Le.jsx)("h3",{children:"System Reports"})}),(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"User Registrations"}),(0,Le.jsx)("div",{className:"stat-value",children:"1,247"}),(0,Le.jsx)("p",{children:"Total registered users"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Active Admissions"}),(0,Le.jsx)("div",{className:"stat-value",children:"8"}),(0,Le.jsx)("p",{children:"Currently open"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Company Applications"}),(0,Le.jsx)("div",{className:"stat-value",children:"45"}),(0,Le.jsx)("p",{children:"This month"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Course Applications"}),(0,Le.jsx)("div",{className:"stat-value",children:"289"}),(0,Le.jsx)("p",{children:"Total applications"})]})]}),(0,Le.jsxs)("div",{className:"admin-form",children:[(0,Le.jsx)("h4",{children:"Generate Custom Report"}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Report Type"}),(0,Le.jsxs)("select",{children:[(0,Le.jsx)("option",{children:"User Registration Report"}),(0,Le.jsx)("option",{children:"Admission Statistics"}),(0,Le.jsx)("option",{children:"Company Applications"}),(0,Le.jsx)("option",{children:"Course Popularity"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Date Range"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,Le.jsx)("input",{type:"date"}),(0,Le.jsx)("span",{children:"to"}),(0,Le.jsx)("input",{type:"date"})]})]}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Generate Report"})]})]}),Bt=()=>(0,Le.jsxs)("div",{className:"tab-content",children:[(0,Le.jsx)("h2",{children:"System Overview"}),(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Total Institutions"}),(0,Le.jsx)("div",{className:"stat-value",children:"15"}),(0,Le.jsx)("p",{children:"Higher learning institutions"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Active Admissions"}),(0,Le.jsx)("div",{className:"stat-value",children:"8"}),(0,Le.jsx)("p",{children:"Open for applications"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Registered Companies"}),(0,Le.jsx)("div",{className:"stat-value",children:"23"}),(0,Le.jsx)("p",{children:"Approved employers"})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("h3",{children:"Total Users"}),(0,Le.jsx)("div",{className:"stat-value",children:"1,247"}),(0,Le.jsx)("p",{children:"Registered users"})]})]}),(0,Le.jsxs)("div",{className:"recent-activity",children:[(0,Le.jsx)("h3",{children:"Recent Activity"}),(0,Le.jsxs)("div",{className:"activity-list",children:[(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsx)("strong",{children:"New Institution Registered:"})," National University of Lesotho"]}),(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsx)("strong",{children:"Admission Published:"})," Computer Science 2024"]}),(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsx)("strong",{children:"Company Approved:"})," Tech Solutions Ltd"]})]})]})]}),Ht=()=>{const{userProfile:e}=Fe(),[t,n]=(0,i.useState)("overview");return(0,Le.jsxs)("div",{className:"admin-dashboard",children:[(0,Le.jsxs)("div",{className:"admin-header",children:[(0,Le.jsx)("h1",{children:"Admin Dashboard"}),(0,Le.jsxs)("p",{children:["Welcome back, ",null===e||void 0===e?void 0:e.name]})]}),(0,Le.jsxs)("div",{className:"admin-layout",children:[(0,Le.jsx)("div",{className:"admin-sidebar",children:[{id:"overview",name:"Overview"},{id:"institutions",name:"Institutions"},{id:"faculties",name:"Faculties & Courses"},{id:"admissions",name:"Admissions"},{id:"companies",name:"Companies"},{id:"users",name:"Users"},{id:"reports",name:"Reports"}].map(e=>(0,Le.jsx)("button",{className:"sidebar-tab ".concat(t===e.id?"active":""),onClick:()=>n(e.id),children:e.name},e.id))}),(0,Le.jsx)("div",{className:"admin-content",children:(()=>{switch(t){case"overview":default:return(0,Le.jsx)(Bt,{});case"institutions":return(0,Le.jsx)(It,{});case"faculties":return(0,Le.jsx)(Pt,{});case"admissions":return(0,Le.jsx)(Dt,{});case"companies":return(0,Le.jsx)(Ft,{});case"users":return(0,Le.jsx)(zt,{});case"reports":return(0,Le.jsx)(qt,{})}})()})]})]})},Gt=()=>{const{userProfile:e,updateProfile:t,resendVerification:n,isEmailVerified:r}=Fe(),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)({name:(null===e||void 0===e?void 0:e.name)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",institutionName:(null===e||void 0===e?void 0:e.institutionName)||"",companyName:(null===e||void 0===e?void 0:e.companyName)||""}),[p,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)(""),[v,y]=(0,i.useState)(""),b=e=>{const{name:t,value:n}=e.target;if("name"!==t||/^[a-zA-Z\s]*$/.test(n)){if("phone"===t){const e=n.replace(/\D/g,"");return void(e.length<=10&&h(n=>(0,Pe.A)((0,Pe.A)({},n),{},{[t]:e})))}h(e=>(0,Pe.A)((0,Pe.A)({},e),{},{[t]:n}))}},w=e=>{const t=e.replace(/\D/g,"");return 0===t.length?"":t.length<=3?t:t.length<=6?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))};return e?(0,Le.jsxs)("div",{className:"profile",children:[(0,Le.jsxs)("div",{className:"profile-header",children:[(0,Le.jsx)("h1",{children:"My Profile"}),(0,Le.jsx)("p",{children:"Manage your account information and preferences"})]}),(0,Le.jsx)("div",{className:"profile-content",children:(0,Le.jsxs)("div",{className:"profile-card",children:[(0,Le.jsxs)("div",{className:"profile-card-header",children:[(0,Le.jsx)("h2",{children:"Personal Information"}),!c&&(0,Le.jsx)("button",{onClick:()=>{h({name:(null===e||void 0===e?void 0:e.name)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",institutionName:(null===e||void 0===e?void 0:e.institutionName)||"",companyName:(null===e||void 0===e?void 0:e.companyName)||""}),u(!0),g(""),y("")},className:"edit-btn",children:"Edit Profile"})]}),m&&(0,Le.jsx)("div",{className:"message success",children:m}),v&&(0,Le.jsx)("div",{className:"message error",children:v}),c?(0,Le.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0),g(""),y("");try{await t(d),g("Profile updated successfully!"),u(!1)}catch(v){y(v.message)}finally{f(!1)}},className:"profile-form",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,Le.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:b,required:!0,pattern:"[a-zA-Z\\s]+",title:"Name can only contain letters and spaces",maxLength:"50"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,Le.jsx)("input",{type:"email",id:"email",value:e.email,disabled:!0,className:"disabled-input"}),(0,Le.jsx)("small",{children:"Email cannot be changed"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,Le.jsx)("input",{type:"tel",id:"phone",name:"phone",value:w(d.phone),onChange:b,required:!0,placeholder:"(123) 456-7890",maxLength:"14"}),(0,Le.jsx)("small",{children:"10-digit number only"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"role",children:"Account Type"}),(0,Le.jsx)("input",{type:"text",id:"role",value:e.role,disabled:!0,className:"disabled-input"}),(0,Le.jsx)("small",{children:"Account type cannot be changed"})]}),"institute"===e.role&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"institutionName",children:"Institution Name"}),(0,Le.jsx)("input",{type:"text",id:"institutionName",name:"institutionName",value:d.institutionName,onChange:b,required:!0,maxLength:"100"})]}),"company"===e.role&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"companyName",children:"Company Name"}),(0,Le.jsx)("input",{type:"text",id:"companyName",name:"companyName",value:d.companyName,onChange:b,required:!0,maxLength:"100"})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"submit",className:"save-btn",disabled:p,children:p?"Saving...":"Save Changes"}),(0,Le.jsx)("button",{type:"button",onClick:()=>{u(!1),g(""),y("")},className:"cancel-btn",children:"Cancel"})]})]}):(0,Le.jsxs)("div",{className:"profile-info",children:[(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Full Name:"}),(0,Le.jsx)("span",{children:e.name})]}),(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Email Address:"}),(0,Le.jsx)("span",{children:e.email})]}),(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Phone Number:"}),(0,Le.jsx)("span",{children:w(e.phone)})]}),(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Account Type:"}),(0,Le.jsx)("span",{className:"role-badge",children:e.role})]}),(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Email Verification:"}),(0,Le.jsxs)("div",{className:"verification-section",children:[(0,Le.jsx)("span",{className:"verification-status ".concat(e.emailVerified?"verified":"unverified"),children:e.emailVerified?"Verified":"Unverified"}),!e.emailVerified&&(0,Le.jsx)("button",{onClick:async()=>{a(!0),l("");try{await n(),l("Verification email sent! Check your inbox.")}catch(v){l("Failed to send verification email.")}finally{a(!1)}},disabled:s,className:"verify-email-btn",children:s?"Sending...":"Verify Email"})]}),o&&(0,Le.jsx)("small",{className:"verification-message",children:o})]}),(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Member Since:"}),(0,Le.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),"institute"===e.role&&e.institutionName&&(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Institution Name:"}),(0,Le.jsx)("span",{children:e.institutionName})]}),"company"===e.role&&e.companyName&&(0,Le.jsxs)("div",{className:"info-item",children:[(0,Le.jsx)("label",{children:"Company Name:"}),(0,Le.jsx)("span",{children:e.companyName})]})]})]})})]}):(0,Le.jsx)("div",{children:"Loading..."})},Wt=()=>{const[e,t]=(0,i.useState)({email:"",password:""}),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(!1),{login:o,userProfile:l}=Fe(),c=ee(),u=e=>{const{name:n,value:r}=e.target;t(e=>(0,Pe.A)((0,Pe.A)({},e),{},{[n]:r}))};return(0,Le.jsx)("div",{className:"auth-container",children:(0,Le.jsxs)("div",{className:"auth-card",children:[(0,Le.jsx)("h2",{children:"Welcome Back"}),(0,Le.jsx)("p",{className:"auth-subtitle",children:"Sign in to your CareerGuide account"}),n&&(0,Le.jsx)("div",{className:"error-message",children:n}),(0,Le.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r(""),e.email.trim()?e.password.trim()||(r("Please enter your password"),0):(r("Please enter your email address"),0)){a(!0);try{await o(e.email,e.password);const t=localStorage.getItem("intendedPath");t?(localStorage.removeItem("intendedPath"),c(t)):setTimeout(()=>{if(l&&l.role){const e={student:"/student/dashboard",institute:"/institute/dashboard",company:"/company/dashboard",admin:"/admin/dashboard"}[l.role]||"/dashboard";c(e)}else c("/dashboard")},100)}catch(n){r(n.message)}finally{a(!1)}}},className:"auth-form",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,Le.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:u,required:!0,placeholder:"Enter your registered email address"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Le.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:u,required:!0,placeholder:"Enter your password"})]}),(0,Le.jsx)("button",{type:"submit",className:"auth-button",disabled:s,children:s?"Signing In...":"Sign In"})]}),(0,Le.jsxs)("div",{className:"auth-footer",children:[(0,Le.jsxs)("p",{children:["Don't have an account? ",(0,Le.jsx)(Ie,{to:"/register",children:"Create Account"})]}),(0,Le.jsx)("p",{children:(0,Le.jsx)("small",{children:"Demo: Use the email you registered with. Passwords are stored in plain text for demo purposes."})})]})]})})},Kt=()=>{const[e,t]=(0,i.useState)({name:"",email:"",phone:"",role:"student",institutionName:"",companyName:"",password:"",confirmPassword:""}),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(!1),{register:o}=Fe(),l=ee(),c=e=>{const{name:n,value:r}=e.target;if("name"!==n||/^[a-zA-Z\s]*$/.test(r)){if("phone"===n){const e=r.replace(/[^\d+]/g,"");return void t(t=>(0,Pe.A)((0,Pe.A)({},t),{},{[n]:e}))}t(e=>(0,Pe.A)((0,Pe.A)({},e),{},{[n]:r}))}};return(0,Le.jsx)("div",{className:"auth-container",children:(0,Le.jsxs)("div",{className:"auth-card",children:[(0,Le.jsx)("h2",{children:"Create Your Account"}),(0,Le.jsx)("p",{className:"auth-subtitle",children:"Join CareerGuide - Real email verification required"}),n&&(0,Le.jsx)("div",{className:"error-message",children:n}),(0,Le.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r(""),(()=>{if(!e.name.trim())return r("Please enter your full name"),!1;if(e.name.trim().length<2)return r("Name must be at least 2 characters long"),!1;if(!e.email.trim())return r("Please enter your email address"),!1;if(!e.phone.trim())return r("Please enter your phone number"),!1;const t=e.phone.replace(/[^\d+]/g,"");return/^(\+266\d{8}|266\d{8}|0\d{8}|\d{8})$/.test(t)?e.password.length<6?(r("Password must be at least 6 characters long"),!1):e.password!==e.confirmPassword?(r("Passwords do not match"),!1):"institute"!==e.role||e.institutionName.trim()?!("company"===e.role&&!e.companyName.trim())||(r("Please enter your company name"),!1):(r("Please enter your institution name"),!1):(r("Please enter a valid Lesotho phone number"),!1)})()){a(!0);try{await o(e);alert("Registration successful! You can now log in to your account."),l("/login")}catch(n){r(n.message)}finally{a(!1)}}},className:"auth-form",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,Le.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:c,required:!0,placeholder:"Enter your full name",pattern:"[a-zA-Z\\s]+",title:"Name can only contain letters and spaces",maxLength:"50"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,Le.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,required:!0,placeholder:"your-real-email@gmail.com",title:"Use a real email address for verification"}),(0,Le.jsx)("small",{children:"Use a real email - verification link will be sent"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"phone",children:"Lesotho Phone Number *"}),(0,Le.jsx)("input",{type:"tel",id:"phone",name:"phone",value:(e=>{const t=e.replace(/[^\d+]/g,"");if(t.startsWith("+266")&&t.length>=5){const e=t.slice(4);return e.length<=2?"+266 ".concat(e):e.length<=4?"+266 ".concat(e.slice(0,2)," ").concat(e.slice(2)):"+266 ".concat(e.slice(0,2)," ").concat(e.slice(2,4)," ").concat(e.slice(4,6)," ").concat(e.slice(6,8))}if(t.startsWith("266")&&t.length>=4){const e=t.slice(3);return e.length<=2?"266 ".concat(e):e.length<=4?"266 ".concat(e.slice(0,2)," ").concat(e.slice(2)):"266 ".concat(e.slice(0,2)," ").concat(e.slice(2,4)," ").concat(e.slice(4,6)," ").concat(e.slice(6,8))}if(t.startsWith("0")&&t.length>=2){const e=t.slice(1);return e.length<=2?"0 ".concat(e):e.length<=4?"0 ".concat(e.slice(0,2)," ").concat(e.slice(2)):"0 ".concat(e.slice(0,2)," ").concat(e.slice(2,4)," ").concat(e.slice(4,6)," ").concat(e.slice(6,8))}return/^\d+$/.test(t)&&t.length<=8?t.length<=2?t:t.length<=4?"".concat(t.slice(0,2)," ").concat(t.slice(2)):"".concat(t.slice(0,2)," ").concat(t.slice(2,4)," ").concat(t.slice(4,6)," ").concat(t.slice(6,8)):e})(e.phone),onChange:c,required:!0,placeholder:"+266 50 123 456 or 050 123 456",maxLength:"20",pattern:"[\\d+\\s]+",title:"Lesotho phone number required"}),(0,Le.jsx)("small",{children:"Formats: +26650123456, 26650123456, 050123456, or 50123456"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"role",children:"I am a *"}),(0,Le.jsxs)("select",{id:"role",name:"role",value:e.role,onChange:c,required:!0,children:[(0,Le.jsx)("option",{value:"student",children:"Student"}),(0,Le.jsx)("option",{value:"institute",children:"Educational Institution"}),(0,Le.jsx)("option",{value:"company",children:"Company/Employer"})]})]}),"institute"===e.role&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"institutionName",children:"Institution Name *"}),(0,Le.jsx)("input",{type:"text",id:"institutionName",name:"institutionName",value:e.institutionName,onChange:c,required:!0,placeholder:"Enter your institution name",maxLength:"100"})]}),"company"===e.role&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"companyName",children:"Company Name *"}),(0,Le.jsx)("input",{type:"text",id:"companyName",name:"companyName",value:e.companyName,onChange:c,required:!0,placeholder:"Enter your company name",maxLength:"100"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"password",children:"Password *"}),(0,Le.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:c,required:!0,placeholder:"Enter your password (min. 6 characters)",minLength:"6",maxLength:"50"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password *"}),(0,Le.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:c,required:!0,placeholder:"Confirm your password",minLength:"6",maxLength:"50"})]}),(0,Le.jsxs)("div",{className:"form-notice",children:[(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Real Email Required:"})," You will receive a verification link from Firebase to activate your account."]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Lesotho Phone:"})," Only Lesotho phone numbers accepted in specified formats."]})]}),(0,Le.jsx)("button",{type:"submit",className:"auth-button",disabled:s,children:s?"Creating Account...":"Create Account"})]}),(0,Le.jsx)("div",{className:"auth-footer",children:(0,Le.jsxs)("p",{children:["Already have an account? ",(0,Le.jsx)(Ie,{to:"/login",children:"Sign In"})]})})]})})},Qt=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),{verifyEmail:c,resendVerification:u,hasPendingVerification:d}=Fe(),h=ee();return d?(0,Le.jsx)("div",{className:"auth-container",children:(0,Le.jsxs)("div",{className:"auth-card",children:[(0,Le.jsx)("h2",{children:"Verify Your Email"}),(0,Le.jsx)("p",{className:"auth-subtitle",children:"We've sent a verification code to your email address. Please enter the code below to verify your account."}),n&&(0,Le.jsx)("div",{className:"error-message",children:n}),(0,Le.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r(""),e.trim()){a(!0);try{await c(e.toUpperCase());const t=localStorage.getItem("intendedPath");t?(localStorage.removeItem("intendedPath"),h(t)):h("/dashboard")}catch(n){r(n.message)}finally{a(!1)}}else r("Please enter the verification code")},className:"auth-form",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"code",children:"Verification Code"}),(0,Le.jsx)("input",{type:"text",id:"code",value:e,onChange:e=>t(e.target.value),required:!0,placeholder:"Enter 6-digit code",maxLength:"6",style:{textTransform:"uppercase"}})]}),(0,Le.jsx)("button",{type:"submit",className:"auth-button",disabled:s,children:s?"Verifying...":"Verify Email"})]}),(0,Le.jsx)("div",{className:"auth-footer",children:(0,Le.jsxs)("p",{children:["Didn't receive the code?"," ",(0,Le.jsx)("button",{onClick:async()=>{l(!0);try{const e=await u();alert("New verification code sent: ".concat(e,"\n\n(In a real app, this would be sent to your email)"))}catch(e){r("Failed to resend verification code")}finally{l(!1)}},disabled:o,className:"resend-button",children:o?"Sending...":"Resend Code"})]})})]})}):(0,Le.jsx)("div",{className:"auth-container",children:(0,Le.jsxs)("div",{className:"auth-card",children:[(0,Le.jsx)("h2",{children:"No Verification Required"}),(0,Le.jsx)("p",{children:"Your email is already verified or there's no pending verification."}),(0,Le.jsx)("button",{onClick:()=>h("/login"),className:"auth-button",children:"Go to Login"})]})})},Jt=()=>(0,Le.jsxs)(ye,{children:[(0,Le.jsx)(ge,{path:"/",element:(0,Le.jsx)(qe,{})}),(0,Le.jsx)(ge,{path:"/auth/login",element:(0,Le.jsx)(Wt,{})}),(0,Le.jsx)(ge,{path:"/auth/register",element:(0,Le.jsx)(Kt,{})}),(0,Le.jsx)(ge,{path:"/auth/verify-email",element:(0,Le.jsx)(Qt,{})}),(0,Le.jsx)(ge,{path:"/dashboard",element:(0,Le.jsx)(Be,{})}),(0,Le.jsx)(ge,{path:"/student/dashboard",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(He,{})})}),(0,Le.jsx)(ge,{path:"/student/profile",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(Ge,{})})}),(0,Le.jsx)(ge,{path:"/student/documents",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(st,{})})}),(0,Le.jsx)(ge,{path:"/student/applications",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(at,{})})}),(0,Le.jsx)(ge,{path:"/student/auto-apply",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(ot,{})})}),(0,Le.jsx)(ge,{path:"/student/admissions",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(lt,{})})}),(0,Le.jsx)(ge,{path:"/student/jobs",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(ct,{})})}),(0,Le.jsx)(ge,{path:"/student/notifications",element:(0,Le.jsx)(Ve,{requiredRole:"student",children:(0,Le.jsx)(ut,{})})}),(0,Le.jsx)(ge,{path:"/institute/dashboard",element:(0,Le.jsx)(Ve,{requiredRole:"institute",children:(0,Le.jsx)(yt,{})})}),(0,Le.jsx)(ge,{path:"/company/dashboard",element:(0,Le.jsx)(Ve,{requiredRole:"company",children:(0,Le.jsx)(_t,{})})}),(0,Le.jsx)(ge,{path:"/admin/dashboard",element:(0,Le.jsx)(Ve,{requiredRole:"admin",children:(0,Le.jsx)(Ht,{})})}),(0,Le.jsx)(ge,{path:"/profile",element:(0,Le.jsx)(Gt,{})}),(0,Le.jsx)(ge,{path:"/unauthorized",element:(0,Le.jsxs)("div",{style:{padding:"2rem",textAlign:"center"},children:[(0,Le.jsx)("h2",{children:"Unauthorized Access"}),(0,Le.jsx)("p",{children:"You don't have permission to access this page."})]})}),(0,Le.jsx)(ge,{path:"*",element:(0,Le.jsx)(me,{to:"/"})})]});const Yt=function(){return(0,Le.jsx)(Ue,{children:(0,Le.jsx)(Ce,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Le.jsx)(ze,{children:(0,Le.jsx)(Jt,{})})})})};a.createRoot(document.getElementById("root")).render((0,Le.jsx)(i.StrictMode,{children:(0,Le.jsx)(Ue,{children:(0,Le.jsx)(Yt,{})})}))})();